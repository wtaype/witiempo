const ji=function(r){const e=[];let s=0;for(let h=0;h<r.length;h++){let u=r.charCodeAt(h);u<128?e[s++]=u:u<2048?(e[s++]=u>>6|192,e[s++]=u&63|128):(u&64512)===55296&&h+1<r.length&&(r.charCodeAt(h+1)&64512)===56320?(u=65536+((u&1023)<<10)+(r.charCodeAt(++h)&1023),e[s++]=u>>18|240,e[s++]=u>>12&63|128,e[s++]=u>>6&63|128,e[s++]=u&63|128):(e[s++]=u>>12|224,e[s++]=u>>6&63|128,e[s++]=u&63|128)}return e},Ps=function(r){const e=[];let s=0,h=0;for(;s<r.length;){const u=r[s++];if(u<128)e[h++]=String.fromCharCode(u);else if(u>191&&u<224){const v=r[s++];e[h++]=String.fromCharCode((u&31)<<6|v&63)}else if(u>239&&u<365){const v=r[s++],y=r[s++],E=r[s++],A=((u&7)<<18|(v&63)<<12|(y&63)<<6|E&63)-65536;e[h++]=String.fromCharCode(55296+(A>>10)),e[h++]=String.fromCharCode(56320+(A&1023))}else{const v=r[s++],y=r[s++];e[h++]=String.fromCharCode((u&15)<<12|(v&63)<<6|y&63)}}return e.join("")},Ns={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const s=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,h=[];for(let u=0;u<r.length;u+=3){const v=r[u],y=u+1<r.length,E=y?r[u+1]:0,A=u+2<r.length,S=A?r[u+2]:0,V=v>>2,C=(v&3)<<4|E>>4;let K=(E&15)<<2|S>>6,X=S&63;A||(X=64,y||(K=64)),h.push(s[V],s[C],s[K],s[X])}return h.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(ji(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):Ps(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const s=e?this.charToByteMapWebSafe_:this.charToByteMap_,h=[];for(let u=0;u<r.length;){const v=s[r.charAt(u++)],E=u<r.length?s[r.charAt(u)]:0;++u;const S=u<r.length?s[r.charAt(u)]:64;++u;const C=u<r.length?s[r.charAt(u)]:64;if(++u,v==null||E==null||S==null||C==null)throw new Os;const K=v<<2|E>>4;if(h.push(K),S!==64){const X=E<<4&240|S>>2;if(h.push(X),C!==64){const U=S<<6&192|C;h.push(U)}}}return h},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class Os extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Ms=function(r){const e=ji(r);return Ns.encodeByteArray(e,!0)},xi=function(r){return Ms(r).replace(/\./g,"")};function Ls(){try{return typeof indexedDB=="object"}catch{return!1}}function ks(){return new Promise((r,e)=>{try{let s=!0;const h="validate-browser-context-for-indexeddb-analytics-module",u=self.indexedDB.open(h);u.onsuccess=()=>{u.result.close(),s||self.indexedDB.deleteDatabase(h),r(!0)},u.onupgradeneeded=()=>{s=!1},u.onerror=()=>{e(u.error?.message||"")}}catch(s){e(s)}})}const js="FirebaseError";class Ot extends Error{constructor(e,s,h){super(s),this.code=e,this.customData=h,this.name=js,Object.setPrototypeOf(this,Ot.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Vi.prototype.create)}}class Vi{constructor(e,s,h){this.service=e,this.serviceName=s,this.errors=h}create(e,...s){const h=s[0]||{},u=`${this.service}/${e}`,v=this.errors[e],y=v?xs(v,h):"Error",E=`${this.serviceName}: ${y} (${u}).`;return new Ot(u,E,h)}}function xs(r,e){return r.replace(Vs,(s,h)=>{const u=e[h];return u!=null?String(u):`<${h}?>`})}const Vs=/\{\$([^}]+)}/g;class me{constructor(e,s,h){this.name=e,this.instanceFactory=s,this.type=h,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}var P;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(P||(P={}));const Bs={debug:P.DEBUG,verbose:P.VERBOSE,info:P.INFO,warn:P.WARN,error:P.ERROR,silent:P.SILENT},Fs=P.INFO,Us={[P.DEBUG]:"log",[P.VERBOSE]:"log",[P.INFO]:"info",[P.WARN]:"warn",[P.ERROR]:"error"},Hs=(r,e,...s)=>{if(e<r.logLevel)return;const h=new Date().toISOString(),u=Us[e];if(u)console[u](`[${h}]  ${r.name}:`,...s);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Bi{constructor(e){this.name=e,this._logLevel=Fs,this._logHandler=Hs,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in P))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Bs[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,P.DEBUG,...e),this._logHandler(this,P.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,P.VERBOSE,...e),this._logHandler(this,P.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,P.INFO,...e),this._logHandler(this,P.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,P.WARN,...e),this._logHandler(this,P.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,P.ERROR,...e),this._logHandler(this,P.ERROR,...e)}}const $s=(r,e)=>e.some(s=>r instanceof s);let li,ci;function Gs(){return li||(li=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Ws(){return ci||(ci=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Fi=new WeakMap,tn=new WeakMap,Ui=new WeakMap,ze=new WeakMap,sn=new WeakMap;function qs(r){const e=new Promise((s,h)=>{const u=()=>{r.removeEventListener("success",v),r.removeEventListener("error",y)},v=()=>{s(ft(r.result)),u()},y=()=>{h(r.error),u()};r.addEventListener("success",v),r.addEventListener("error",y)});return e.then(s=>{s instanceof IDBCursor&&Fi.set(s,r)}).catch(()=>{}),sn.set(e,r),e}function Xs(r){if(tn.has(r))return;const e=new Promise((s,h)=>{const u=()=>{r.removeEventListener("complete",v),r.removeEventListener("error",y),r.removeEventListener("abort",y)},v=()=>{s(),u()},y=()=>{h(r.error||new DOMException("AbortError","AbortError")),u()};r.addEventListener("complete",v),r.addEventListener("error",y),r.addEventListener("abort",y)});tn.set(r,e)}let en={get(r,e,s){if(r instanceof IDBTransaction){if(e==="done")return tn.get(r);if(e==="objectStoreNames")return r.objectStoreNames||Ui.get(r);if(e==="store")return s.objectStoreNames[1]?void 0:s.objectStore(s.objectStoreNames[0])}return ft(r[e])},set(r,e,s){return r[e]=s,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function zs(r){en=r(en)}function Js(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...s){const h=r.call(Je(this),e,...s);return Ui.set(h,e.sort?e.sort():[e]),ft(h)}:Ws().includes(r)?function(...e){return r.apply(Je(this),e),ft(Fi.get(this))}:function(...e){return ft(r.apply(Je(this),e))}}function Ks(r){return typeof r=="function"?Js(r):(r instanceof IDBTransaction&&Xs(r),$s(r,Gs())?new Proxy(r,en):r)}function ft(r){if(r instanceof IDBRequest)return qs(r);if(ze.has(r))return ze.get(r);const e=Ks(r);return e!==r&&(ze.set(r,e),sn.set(e,r)),e}const Je=r=>sn.get(r);function Ys(r,e,{blocked:s,upgrade:h,blocking:u,terminated:v}={}){const y=indexedDB.open(r,e),E=ft(y);return h&&y.addEventListener("upgradeneeded",A=>{h(ft(y.result),A.oldVersion,A.newVersion,ft(y.transaction),A)}),s&&y.addEventListener("blocked",A=>s(A.oldVersion,A.newVersion,A)),E.then(A=>{v&&A.addEventListener("close",()=>v()),u&&A.addEventListener("versionchange",S=>u(S.oldVersion,S.newVersion,S))}).catch(()=>{}),E}const Qs=["get","getKey","getAll","getAllKeys","count"],Zs=["put","add","delete","clear"],Ke=new Map;function ui(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(Ke.get(e))return Ke.get(e);const s=e.replace(/FromIndex$/,""),h=e!==s,u=Zs.includes(s);if(!(s in(h?IDBIndex:IDBObjectStore).prototype)||!(u||Qs.includes(s)))return;const v=async function(y,...E){const A=this.transaction(y,u?"readwrite":"readonly");let S=A.store;return h&&(S=S.index(E.shift())),(await Promise.all([S[s](...E),u&&A.done]))[0]};return Ke.set(e,v),v}zs(r=>({...r,get:(e,s,h)=>ui(e,s)||r.get(e,s,h),has:(e,s)=>!!ui(e,s)||r.has(e,s)}));class tr{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(s=>{if(er(s)){const h=s.getImmediate();return`${h.library}/${h.version}`}else return null}).filter(s=>s).join(" ")}}function er(r){return r.getComponent()?.type==="VERSION"}const nn="@firebase/app",fi="0.14.6";const it=new Bi("@firebase/app"),nr="@firebase/app-compat",ir="@firebase/analytics-compat",sr="@firebase/analytics",rr="@firebase/app-check-compat",or="@firebase/app-check",hr="@firebase/auth",ar="@firebase/auth-compat",lr="@firebase/database",cr="@firebase/data-connect",ur="@firebase/database-compat",fr="@firebase/functions",gr="@firebase/functions-compat",pr="@firebase/installations",dr="@firebase/installations-compat",mr="@firebase/messaging",yr="@firebase/messaging-compat",_r="@firebase/performance",vr="@firebase/performance-compat",wr="@firebase/remote-config",Er="@firebase/remote-config-compat",Ar="@firebase/storage",Sr="@firebase/storage-compat",Tr="@firebase/firestore",Ir="@firebase/ai",br="@firebase/firestore-compat",Dr="firebase",Cr="12.6.0",Rr={[nn]:"fire-core",[nr]:"fire-core-compat",[sr]:"fire-analytics",[ir]:"fire-analytics-compat",[or]:"fire-app-check",[rr]:"fire-app-check-compat",[hr]:"fire-auth",[ar]:"fire-auth-compat",[lr]:"fire-rtdb",[cr]:"fire-data-connect",[ur]:"fire-rtdb-compat",[fr]:"fire-fn",[gr]:"fire-fn-compat",[pr]:"fire-iid",[dr]:"fire-iid-compat",[mr]:"fire-fcm",[yr]:"fire-fcm-compat",[_r]:"fire-perf",[vr]:"fire-perf-compat",[wr]:"fire-rc",[Er]:"fire-rc-compat",[Ar]:"fire-gcs",[Sr]:"fire-gcs-compat",[Tr]:"fire-fst",[br]:"fire-fst-compat",[Ir]:"fire-vertex","fire-js":"fire-js",[Dr]:"fire-js-all"};const Pr=new Map,Nr=new Map,gi=new Map;function pi(r,e){try{r.container.addComponent(e)}catch(s){it.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,s)}}function ye(r){const e=r.name;if(gi.has(e))return it.debug(`There were multiple attempts to register component ${e}.`),!1;gi.set(e,r);for(const s of Pr.values())pi(s,r);for(const s of Nr.values())pi(s,r);return!0}function Or(r){return r==null?!1:r.settings!==void 0}const Mr={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},rn=new Vi("app","Firebase",Mr);const Lr=Cr;function Jt(r,e,s){let h=Rr[r]??r;s&&(h+=`-${s}`);const u=h.match(/\s|\//),v=e.match(/\s|\//);if(u||v){const y=[`Unable to register library "${h}" with version "${e}":`];u&&y.push(`library name "${h}" contains illegal characters (whitespace or "/")`),u&&v&&y.push("and"),v&&y.push(`version name "${e}" contains illegal characters (whitespace or "/")`),it.warn(y.join(" "));return}ye(new me(`${h}-version`,()=>({library:h,version:e}),"VERSION"))}const kr="firebase-heartbeat-database",jr=1,Zt="firebase-heartbeat-store";let Ye=null;function Hi(){return Ye||(Ye=Ys(kr,jr,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(Zt)}catch(s){console.warn(s)}}}}).catch(r=>{throw rn.create("idb-open",{originalErrorMessage:r.message})})),Ye}async function xr(r){try{const s=(await Hi()).transaction(Zt),h=await s.objectStore(Zt).get($i(r));return await s.done,h}catch(e){if(e instanceof Ot)it.warn(e.message);else{const s=rn.create("idb-get",{originalErrorMessage:e?.message});it.warn(s.message)}}}async function di(r,e){try{const h=(await Hi()).transaction(Zt,"readwrite");await h.objectStore(Zt).put(e,$i(r)),await h.done}catch(s){if(s instanceof Ot)it.warn(s.message);else{const h=rn.create("idb-set",{originalErrorMessage:s?.message});it.warn(h.message)}}}function $i(r){return`${r.name}!${r.options.appId}`}const Vr=1024,Br=30;class Fr{constructor(e){this.container=e,this._heartbeatsCache=null;const s=this.container.getProvider("app").getImmediate();this._storage=new Hr(s),this._heartbeatsCachePromise=this._storage.read().then(h=>(this._heartbeatsCache=h,h))}async triggerHeartbeat(){try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),h=mi();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===h||this._heartbeatsCache.heartbeats.some(u=>u.date===h))return;if(this._heartbeatsCache.heartbeats.push({date:h,agent:s}),this._heartbeatsCache.heartbeats.length>Br){const u=$r(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(u,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){it.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=mi(),{heartbeatsToSend:s,unsentEntries:h}=Ur(this._heartbeatsCache.heartbeats),u=xi(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=e,h.length>0?(this._heartbeatsCache.heartbeats=h,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),u}catch(e){return it.warn(e),""}}}function mi(){return new Date().toISOString().substring(0,10)}function Ur(r,e=Vr){const s=[];let h=r.slice();for(const u of r){const v=s.find(y=>y.agent===u.agent);if(v){if(v.dates.push(u.date),yi(s)>e){v.dates.pop();break}}else if(s.push({agent:u.agent,dates:[u.date]}),yi(s)>e){s.pop();break}h=h.slice(1)}return{heartbeatsToSend:s,unsentEntries:h}}class Hr{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Ls()?ks().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const s=await xr(this.app);return s?.heartbeats?s:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const h=await this.read();return di(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??h.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const h=await this.read();return di(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??h.lastSentHeartbeatDate,heartbeats:[...h.heartbeats,...e.heartbeats]})}else return}}function yi(r){return xi(JSON.stringify({version:2,heartbeats:r})).length}function $r(r){if(r.length===0)return-1;let e=0,s=r[0].date;for(let h=1;h<r.length;h++)r[h].date<s&&(s=r[h].date,e=h);return e}function Gr(r){ye(new me("platform-logger",e=>new tr(e),"PRIVATE")),ye(new me("heartbeat",e=>new Fr(e),"PRIVATE")),Jt(nn,fi,r),Jt(nn,fi,"esm2020"),Jt("fire-js","")}Gr("");var _i=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var on;(function(){var r;function e(g,a){function c(){}c.prototype=a.prototype,g.F=a.prototype,g.prototype=new c,g.prototype.constructor=g,g.D=function(p,f,m){for(var l=Array(arguments.length-2),$=2;$<arguments.length;$++)l[$-2]=arguments[$];return a.prototype[f].apply(p,l)}}function s(){this.blockSize=-1}function h(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(h,s),h.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function u(g,a,c){c||(c=0);const p=Array(16);if(typeof a=="string")for(var f=0;f<16;++f)p[f]=a.charCodeAt(c++)|a.charCodeAt(c++)<<8|a.charCodeAt(c++)<<16|a.charCodeAt(c++)<<24;else for(f=0;f<16;++f)p[f]=a[c++]|a[c++]<<8|a[c++]<<16|a[c++]<<24;a=g.g[0],c=g.g[1],f=g.g[2];let m=g.g[3],l;l=a+(m^c&(f^m))+p[0]+3614090360&4294967295,a=c+(l<<7&4294967295|l>>>25),l=m+(f^a&(c^f))+p[1]+3905402710&4294967295,m=a+(l<<12&4294967295|l>>>20),l=f+(c^m&(a^c))+p[2]+606105819&4294967295,f=m+(l<<17&4294967295|l>>>15),l=c+(a^f&(m^a))+p[3]+3250441966&4294967295,c=f+(l<<22&4294967295|l>>>10),l=a+(m^c&(f^m))+p[4]+4118548399&4294967295,a=c+(l<<7&4294967295|l>>>25),l=m+(f^a&(c^f))+p[5]+1200080426&4294967295,m=a+(l<<12&4294967295|l>>>20),l=f+(c^m&(a^c))+p[6]+2821735955&4294967295,f=m+(l<<17&4294967295|l>>>15),l=c+(a^f&(m^a))+p[7]+4249261313&4294967295,c=f+(l<<22&4294967295|l>>>10),l=a+(m^c&(f^m))+p[8]+1770035416&4294967295,a=c+(l<<7&4294967295|l>>>25),l=m+(f^a&(c^f))+p[9]+2336552879&4294967295,m=a+(l<<12&4294967295|l>>>20),l=f+(c^m&(a^c))+p[10]+4294925233&4294967295,f=m+(l<<17&4294967295|l>>>15),l=c+(a^f&(m^a))+p[11]+2304563134&4294967295,c=f+(l<<22&4294967295|l>>>10),l=a+(m^c&(f^m))+p[12]+1804603682&4294967295,a=c+(l<<7&4294967295|l>>>25),l=m+(f^a&(c^f))+p[13]+4254626195&4294967295,m=a+(l<<12&4294967295|l>>>20),l=f+(c^m&(a^c))+p[14]+2792965006&4294967295,f=m+(l<<17&4294967295|l>>>15),l=c+(a^f&(m^a))+p[15]+1236535329&4294967295,c=f+(l<<22&4294967295|l>>>10),l=a+(f^m&(c^f))+p[1]+4129170786&4294967295,a=c+(l<<5&4294967295|l>>>27),l=m+(c^f&(a^c))+p[6]+3225465664&4294967295,m=a+(l<<9&4294967295|l>>>23),l=f+(a^c&(m^a))+p[11]+643717713&4294967295,f=m+(l<<14&4294967295|l>>>18),l=c+(m^a&(f^m))+p[0]+3921069994&4294967295,c=f+(l<<20&4294967295|l>>>12),l=a+(f^m&(c^f))+p[5]+3593408605&4294967295,a=c+(l<<5&4294967295|l>>>27),l=m+(c^f&(a^c))+p[10]+38016083&4294967295,m=a+(l<<9&4294967295|l>>>23),l=f+(a^c&(m^a))+p[15]+3634488961&4294967295,f=m+(l<<14&4294967295|l>>>18),l=c+(m^a&(f^m))+p[4]+3889429448&4294967295,c=f+(l<<20&4294967295|l>>>12),l=a+(f^m&(c^f))+p[9]+568446438&4294967295,a=c+(l<<5&4294967295|l>>>27),l=m+(c^f&(a^c))+p[14]+3275163606&4294967295,m=a+(l<<9&4294967295|l>>>23),l=f+(a^c&(m^a))+p[3]+4107603335&4294967295,f=m+(l<<14&4294967295|l>>>18),l=c+(m^a&(f^m))+p[8]+1163531501&4294967295,c=f+(l<<20&4294967295|l>>>12),l=a+(f^m&(c^f))+p[13]+2850285829&4294967295,a=c+(l<<5&4294967295|l>>>27),l=m+(c^f&(a^c))+p[2]+4243563512&4294967295,m=a+(l<<9&4294967295|l>>>23),l=f+(a^c&(m^a))+p[7]+1735328473&4294967295,f=m+(l<<14&4294967295|l>>>18),l=c+(m^a&(f^m))+p[12]+2368359562&4294967295,c=f+(l<<20&4294967295|l>>>12),l=a+(c^f^m)+p[5]+4294588738&4294967295,a=c+(l<<4&4294967295|l>>>28),l=m+(a^c^f)+p[8]+2272392833&4294967295,m=a+(l<<11&4294967295|l>>>21),l=f+(m^a^c)+p[11]+1839030562&4294967295,f=m+(l<<16&4294967295|l>>>16),l=c+(f^m^a)+p[14]+4259657740&4294967295,c=f+(l<<23&4294967295|l>>>9),l=a+(c^f^m)+p[1]+2763975236&4294967295,a=c+(l<<4&4294967295|l>>>28),l=m+(a^c^f)+p[4]+1272893353&4294967295,m=a+(l<<11&4294967295|l>>>21),l=f+(m^a^c)+p[7]+4139469664&4294967295,f=m+(l<<16&4294967295|l>>>16),l=c+(f^m^a)+p[10]+3200236656&4294967295,c=f+(l<<23&4294967295|l>>>9),l=a+(c^f^m)+p[13]+681279174&4294967295,a=c+(l<<4&4294967295|l>>>28),l=m+(a^c^f)+p[0]+3936430074&4294967295,m=a+(l<<11&4294967295|l>>>21),l=f+(m^a^c)+p[3]+3572445317&4294967295,f=m+(l<<16&4294967295|l>>>16),l=c+(f^m^a)+p[6]+76029189&4294967295,c=f+(l<<23&4294967295|l>>>9),l=a+(c^f^m)+p[9]+3654602809&4294967295,a=c+(l<<4&4294967295|l>>>28),l=m+(a^c^f)+p[12]+3873151461&4294967295,m=a+(l<<11&4294967295|l>>>21),l=f+(m^a^c)+p[15]+530742520&4294967295,f=m+(l<<16&4294967295|l>>>16),l=c+(f^m^a)+p[2]+3299628645&4294967295,c=f+(l<<23&4294967295|l>>>9),l=a+(f^(c|~m))+p[0]+4096336452&4294967295,a=c+(l<<6&4294967295|l>>>26),l=m+(c^(a|~f))+p[7]+1126891415&4294967295,m=a+(l<<10&4294967295|l>>>22),l=f+(a^(m|~c))+p[14]+2878612391&4294967295,f=m+(l<<15&4294967295|l>>>17),l=c+(m^(f|~a))+p[5]+4237533241&4294967295,c=f+(l<<21&4294967295|l>>>11),l=a+(f^(c|~m))+p[12]+1700485571&4294967295,a=c+(l<<6&4294967295|l>>>26),l=m+(c^(a|~f))+p[3]+2399980690&4294967295,m=a+(l<<10&4294967295|l>>>22),l=f+(a^(m|~c))+p[10]+4293915773&4294967295,f=m+(l<<15&4294967295|l>>>17),l=c+(m^(f|~a))+p[1]+2240044497&4294967295,c=f+(l<<21&4294967295|l>>>11),l=a+(f^(c|~m))+p[8]+1873313359&4294967295,a=c+(l<<6&4294967295|l>>>26),l=m+(c^(a|~f))+p[15]+4264355552&4294967295,m=a+(l<<10&4294967295|l>>>22),l=f+(a^(m|~c))+p[6]+2734768916&4294967295,f=m+(l<<15&4294967295|l>>>17),l=c+(m^(f|~a))+p[13]+1309151649&4294967295,c=f+(l<<21&4294967295|l>>>11),l=a+(f^(c|~m))+p[4]+4149444226&4294967295,a=c+(l<<6&4294967295|l>>>26),l=m+(c^(a|~f))+p[11]+3174756917&4294967295,m=a+(l<<10&4294967295|l>>>22),l=f+(a^(m|~c))+p[2]+718787259&4294967295,f=m+(l<<15&4294967295|l>>>17),l=c+(m^(f|~a))+p[9]+3951481745&4294967295,g.g[0]=g.g[0]+a&4294967295,g.g[1]=g.g[1]+(f+(l<<21&4294967295|l>>>11))&4294967295,g.g[2]=g.g[2]+f&4294967295,g.g[3]=g.g[3]+m&4294967295}h.prototype.v=function(g,a){a===void 0&&(a=g.length);const c=a-this.blockSize,p=this.C;let f=this.h,m=0;for(;m<a;){if(f==0)for(;m<=c;)u(this,g,m),m+=this.blockSize;if(typeof g=="string"){for(;m<a;)if(p[f++]=g.charCodeAt(m++),f==this.blockSize){u(this,p),f=0;break}}else for(;m<a;)if(p[f++]=g[m++],f==this.blockSize){u(this,p),f=0;break}}this.h=f,this.o+=a},h.prototype.A=function(){var g=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);g[0]=128;for(var a=1;a<g.length-8;++a)g[a]=0;a=this.o*8;for(var c=g.length-8;c<g.length;++c)g[c]=a&255,a/=256;for(this.v(g),g=Array(16),a=0,c=0;c<4;++c)for(let p=0;p<32;p+=8)g[a++]=this.g[c]>>>p&255;return g};function v(g,a){var c=E;return Object.prototype.hasOwnProperty.call(c,g)?c[g]:c[g]=a(g)}function y(g,a){this.h=a;const c=[];let p=!0;for(let f=g.length-1;f>=0;f--){const m=g[f]|0;p&&m==a||(c[f]=m,p=!1)}this.g=c}var E={};function A(g){return-128<=g&&g<128?v(g,function(a){return new y([a|0],a<0?-1:0)}):new y([g|0],g<0?-1:0)}function S(g){if(isNaN(g)||!isFinite(g))return C;if(g<0)return L(S(-g));const a=[];let c=1;for(let p=0;g>=c;p++)a[p]=g/c|0,c*=4294967296;return new y(a,0)}function V(g,a){if(g.length==0)throw Error("number format error: empty string");if(a=a||10,a<2||36<a)throw Error("radix out of range: "+a);if(g.charAt(0)=="-")return L(V(g.substring(1),a));if(g.indexOf("-")>=0)throw Error('number format error: interior "-" character');const c=S(Math.pow(a,8));let p=C;for(let m=0;m<g.length;m+=8){var f=Math.min(8,g.length-m);const l=parseInt(g.substring(m,m+f),a);f<8?(f=S(Math.pow(a,f)),p=p.j(f).add(S(l))):(p=p.j(c),p=p.add(S(l)))}return p}var C=A(0),K=A(1),X=A(16777216);r=y.prototype,r.m=function(){if(H(this))return-L(this).m();let g=0,a=1;for(let c=0;c<this.g.length;c++){const p=this.i(c);g+=(p>=0?p:4294967296+p)*a,a*=4294967296}return g},r.toString=function(g){if(g=g||10,g<2||36<g)throw Error("radix out of range: "+g);if(U(this))return"0";if(H(this))return"-"+L(this).toString(g);const a=S(Math.pow(g,6));var c=this;let p="";for(;;){const f=bt(c,a).g;c=Tt(c,f.j(a));let m=((c.g.length>0?c.g[0]:c.h)>>>0).toString(g);if(c=f,U(c))return m+p;for(;m.length<6;)m="0"+m;p=m+p}},r.i=function(g){return g<0?0:g<this.g.length?this.g[g]:this.h};function U(g){if(g.h!=0)return!1;for(let a=0;a<g.g.length;a++)if(g.g[a]!=0)return!1;return!0}function H(g){return g.h==-1}r.l=function(g){return g=Tt(this,g),H(g)?-1:U(g)?0:1};function L(g){const a=g.g.length,c=[];for(let p=0;p<a;p++)c[p]=~g.g[p];return new y(c,~g.h).add(K)}r.abs=function(){return H(this)?L(this):this},r.add=function(g){const a=Math.max(this.g.length,g.g.length),c=[];let p=0;for(let f=0;f<=a;f++){let m=p+(this.i(f)&65535)+(g.i(f)&65535),l=(m>>>16)+(this.i(f)>>>16)+(g.i(f)>>>16);p=l>>>16,m&=65535,l&=65535,c[f]=l<<16|m}return new y(c,c[c.length-1]&-2147483648?-1:0)};function Tt(g,a){return g.add(L(a))}r.j=function(g){if(U(this)||U(g))return C;if(H(this))return H(g)?L(this).j(L(g)):L(L(this).j(g));if(H(g))return L(this.j(L(g)));if(this.l(X)<0&&g.l(X)<0)return S(this.m()*g.m());const a=this.g.length+g.g.length,c=[];for(var p=0;p<2*a;p++)c[p]=0;for(p=0;p<this.g.length;p++)for(let f=0;f<g.g.length;f++){const m=this.i(p)>>>16,l=this.i(p)&65535,$=g.i(f)>>>16,pt=g.i(f)&65535;c[2*p+2*f]+=l*pt,It(c,2*p+2*f),c[2*p+2*f+1]+=m*pt,It(c,2*p+2*f+1),c[2*p+2*f+1]+=l*$,It(c,2*p+2*f+1),c[2*p+2*f+2]+=m*$,It(c,2*p+2*f+2)}for(g=0;g<a;g++)c[g]=c[2*g+1]<<16|c[2*g];for(g=a;g<2*a;g++)c[g]=0;return new y(c,0)};function It(g,a){for(;(g[a]&65535)!=g[a];)g[a+1]+=g[a]>>>16,g[a]&=65535,a++}function st(g,a){this.g=g,this.h=a}function bt(g,a){if(U(a))throw Error("division by zero");if(U(g))return new st(C,C);if(H(g))return a=bt(L(g),a),new st(L(a.g),L(a.h));if(H(a))return a=bt(g,L(a)),new st(L(a.g),a.h);if(g.g.length>30){if(H(g)||H(a))throw Error("slowDivide_ only works with positive integers.");for(var c=K,p=a;p.l(g)<=0;)c=rt(c),p=rt(p);var f=W(c,1),m=W(p,1);for(p=W(p,2),c=W(c,2);!U(p);){var l=m.add(p);l.l(g)<=0&&(f=f.add(c),m=l),p=W(p,1),c=W(c,1)}return a=Tt(g,f.j(a)),new st(f,a)}for(f=C;g.l(a)>=0;){for(c=Math.max(1,Math.floor(g.m()/a.m())),p=Math.ceil(Math.log(c)/Math.LN2),p=p<=48?1:Math.pow(2,p-48),m=S(c),l=m.j(a);H(l)||l.l(g)>0;)c-=p,m=S(c),l=m.j(a);U(m)&&(m=K),f=f.add(m),g=Tt(g,l)}return new st(f,g)}r.B=function(g){return bt(this,g).h},r.and=function(g){const a=Math.max(this.g.length,g.g.length),c=[];for(let p=0;p<a;p++)c[p]=this.i(p)&g.i(p);return new y(c,this.h&g.h)},r.or=function(g){const a=Math.max(this.g.length,g.g.length),c=[];for(let p=0;p<a;p++)c[p]=this.i(p)|g.i(p);return new y(c,this.h|g.h)},r.xor=function(g){const a=Math.max(this.g.length,g.g.length),c=[];for(let p=0;p<a;p++)c[p]=this.i(p)^g.i(p);return new y(c,this.h^g.h)};function rt(g){const a=g.g.length+1,c=[];for(let p=0;p<a;p++)c[p]=g.i(p)<<1|g.i(p-1)>>>31;return new y(c,g.h)}function W(g,a){const c=a>>5;a%=32;const p=g.g.length-c,f=[];for(let m=0;m<p;m++)f[m]=a>0?g.i(m+c)>>>a|g.i(m+c+1)<<32-a:g.i(m+c);return new y(f,g.h)}h.prototype.digest=h.prototype.A,h.prototype.reset=h.prototype.u,h.prototype.update=h.prototype.v,y.prototype.add=y.prototype.add,y.prototype.multiply=y.prototype.j,y.prototype.modulo=y.prototype.B,y.prototype.compare=y.prototype.l,y.prototype.toNumber=y.prototype.m,y.prototype.toString=y.prototype.toString,y.prototype.getBits=y.prototype.i,y.fromNumber=S,y.fromString=V,on=y}).apply(typeof _i<"u"?_i:typeof self<"u"?self:typeof window<"u"?window:{});var ge=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};(function(){var r,e=Object.defineProperty;function s(t){t=[typeof globalThis=="object"&&globalThis,t,typeof window=="object"&&window,typeof self=="object"&&self,typeof ge=="object"&&ge];for(var n=0;n<t.length;++n){var i=t[n];if(i&&i.Math==Math)return i}throw Error("Cannot find global object")}var h=s(this);function u(t,n){if(n)t:{var i=h;t=t.split(".");for(var o=0;o<t.length-1;o++){var d=t[o];if(!(d in i))break t;i=i[d]}t=t[t.length-1],o=i[t],n=n(o),n!=o&&n!=null&&e(i,t,{configurable:!0,writable:!0,value:n})}}u("Symbol.dispose",function(t){return t||Symbol("Symbol.dispose")}),u("Array.prototype.values",function(t){return t||function(){return this[Symbol.iterator]()}}),u("Object.entries",function(t){return t||function(n){var i=[],o;for(o in n)Object.prototype.hasOwnProperty.call(n,o)&&i.push([o,n[o]]);return i}});var v=v||{},y=this||self;function E(t){var n=typeof t;return n=="object"&&t!=null||n=="function"}function A(t,n,i){return t.call.apply(t.bind,arguments)}function S(t,n,i){return S=A,S.apply(null,arguments)}function V(t,n){var i=Array.prototype.slice.call(arguments,1);return function(){var o=i.slice();return o.push.apply(o,arguments),t.apply(this,o)}}function C(t,n){function i(){}i.prototype=n.prototype,t.Z=n.prototype,t.prototype=new i,t.prototype.constructor=t,t.Ob=function(o,d,_){for(var w=Array(arguments.length-2),T=2;T<arguments.length;T++)w[T-2]=arguments[T];return n.prototype[d].apply(o,w)}}var K=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?t=>t&&AsyncContext.Snapshot.wrap(t):t=>t;function X(t){const n=t.length;if(n>0){const i=Array(n);for(let o=0;o<n;o++)i[o]=t[o];return i}return[]}function U(t,n){for(let o=1;o<arguments.length;o++){const d=arguments[o];var i=typeof d;if(i=i!="object"?i:d?Array.isArray(d)?"array":i:"null",i=="array"||i=="object"&&typeof d.length=="number"){i=t.length||0;const _=d.length||0;t.length=i+_;for(let w=0;w<_;w++)t[i+w]=d[w]}else t.push(d)}}class H{constructor(n,i){this.i=n,this.j=i,this.h=0,this.g=null}get(){let n;return this.h>0?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}function L(t){y.setTimeout(()=>{throw t},0)}function Tt(){var t=g;let n=null;return t.g&&(n=t.g,t.g=t.g.next,t.g||(t.h=null),n.next=null),n}class It{constructor(){this.h=this.g=null}add(n,i){const o=st.get();o.set(n,i),this.h?this.h.next=o:this.g=o,this.h=o}}var st=new H(()=>new bt,t=>t.reset());class bt{constructor(){this.next=this.g=this.h=null}set(n,i){this.h=n,this.g=i,this.next=null}reset(){this.next=this.g=this.h=null}}let rt,W=!1,g=new It,a=()=>{const t=Promise.resolve(void 0);rt=()=>{t.then(c)}};function c(){for(var t;t=Tt();){try{t.h.call(t.g)}catch(i){L(i)}var n=st;n.j(t),n.h<100&&(n.h++,t.next=n.g,n.g=t)}W=!1}function p(){this.u=this.u,this.C=this.C}p.prototype.u=!1,p.prototype.dispose=function(){this.u||(this.u=!0,this.N())},p.prototype[Symbol.dispose]=function(){this.dispose()},p.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function f(t,n){this.type=t,this.g=this.target=n,this.defaultPrevented=!1}f.prototype.h=function(){this.defaultPrevented=!0};var m=(function(){if(!y.addEventListener||!Object.defineProperty)return!1;var t=!1,n=Object.defineProperty({},"passive",{get:function(){t=!0}});try{const i=()=>{};y.addEventListener("test",i,n),y.removeEventListener("test",i,n)}catch{}return t})();function l(t){return/^[\s\xa0]*$/.test(t)}function $(t,n){f.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t&&this.init(t,n)}C($,f),$.prototype.init=function(t,n){const i=this.type=t.type,o=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;this.target=t.target||t.srcElement,this.g=n,n=t.relatedTarget,n||(i=="mouseover"?n=t.fromElement:i=="mouseout"&&(n=t.toElement)),this.relatedTarget=n,o?(this.clientX=o.clientX!==void 0?o.clientX:o.pageX,this.clientY=o.clientY!==void 0?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=t.pointerType,this.state=t.state,this.i=t,t.defaultPrevented&&$.Z.h.call(this)},$.prototype.h=function(){$.Z.h.call(this);const t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var pt="closure_listenable_"+(Math.random()*1e6|0),Ki=0;function Yi(t,n,i,o,d){this.listener=t,this.proxy=null,this.src=n,this.type=i,this.capture=!!o,this.ha=d,this.key=++Ki,this.da=this.fa=!1}function ee(t){t.da=!0,t.listener=null,t.proxy=null,t.src=null,t.ha=null}function ne(t,n,i){for(const o in t)n.call(i,t[o],o,t)}function Qi(t,n){for(const i in t)n.call(void 0,t[i],i,t)}function cn(t){const n={};for(const i in t)n[i]=t[i];return n}const un="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function fn(t,n){let i,o;for(let d=1;d<arguments.length;d++){o=arguments[d];for(i in o)t[i]=o[i];for(let _=0;_<un.length;_++)i=un[_],Object.prototype.hasOwnProperty.call(o,i)&&(t[i]=o[i])}}function ie(t){this.src=t,this.g={},this.h=0}ie.prototype.add=function(t,n,i,o,d){const _=t.toString();t=this.g[_],t||(t=this.g[_]=[],this.h++);const w=Se(t,n,o,d);return w>-1?(n=t[w],i||(n.fa=!1)):(n=new Yi(n,this.src,_,!!o,d),n.fa=i,t.push(n)),n};function Ae(t,n){const i=n.type;if(i in t.g){var o=t.g[i],d=Array.prototype.indexOf.call(o,n,void 0),_;(_=d>=0)&&Array.prototype.splice.call(o,d,1),_&&(ee(n),t.g[i].length==0&&(delete t.g[i],t.h--))}}function Se(t,n,i,o){for(let d=0;d<t.length;++d){const _=t[d];if(!_.da&&_.listener==n&&_.capture==!!i&&_.ha==o)return d}return-1}var Te="closure_lm_"+(Math.random()*1e6|0),Ie={};function gn(t,n,i,o,d){if(Array.isArray(n)){for(let _=0;_<n.length;_++)gn(t,n[_],i,o,d);return null}return i=mn(i),t&&t[pt]?t.J(n,i,E(o)?!!o.capture:!1,d):Zi(t,n,i,!1,o,d)}function Zi(t,n,i,o,d,_){if(!n)throw Error("Invalid event type");const w=E(d)?!!d.capture:!!d;let T=De(t);if(T||(t[Te]=T=new ie(t)),i=T.add(n,i,o,w,_),i.proxy)return i;if(o=ts(),i.proxy=o,o.src=t,o.listener=i,t.addEventListener)m||(d=w),d===void 0&&(d=!1),t.addEventListener(n.toString(),o,d);else if(t.attachEvent)t.attachEvent(dn(n.toString()),o);else if(t.addListener&&t.removeListener)t.addListener(o);else throw Error("addEventListener and attachEvent are unavailable.");return i}function ts(){function t(i){return n.call(t.src,t.listener,i)}const n=es;return t}function pn(t,n,i,o,d){if(Array.isArray(n))for(var _=0;_<n.length;_++)pn(t,n[_],i,o,d);else o=E(o)?!!o.capture:!!o,i=mn(i),t&&t[pt]?(t=t.i,_=String(n).toString(),_ in t.g&&(n=t.g[_],i=Se(n,i,o,d),i>-1&&(ee(n[i]),Array.prototype.splice.call(n,i,1),n.length==0&&(delete t.g[_],t.h--)))):t&&(t=De(t))&&(n=t.g[n.toString()],t=-1,n&&(t=Se(n,i,o,d)),(i=t>-1?n[t]:null)&&be(i))}function be(t){if(typeof t!="number"&&t&&!t.da){var n=t.src;if(n&&n[pt])Ae(n.i,t);else{var i=t.type,o=t.proxy;n.removeEventListener?n.removeEventListener(i,o,t.capture):n.detachEvent?n.detachEvent(dn(i),o):n.addListener&&n.removeListener&&n.removeListener(o),(i=De(n))?(Ae(i,t),i.h==0&&(i.src=null,n[Te]=null)):ee(t)}}}function dn(t){return t in Ie?Ie[t]:Ie[t]="on"+t}function es(t,n){if(t.da)t=!0;else{n=new $(n,this);const i=t.listener,o=t.ha||t.src;t.fa&&be(t),t=i.call(o,n)}return t}function De(t){return t=t[Te],t instanceof ie?t:null}var Ce="__closure_events_fn_"+(Math.random()*1e9>>>0);function mn(t){return typeof t=="function"?t:(t[Ce]||(t[Ce]=function(n){return t.handleEvent(n)}),t[Ce])}function x(){p.call(this),this.i=new ie(this),this.M=this,this.G=null}C(x,p),x.prototype[pt]=!0,x.prototype.removeEventListener=function(t,n,i,o){pn(this,t,n,i,o)};function B(t,n){var i,o=t.G;if(o)for(i=[];o;o=o.G)i.push(o);if(t=t.M,o=n.type||n,typeof n=="string")n=new f(n,t);else if(n instanceof f)n.target=n.target||t;else{var d=n;n=new f(o,t),fn(n,d)}d=!0;let _,w;if(i)for(w=i.length-1;w>=0;w--)_=n.g=i[w],d=se(_,o,!0,n)&&d;if(_=n.g=t,d=se(_,o,!0,n)&&d,d=se(_,o,!1,n)&&d,i)for(w=0;w<i.length;w++)_=n.g=i[w],d=se(_,o,!1,n)&&d}x.prototype.N=function(){if(x.Z.N.call(this),this.i){var t=this.i;for(const n in t.g){const i=t.g[n];for(let o=0;o<i.length;o++)ee(i[o]);delete t.g[n],t.h--}}this.G=null},x.prototype.J=function(t,n,i,o){return this.i.add(String(t),n,!1,i,o)},x.prototype.K=function(t,n,i,o){return this.i.add(String(t),n,!0,i,o)};function se(t,n,i,o){if(n=t.i.g[String(n)],!n)return!0;n=n.concat();let d=!0;for(let _=0;_<n.length;++_){const w=n[_];if(w&&!w.da&&w.capture==i){const T=w.listener,k=w.ha||w.src;w.fa&&Ae(t.i,w),d=T.call(k,o)!==!1&&d}}return d&&!o.defaultPrevented}function ns(t,n){if(typeof t!="function")if(t&&typeof t.handleEvent=="function")t=S(t.handleEvent,t);else throw Error("Invalid listener argument");return Number(n)>2147483647?-1:y.setTimeout(t,n||0)}function yn(t){t.g=ns(()=>{t.g=null,t.i&&(t.i=!1,yn(t))},t.l);const n=t.h;t.h=null,t.m.apply(null,n)}class is extends p{constructor(n,i){super(),this.m=n,this.l=i,this.h=null,this.i=!1,this.g=null}j(n){this.h=arguments,this.g?this.i=!0:yn(this)}N(){super.N(),this.g&&(y.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Mt(t){p.call(this),this.h=t,this.g={}}C(Mt,p);var _n=[];function vn(t){ne(t.g,function(n,i){this.g.hasOwnProperty(i)&&be(n)},t),t.g={}}Mt.prototype.N=function(){Mt.Z.N.call(this),vn(this)},Mt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Re=y.JSON.stringify,ss=y.JSON.parse,rs=class{stringify(t){return y.JSON.stringify(t,void 0)}parse(t){return y.JSON.parse(t,void 0)}};function wn(){}function os(){}var Lt={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Pe(){f.call(this,"d")}C(Pe,f);function Ne(){f.call(this,"c")}C(Ne,f);var Dt={},En=null;function Oe(){return En=En||new x}Dt.Ia="serverreachability";function An(t){f.call(this,Dt.Ia,t)}C(An,f);function kt(t){const n=Oe();B(n,new An(n))}Dt.STAT_EVENT="statevent";function Sn(t,n){f.call(this,Dt.STAT_EVENT,t),this.stat=n}C(Sn,f);function F(t){const n=Oe();B(n,new Sn(n,t))}Dt.Ja="timingevent";function Tn(t,n){f.call(this,Dt.Ja,t),this.size=n}C(Tn,f);function jt(t,n){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return y.setTimeout(function(){t()},n)}function xt(){this.g=!0}xt.prototype.ua=function(){this.g=!1};function hs(t,n,i,o,d,_){t.info(function(){if(t.g)if(_){var w="",T=_.split("&");for(let R=0;R<T.length;R++){var k=T[R].split("=");if(k.length>1){const j=k[0];k=k[1];const Q=j.split("_");w=Q.length>=2&&Q[1]=="type"?w+(j+"="+k+"&"):w+(j+"=redacted&")}}}else w=null;else w=_;return"XMLHTTP REQ ("+o+") [attempt "+d+"]: "+n+`
`+i+`
`+w})}function as(t,n,i,o,d,_,w){t.info(function(){return"XMLHTTP RESP ("+o+") [ attempt "+d+"]: "+n+`
`+i+`
`+_+" "+w})}function Ct(t,n,i,o){t.info(function(){return"XMLHTTP TEXT ("+n+"): "+cs(t,i)+(o?" "+o:"")})}function ls(t,n){t.info(function(){return"TIMEOUT: "+n})}xt.prototype.info=function(){};function cs(t,n){if(!t.g)return n;if(!n)return null;try{const _=JSON.parse(n);if(_){for(t=0;t<_.length;t++)if(Array.isArray(_[t])){var i=_[t];if(!(i.length<2)){var o=i[1];if(Array.isArray(o)&&!(o.length<1)){var d=o[0];if(d!="noop"&&d!="stop"&&d!="close")for(let w=1;w<o.length;w++)o[w]=""}}}}return Re(_)}catch{return n}}var Me={NO_ERROR:0,TIMEOUT:8},us={},In;function Le(){}C(Le,wn),Le.prototype.g=function(){return new XMLHttpRequest},In=new Le;function Vt(t){return encodeURIComponent(String(t))}function fs(t){var n=1;t=t.split(":");const i=[];for(;n>0&&t.length;)i.push(t.shift()),n--;return t.length&&i.push(t.join(":")),i}function ot(t,n,i,o){this.j=t,this.i=n,this.l=i,this.S=o||1,this.V=new Mt(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new bn}function bn(){this.i=null,this.g="",this.h=!1}var Dn={},ke={};function je(t,n,i){t.M=1,t.A=oe(Y(n)),t.u=i,t.R=!0,Cn(t,null)}function Cn(t,n){t.F=Date.now(),re(t),t.B=Y(t.A);var i=t.B,o=t.S;Array.isArray(o)||(o=[String(o)]),Un(i.i,"t",o),t.C=0,i=t.j.L,t.h=new bn,t.g=ri(t.j,i?n:null,!t.u),t.P>0&&(t.O=new is(S(t.Y,t,t.g),t.P)),n=t.V,i=t.g,o=t.ba;var d="readystatechange";Array.isArray(d)||(d&&(_n[0]=d.toString()),d=_n);for(let _=0;_<d.length;_++){const w=gn(i,d[_],o||n.handleEvent,!1,n.h||n);if(!w)break;n.g[w.key]=w}n=t.J?cn(t.J):{},t.u?(t.v||(t.v="POST"),n["Content-Type"]="application/x-www-form-urlencoded",t.g.ea(t.B,t.v,t.u,n)):(t.v="GET",t.g.ea(t.B,t.v,null,n)),kt(),hs(t.i,t.v,t.B,t.l,t.S,t.u)}ot.prototype.ba=function(t){t=t.target;const n=this.O;n&&lt(t)==3?n.j():this.Y(t)},ot.prototype.Y=function(t){try{if(t==this.g)t:{const T=lt(this.g),k=this.g.ya(),R=this.g.ca();if(!(T<3)&&(T!=3||this.g&&(this.h.h||this.g.la()||zn(this.g)))){this.K||T!=4||k==7||(k==8||R<=0?kt(3):kt(2)),xe(this);var n=this.g.ca();this.X=n;var i=gs(this);if(this.o=n==200,as(this.i,this.v,this.B,this.l,this.S,T,n),this.o){if(this.U&&!this.L){e:{if(this.g){var o,d=this.g;if((o=d.g?d.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!l(o)){var _=o;break e}}_=null}if(t=_)Ct(this.i,this.l,t,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ve(this,t);else{this.o=!1,this.m=3,F(12),dt(this),Bt(this);break t}}if(this.R){t=!0;let j;for(;!this.K&&this.C<i.length;)if(j=ps(this,i),j==ke){T==4&&(this.m=4,F(14),t=!1),Ct(this.i,this.l,null,"[Incomplete Response]");break}else if(j==Dn){this.m=4,F(15),Ct(this.i,this.l,i,"[Invalid Chunk]"),t=!1;break}else Ct(this.i,this.l,j,null),Ve(this,j);if(Rn(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),T!=4||i.length!=0||this.h.h||(this.m=1,F(16),t=!1),this.o=this.o&&t,!t)Ct(this.i,this.l,i,"[Invalid Chunked Response]"),dt(this),Bt(this);else if(i.length>0&&!this.W){this.W=!0;var w=this.j;w.g==this&&w.aa&&!w.P&&(w.j.info("Great, no buffering proxy detected. Bytes received: "+i.length),qe(w),w.P=!0,F(11))}}else Ct(this.i,this.l,i,null),Ve(this,i);T==4&&dt(this),this.o&&!this.K&&(T==4?ei(this.j,this):(this.o=!1,re(this)))}else Cs(this.g),n==400&&i.indexOf("Unknown SID")>0?(this.m=3,F(12)):(this.m=0,F(13)),dt(this),Bt(this)}}}catch{}finally{}};function gs(t){if(!Rn(t))return t.g.la();const n=zn(t.g);if(n==="")return"";let i="";const o=n.length,d=lt(t.g)==4;if(!t.h.i){if(typeof TextDecoder>"u")return dt(t),Bt(t),"";t.h.i=new y.TextDecoder}for(let _=0;_<o;_++)t.h.h=!0,i+=t.h.i.decode(n[_],{stream:!(d&&_==o-1)});return n.length=0,t.h.g+=i,t.C=0,t.h.g}function Rn(t){return t.g?t.v=="GET"&&t.M!=2&&t.j.Aa:!1}function ps(t,n){var i=t.C,o=n.indexOf(`
`,i);return o==-1?ke:(i=Number(n.substring(i,o)),isNaN(i)?Dn:(o+=1,o+i>n.length?ke:(n=n.slice(o,o+i),t.C=o+i,n)))}ot.prototype.cancel=function(){this.K=!0,dt(this)};function re(t){t.T=Date.now()+t.H,Pn(t,t.H)}function Pn(t,n){if(t.D!=null)throw Error("WatchDog timer not null");t.D=jt(S(t.aa,t),n)}function xe(t){t.D&&(y.clearTimeout(t.D),t.D=null)}ot.prototype.aa=function(){this.D=null;const t=Date.now();t-this.T>=0?(ls(this.i,this.B),this.M!=2&&(kt(),F(17)),dt(this),this.m=2,Bt(this)):Pn(this,this.T-t)};function Bt(t){t.j.I==0||t.K||ei(t.j,t)}function dt(t){xe(t);var n=t.O;n&&typeof n.dispose=="function"&&n.dispose(),t.O=null,vn(t.V),t.g&&(n=t.g,t.g=null,n.abort(),n.dispose())}function Ve(t,n){try{var i=t.j;if(i.I!=0&&(i.g==t||Be(i.h,t))){if(!t.L&&Be(i.h,t)&&i.I==3){try{var o=i.Ba.g.parse(n)}catch{o=null}if(Array.isArray(o)&&o.length==3){var d=o;if(d[0]==0){t:if(!i.v){if(i.g)if(i.g.F+3e3<t.F)ue(i),le(i);else break t;We(i),F(18)}}else i.xa=d[1],0<i.xa-i.K&&d[2]<37500&&i.F&&i.A==0&&!i.C&&(i.C=jt(S(i.Va,i),6e3));Mn(i.h)<=1&&i.ta&&(i.ta=void 0)}else yt(i,11)}else if((t.L||i.g==t)&&ue(i),!l(n))for(d=i.Ba.g.parse(n),n=0;n<d.length;n++){let R=d[n];const j=R[0];if(!(j<=i.K))if(i.K=j,R=R[1],i.I==2)if(R[0]=="c"){i.M=R[1],i.ba=R[2];const Q=R[3];Q!=null&&(i.ka=Q,i.j.info("VER="+i.ka));const _t=R[4];_t!=null&&(i.za=_t,i.j.info("SVER="+i.za));const ct=R[5];ct!=null&&typeof ct=="number"&&ct>0&&(o=1.5*ct,i.O=o,i.j.info("backChannelRequestTimeoutMs_="+o)),o=i;const ut=t.g;if(ut){const fe=ut.g?ut.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(fe){var _=o.h;_.g||fe.indexOf("spdy")==-1&&fe.indexOf("quic")==-1&&fe.indexOf("h2")==-1||(_.j=_.l,_.g=new Set,_.h&&(Fe(_,_.h),_.h=null))}if(o.G){const Xe=ut.g?ut.g.getResponseHeader("X-HTTP-Session-Id"):null;Xe&&(o.wa=Xe,N(o.J,o.G,Xe))}}i.I=3,i.l&&i.l.ra(),i.aa&&(i.T=Date.now()-t.F,i.j.info("Handshake RTT: "+i.T+"ms")),o=i;var w=t;if(o.na=si(o,o.L?o.ba:null,o.W),w.L){Ln(o.h,w);var T=w,k=o.O;k&&(T.H=k),T.D&&(xe(T),re(T)),o.g=w}else Zn(o);i.i.length>0&&ce(i)}else R[0]!="stop"&&R[0]!="close"||yt(i,7);else i.I==3&&(R[0]=="stop"||R[0]=="close"?R[0]=="stop"?yt(i,7):Ge(i):R[0]!="noop"&&i.l&&i.l.qa(R),i.A=0)}}kt(4)}catch{}}var ds=class{constructor(t,n){this.g=t,this.map=n}};function Nn(t){this.l=t||10,y.PerformanceNavigationTiming?(t=y.performance.getEntriesByType("navigation"),t=t.length>0&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(y.chrome&&y.chrome.loadTimes&&y.chrome.loadTimes()&&y.chrome.loadTimes().wasFetchedViaSpdy),this.j=t?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function On(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function Mn(t){return t.h?1:t.g?t.g.size:0}function Be(t,n){return t.h?t.h==n:t.g?t.g.has(n):!1}function Fe(t,n){t.g?t.g.add(n):t.h=n}function Ln(t,n){t.h&&t.h==n?t.h=null:t.g&&t.g.has(n)&&t.g.delete(n)}Nn.prototype.cancel=function(){if(this.i=kn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function kn(t){if(t.h!=null)return t.i.concat(t.h.G);if(t.g!=null&&t.g.size!==0){let n=t.i;for(const i of t.g.values())n=n.concat(i.G);return n}return X(t.i)}var jn=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ms(t,n){if(t){t=t.split("&");for(let i=0;i<t.length;i++){const o=t[i].indexOf("=");let d,_=null;o>=0?(d=t[i].substring(0,o),_=t[i].substring(o+1)):d=t[i],n(d,_?decodeURIComponent(_.replace(/\+/g," ")):"")}}}function ht(t){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let n;t instanceof ht?(this.l=t.l,Ft(this,t.j),this.o=t.o,this.g=t.g,Ut(this,t.u),this.h=t.h,Ue(this,Hn(t.i)),this.m=t.m):t&&(n=String(t).match(jn))?(this.l=!1,Ft(this,n[1]||"",!0),this.o=Ht(n[2]||""),this.g=Ht(n[3]||"",!0),Ut(this,n[4]),this.h=Ht(n[5]||"",!0),Ue(this,n[6]||"",!0),this.m=Ht(n[7]||"")):(this.l=!1,this.i=new Gt(null,this.l))}ht.prototype.toString=function(){const t=[];var n=this.j;n&&t.push($t(n,xn,!0),":");var i=this.g;return(i||n=="file")&&(t.push("//"),(n=this.o)&&t.push($t(n,xn,!0),"@"),t.push(Vt(i).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),i=this.u,i!=null&&t.push(":",String(i))),(i=this.h)&&(this.g&&i.charAt(0)!="/"&&t.push("/"),t.push($t(i,i.charAt(0)=="/"?vs:_s,!0))),(i=this.i.toString())&&t.push("?",i),(i=this.m)&&t.push("#",$t(i,Es)),t.join("")},ht.prototype.resolve=function(t){const n=Y(this);let i=!!t.j;i?Ft(n,t.j):i=!!t.o,i?n.o=t.o:i=!!t.g,i?n.g=t.g:i=t.u!=null;var o=t.h;if(i)Ut(n,t.u);else if(i=!!t.h){if(o.charAt(0)!="/")if(this.g&&!this.h)o="/"+o;else{var d=n.h.lastIndexOf("/");d!=-1&&(o=n.h.slice(0,d+1)+o)}if(d=o,d==".."||d==".")o="";else if(d.indexOf("./")!=-1||d.indexOf("/.")!=-1){o=d.lastIndexOf("/",0)==0,d=d.split("/");const _=[];for(let w=0;w<d.length;){const T=d[w++];T=="."?o&&w==d.length&&_.push(""):T==".."?((_.length>1||_.length==1&&_[0]!="")&&_.pop(),o&&w==d.length&&_.push("")):(_.push(T),o=!0)}o=_.join("/")}else o=d}return i?n.h=o:i=t.i.toString()!=="",i?Ue(n,Hn(t.i)):i=!!t.m,i&&(n.m=t.m),n};function Y(t){return new ht(t)}function Ft(t,n,i){t.j=i?Ht(n,!0):n,t.j&&(t.j=t.j.replace(/:$/,""))}function Ut(t,n){if(n){if(n=Number(n),isNaN(n)||n<0)throw Error("Bad port number "+n);t.u=n}else t.u=null}function Ue(t,n,i){n instanceof Gt?(t.i=n,As(t.i,t.l)):(i||(n=$t(n,ws)),t.i=new Gt(n,t.l))}function N(t,n,i){t.i.set(n,i)}function oe(t){return N(t,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),t}function Ht(t,n){return t?n?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function $t(t,n,i){return typeof t=="string"?(t=encodeURI(t).replace(n,ys),i&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function ys(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var xn=/[#\/\?@]/g,_s=/[#\?:]/g,vs=/[#\?]/g,ws=/[#\?@]/g,Es=/#/g;function Gt(t,n){this.h=this.g=null,this.i=t||null,this.j=!!n}function mt(t){t.g||(t.g=new Map,t.h=0,t.i&&ms(t.i,function(n,i){t.add(decodeURIComponent(n.replace(/\+/g," ")),i)}))}r=Gt.prototype,r.add=function(t,n){mt(this),this.i=null,t=Rt(this,t);let i=this.g.get(t);return i||this.g.set(t,i=[]),i.push(n),this.h+=1,this};function Vn(t,n){mt(t),n=Rt(t,n),t.g.has(n)&&(t.i=null,t.h-=t.g.get(n).length,t.g.delete(n))}function Bn(t,n){return mt(t),n=Rt(t,n),t.g.has(n)}r.forEach=function(t,n){mt(this),this.g.forEach(function(i,o){i.forEach(function(d){t.call(n,d,o,this)},this)},this)};function Fn(t,n){mt(t);let i=[];if(typeof n=="string")Bn(t,n)&&(i=i.concat(t.g.get(Rt(t,n))));else for(t=Array.from(t.g.values()),n=0;n<t.length;n++)i=i.concat(t[n]);return i}r.set=function(t,n){return mt(this),this.i=null,t=Rt(this,t),Bn(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[n]),this.h+=1,this},r.get=function(t,n){return t?(t=Fn(this,t),t.length>0?String(t[0]):n):n};function Un(t,n,i){Vn(t,n),i.length>0&&(t.i=null,t.g.set(Rt(t,n),X(i)),t.h+=i.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],n=Array.from(this.g.keys());for(let o=0;o<n.length;o++){var i=n[o];const d=Vt(i);i=Fn(this,i);for(let _=0;_<i.length;_++){let w=d;i[_]!==""&&(w+="="+Vt(i[_])),t.push(w)}}return this.i=t.join("&")};function Hn(t){const n=new Gt;return n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),n}function Rt(t,n){return n=String(n),t.j&&(n=n.toLowerCase()),n}function As(t,n){n&&!t.j&&(mt(t),t.i=null,t.g.forEach(function(i,o){const d=o.toLowerCase();o!=d&&(Vn(this,o),Un(this,d,i))},t)),t.j=n}function Ss(t,n){const i=new xt;if(y.Image){const o=new Image;o.onload=V(at,i,"TestLoadImage: loaded",!0,n,o),o.onerror=V(at,i,"TestLoadImage: error",!1,n,o),o.onabort=V(at,i,"TestLoadImage: abort",!1,n,o),o.ontimeout=V(at,i,"TestLoadImage: timeout",!1,n,o),y.setTimeout(function(){o.ontimeout&&o.ontimeout()},1e4),o.src=t}else n(!1)}function Ts(t,n){const i=new xt,o=new AbortController,d=setTimeout(()=>{o.abort(),at(i,"TestPingServer: timeout",!1,n)},1e4);fetch(t,{signal:o.signal}).then(_=>{clearTimeout(d),_.ok?at(i,"TestPingServer: ok",!0,n):at(i,"TestPingServer: server error",!1,n)}).catch(()=>{clearTimeout(d),at(i,"TestPingServer: error",!1,n)})}function at(t,n,i,o,d){try{d&&(d.onload=null,d.onerror=null,d.onabort=null,d.ontimeout=null),o(i)}catch{}}function Is(){this.g=new rs}function He(t){this.i=t.Sb||null,this.h=t.ab||!1}C(He,wn),He.prototype.g=function(){return new he(this.i,this.h)};function he(t,n){x.call(this),this.H=t,this.o=n,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}C(he,x),r=he.prototype,r.open=function(t,n){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=t,this.D=n,this.readyState=1,qt(this)},r.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const n={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};t&&(n.body=t),(this.H||y).fetch(new Request(this.D,n)).then(this.Pa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Wt(this)),this.readyState=0},r.Pa=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,qt(this)),this.g&&(this.readyState=3,qt(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof y.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;$n(this)}else t.text().then(this.Oa.bind(this),this.ga.bind(this))};function $n(t){t.j.read().then(t.Ma.bind(t)).catch(t.ga.bind(t))}r.Ma=function(t){if(this.g){if(this.o&&t.value)this.response.push(t.value);else if(!this.o){var n=t.value?t.value:new Uint8Array(0);(n=this.B.decode(n,{stream:!t.done}))&&(this.response=this.responseText+=n)}t.done?Wt(this):qt(this),this.readyState==3&&$n(this)}},r.Oa=function(t){this.g&&(this.response=this.responseText=t,Wt(this))},r.Na=function(t){this.g&&(this.response=t,Wt(this))},r.ga=function(){this.g&&Wt(this)};function Wt(t){t.readyState=4,t.l=null,t.j=null,t.B=null,qt(t)}r.setRequestHeader=function(t,n){this.A.append(t,n)},r.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],n=this.h.entries();for(var i=n.next();!i.done;)i=i.value,t.push(i[0]+": "+i[1]),i=n.next();return t.join(`\r
`)};function qt(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(he.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});function Gn(t){let n="";return ne(t,function(i,o){n+=o,n+=":",n+=i,n+=`\r
`}),n}function $e(t,n,i){t:{for(o in i){var o=!1;break t}o=!0}o||(i=Gn(i),typeof t=="string"?i!=null&&Vt(i):N(t,n,i))}function O(t){x.call(this),this.headers=new Map,this.L=t||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}C(O,x);var bs=/^https?$/i,Ds=["POST","PUT"];r=O.prototype,r.Fa=function(t){this.H=t},r.ea=function(t,n,i,o){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+t);n=n?n.toUpperCase():"GET",this.D=t,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():In.g(),this.g.onreadystatechange=K(S(this.Ca,this));try{this.B=!0,this.g.open(n,String(t),!0),this.B=!1}catch(_){Wn(this,_);return}if(t=i||"",i=new Map(this.headers),o)if(Object.getPrototypeOf(o)===Object.prototype)for(var d in o)i.set(d,o[d]);else if(typeof o.keys=="function"&&typeof o.get=="function")for(const _ of o.keys())i.set(_,o.get(_));else throw Error("Unknown input type for opt_headers: "+String(o));o=Array.from(i.keys()).find(_=>_.toLowerCase()=="content-type"),d=y.FormData&&t instanceof y.FormData,!(Array.prototype.indexOf.call(Ds,n,void 0)>=0)||o||d||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[_,w]of i)this.g.setRequestHeader(_,w);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(t),this.v=!1}catch(_){Wn(this,_)}};function Wn(t,n){t.h=!1,t.g&&(t.j=!0,t.g.abort(),t.j=!1),t.l=n,t.o=5,qn(t),ae(t)}function qn(t){t.A||(t.A=!0,B(t,"complete"),B(t,"error"))}r.abort=function(t){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=t||7,B(this,"complete"),B(this,"abort"),ae(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ae(this,!0)),O.Z.N.call(this)},r.Ca=function(){this.u||(this.B||this.v||this.j?Xn(this):this.Xa())},r.Xa=function(){Xn(this)};function Xn(t){if(t.h&&typeof v<"u"){if(t.v&&lt(t)==4)setTimeout(t.Ca.bind(t),0);else if(B(t,"readystatechange"),lt(t)==4){t.h=!1;try{const _=t.ca();t:switch(_){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var n=!0;break t;default:n=!1}var i;if(!(i=n)){var o;if(o=_===0){let w=String(t.D).match(jn)[1]||null;!w&&y.self&&y.self.location&&(w=y.self.location.protocol.slice(0,-1)),o=!bs.test(w?w.toLowerCase():"")}i=o}if(i)B(t,"complete"),B(t,"success");else{t.o=6;try{var d=lt(t)>2?t.g.statusText:""}catch{d=""}t.l=d+" ["+t.ca()+"]",qn(t)}}finally{ae(t)}}}}function ae(t,n){if(t.g){t.m&&(clearTimeout(t.m),t.m=null);const i=t.g;t.g=null,n||B(t,"ready");try{i.onreadystatechange=null}catch{}}}r.isActive=function(){return!!this.g};function lt(t){return t.g?t.g.readyState:0}r.ca=function(){try{return lt(this)>2?this.g.status:-1}catch{return-1}},r.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.La=function(t){if(this.g){var n=this.g.responseText;return t&&n.indexOf(t)==0&&(n=n.substring(t.length)),ss(n)}};function zn(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.F){case"":case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function Cs(t){const n={};t=(t.g&&lt(t)>=2&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let o=0;o<t.length;o++){if(l(t[o]))continue;var i=fs(t[o]);const d=i[0];if(i=i[1],typeof i!="string")continue;i=i.trim();const _=n[d]||[];n[d]=_,_.push(i)}Qi(n,function(o){return o.join(", ")})}r.ya=function(){return this.o},r.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Xt(t,n,i){return i&&i.internalChannelParams&&i.internalChannelParams[t]||n}function Jn(t){this.za=0,this.i=[],this.j=new xt,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Xt("failFast",!1,t),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Xt("baseRetryDelayMs",5e3,t),this.Za=Xt("retryDelaySeedMs",1e4,t),this.Ta=Xt("forwardChannelMaxRetries",2,t),this.va=Xt("forwardChannelRequestTimeoutMs",2e4,t),this.ma=t&&t.xmlHttpFactory||void 0,this.Ua=t&&t.Rb||void 0,this.Aa=t&&t.useFetchStreams||!1,this.O=void 0,this.L=t&&t.supportsCrossDomainXhr||!1,this.M="",this.h=new Nn(t&&t.concurrentRequestLimit),this.Ba=new Is,this.S=t&&t.fastHandshake||!1,this.R=t&&t.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=t&&t.Pb||!1,t&&t.ua&&this.j.ua(),t&&t.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&t&&t.detectBufferingProxy||!1,this.ia=void 0,t&&t.longPollingTimeout&&t.longPollingTimeout>0&&(this.ia=t.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}r=Jn.prototype,r.ka=8,r.I=1,r.connect=function(t,n,i,o){F(0),this.W=t,this.H=n||{},i&&o!==void 0&&(this.H.OSID=i,this.H.OAID=o),this.F=this.X,this.J=si(this,null,this.W),ce(this)};function Ge(t){if(Kn(t),t.I==3){var n=t.V++,i=Y(t.J);if(N(i,"SID",t.M),N(i,"RID",n),N(i,"TYPE","terminate"),zt(t,i),n=new ot(t,t.j,n),n.M=2,n.A=oe(Y(i)),i=!1,y.navigator&&y.navigator.sendBeacon)try{i=y.navigator.sendBeacon(n.A.toString(),"")}catch{}!i&&y.Image&&(new Image().src=n.A,i=!0),i||(n.g=ri(n.j,null),n.g.ea(n.A)),n.F=Date.now(),re(n)}ii(t)}function le(t){t.g&&(qe(t),t.g.cancel(),t.g=null)}function Kn(t){le(t),t.v&&(y.clearTimeout(t.v),t.v=null),ue(t),t.h.cancel(),t.m&&(typeof t.m=="number"&&y.clearTimeout(t.m),t.m=null)}function ce(t){if(!On(t.h)&&!t.m){t.m=!0;var n=t.Ea;rt||a(),W||(rt(),W=!0),g.add(n,t),t.D=0}}function Rs(t,n){return Mn(t.h)>=t.h.j-(t.m?1:0)?!1:t.m?(t.i=n.G.concat(t.i),!0):t.I==1||t.I==2||t.D>=(t.Sa?0:t.Ta)?!1:(t.m=jt(S(t.Ea,t,n),ni(t,t.D)),t.D++,!0)}r.Ea=function(t){if(this.m)if(this.m=null,this.I==1){if(!t){this.V=Math.floor(Math.random()*1e5),t=this.V++;const d=new ot(this,this.j,t);let _=this.o;if(this.U&&(_?(_=cn(_),fn(_,this.U)):_=this.U),this.u!==null||this.R||(d.J=_,_=null),this.S)t:{for(var n=0,i=0;i<this.i.length;i++){e:{var o=this.i[i];if("__data__"in o.map&&(o=o.map.__data__,typeof o=="string")){o=o.length;break e}o=void 0}if(o===void 0)break;if(n+=o,n>4096){n=i;break t}if(n===4096||i===this.i.length-1){n=i+1;break t}}n=1e3}else n=1e3;n=Qn(this,d,n),i=Y(this.J),N(i,"RID",t),N(i,"CVER",22),this.G&&N(i,"X-HTTP-Session-Id",this.G),zt(this,i),_&&(this.R?n="headers="+Vt(Gn(_))+"&"+n:this.u&&$e(i,this.u,_)),Fe(this.h,d),this.Ra&&N(i,"TYPE","init"),this.S?(N(i,"$req",n),N(i,"SID","null"),d.U=!0,je(d,i,null)):je(d,i,n),this.I=2}}else this.I==3&&(t?Yn(this,t):this.i.length==0||On(this.h)||Yn(this))};function Yn(t,n){var i;n?i=n.l:i=t.V++;const o=Y(t.J);N(o,"SID",t.M),N(o,"RID",i),N(o,"AID",t.K),zt(t,o),t.u&&t.o&&$e(o,t.u,t.o),i=new ot(t,t.j,i,t.D+1),t.u===null&&(i.J=t.o),n&&(t.i=n.G.concat(t.i)),n=Qn(t,i,1e3),i.H=Math.round(t.va*.5)+Math.round(t.va*.5*Math.random()),Fe(t.h,i),je(i,o,n)}function zt(t,n){t.H&&ne(t.H,function(i,o){N(n,o,i)}),t.l&&ne({},function(i,o){N(n,o,i)})}function Qn(t,n,i){i=Math.min(t.i.length,i);const o=t.l?S(t.l.Ka,t.l,t):null;t:{var d=t.i;let T=-1;for(;;){const k=["count="+i];T==-1?i>0?(T=d[0].g,k.push("ofs="+T)):T=0:k.push("ofs="+T);let R=!0;for(let j=0;j<i;j++){var _=d[j].g;const Q=d[j].map;if(_-=T,_<0)T=Math.max(0,d[j].g-100),R=!1;else try{_="req"+_+"_"||"";try{var w=Q instanceof Map?Q:Object.entries(Q);for(const[_t,ct]of w){let ut=ct;E(ct)&&(ut=Re(ct)),k.push(_+_t+"="+encodeURIComponent(ut))}}catch(_t){throw k.push(_+"type="+encodeURIComponent("_badmap")),_t}}catch{o&&o(Q)}}if(R){w=k.join("&");break t}}w=void 0}return t=t.i.splice(0,i),n.G=t,w}function Zn(t){if(!t.g&&!t.v){t.Y=1;var n=t.Da;rt||a(),W||(rt(),W=!0),g.add(n,t),t.A=0}}function We(t){return t.g||t.v||t.A>=3?!1:(t.Y++,t.v=jt(S(t.Da,t),ni(t,t.A)),t.A++,!0)}r.Da=function(){if(this.v=null,ti(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var t=4*this.T;this.j.info("BP detection timer enabled: "+t),this.B=jt(S(this.Wa,this),t)}},r.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,F(10),le(this),ti(this))};function qe(t){t.B!=null&&(y.clearTimeout(t.B),t.B=null)}function ti(t){t.g=new ot(t,t.j,"rpc",t.Y),t.u===null&&(t.g.J=t.o),t.g.P=0;var n=Y(t.na);N(n,"RID","rpc"),N(n,"SID",t.M),N(n,"AID",t.K),N(n,"CI",t.F?"0":"1"),!t.F&&t.ia&&N(n,"TO",t.ia),N(n,"TYPE","xmlhttp"),zt(t,n),t.u&&t.o&&$e(n,t.u,t.o),t.O&&(t.g.H=t.O);var i=t.g;t=t.ba,i.M=1,i.A=oe(Y(n)),i.u=null,i.R=!0,Cn(i,t)}r.Va=function(){this.C!=null&&(this.C=null,le(this),We(this),F(19))};function ue(t){t.C!=null&&(y.clearTimeout(t.C),t.C=null)}function ei(t,n){var i=null;if(t.g==n){ue(t),qe(t),t.g=null;var o=2}else if(Be(t.h,n))i=n.G,Ln(t.h,n),o=1;else return;if(t.I!=0){if(n.o)if(o==1){i=n.u?n.u.length:0,n=Date.now()-n.F;var d=t.D;o=Oe(),B(o,new Tn(o,i)),ce(t)}else Zn(t);else if(d=n.m,d==3||d==0&&n.X>0||!(o==1&&Rs(t,n)||o==2&&We(t)))switch(i&&i.length>0&&(n=t.h,n.i=n.i.concat(i)),d){case 1:yt(t,5);break;case 4:yt(t,10);break;case 3:yt(t,6);break;default:yt(t,2)}}}function ni(t,n){let i=t.Qa+Math.floor(Math.random()*t.Za);return t.isActive()||(i*=2),i*n}function yt(t,n){if(t.j.info("Error code "+n),n==2){var i=S(t.bb,t),o=t.Ua;const d=!o;o=new ht(o||"//www.google.com/images/cleardot.gif"),y.location&&y.location.protocol=="http"||Ft(o,"https"),oe(o),d?Ss(o.toString(),i):Ts(o.toString(),i)}else F(2);t.I=0,t.l&&t.l.pa(n),ii(t),Kn(t)}r.bb=function(t){t?(this.j.info("Successfully pinged google.com"),F(2)):(this.j.info("Failed to ping google.com"),F(1))};function ii(t){if(t.I=0,t.ja=[],t.l){const n=kn(t.h);(n.length!=0||t.i.length!=0)&&(U(t.ja,n),U(t.ja,t.i),t.h.i.length=0,X(t.i),t.i.length=0),t.l.oa()}}function si(t,n,i){var o=i instanceof ht?Y(i):new ht(i);if(o.g!="")n&&(o.g=n+"."+o.g),Ut(o,o.u);else{var d=y.location;o=d.protocol,n=n?n+"."+d.hostname:d.hostname,d=+d.port;const _=new ht(null);o&&Ft(_,o),n&&(_.g=n),d&&Ut(_,d),i&&(_.h=i),o=_}return i=t.G,n=t.wa,i&&n&&N(o,i,n),N(o,"VER",t.ka),zt(t,o),o}function ri(t,n,i){if(n&&!t.L)throw Error("Can't create secondary domain capable XhrIo object.");return n=t.Aa&&!t.ma?new O(new He({ab:i})):new O(t.ma),n.Fa(t.L),n}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function oi(){}r=oi.prototype,r.ra=function(){},r.qa=function(){},r.pa=function(){},r.oa=function(){},r.isActive=function(){return!0},r.Ka=function(){};function q(t,n){x.call(this),this.g=new Jn(n),this.l=t,this.h=n&&n.messageUrlParams||null,t=n&&n.messageHeaders||null,n&&n.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.o=t,t=n&&n.initMessageHeaders||null,n&&n.messageContentType&&(t?t["X-WebChannel-Content-Type"]=n.messageContentType:t={"X-WebChannel-Content-Type":n.messageContentType}),n&&n.sa&&(t?t["X-WebChannel-Client-Profile"]=n.sa:t={"X-WebChannel-Client-Profile":n.sa}),this.g.U=t,(t=n&&n.Qb)&&!l(t)&&(this.g.u=t),this.A=n&&n.supportsCrossDomainXhr||!1,this.v=n&&n.sendRawJson||!1,(n=n&&n.httpSessionIdParam)&&!l(n)&&(this.g.G=n,t=this.h,t!==null&&n in t&&(t=this.h,n in t&&delete t[n])),this.j=new Pt(this)}C(q,x),q.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},q.prototype.close=function(){Ge(this.g)},q.prototype.o=function(t){var n=this.g;if(typeof t=="string"){var i={};i.__data__=t,t=i}else this.v&&(i={},i.__data__=Re(t),t=i);n.i.push(new ds(n.Ya++,t)),n.I==3&&ce(n)},q.prototype.N=function(){this.g.l=null,delete this.j,Ge(this.g),delete this.g,q.Z.N.call(this)};function hi(t){Pe.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var n=t.__sm__;if(n){t:{for(const i in n){t=i;break t}t=void 0}(this.i=t)&&(t=this.i,n=n!==null&&t in n?n[t]:void 0),this.data=n}else this.data=t}C(hi,Pe);function ai(){Ne.call(this),this.status=1}C(ai,Ne);function Pt(t){this.g=t}C(Pt,oi),Pt.prototype.ra=function(){B(this.g,"a")},Pt.prototype.qa=function(t){B(this.g,new hi(t))},Pt.prototype.pa=function(t){B(this.g,new ai)},Pt.prototype.oa=function(){B(this.g,"b")},q.prototype.send=q.prototype.o,q.prototype.open=q.prototype.m,q.prototype.close=q.prototype.close,Me.NO_ERROR=0,Me.TIMEOUT=8,Me.HTTP_ERROR=6,us.COMPLETE="complete",os.EventType=Lt,Lt.OPEN="a",Lt.CLOSE="b",Lt.ERROR="c",Lt.MESSAGE="d",x.prototype.listen=x.prototype.J,O.prototype.listenOnce=O.prototype.K,O.prototype.getLastError=O.prototype.Ha,O.prototype.getLastErrorCode=O.prototype.ya,O.prototype.getStatus=O.prototype.ca,O.prototype.getResponseJson=O.prototype.La,O.prototype.getResponseText=O.prototype.la,O.prototype.send=O.prototype.ea,O.prototype.setWithCredentials=O.prototype.Fa}).apply(typeof ge<"u"?ge:typeof self<"u"?self:typeof window<"u"?window:{});const vi="@firebase/firestore",wi="4.9.2";class G{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}G.UNAUTHENTICATED=new G(null),G.GOOGLE_CREDENTIALS=new G("google-credentials-uid"),G.FIRST_PARTY=new G("first-party-uid"),G.MOCK_USER=new G("mock-user");let Ee="12.3.0";const _e=new Bi("@firebase/firestore");function J(r,...e){if(_e.logLevel<=P.DEBUG){const s=e.map(Wi);_e.debug(`Firestore (${Ee}): ${r}`,...s)}}function Gi(r,...e){if(_e.logLevel<=P.ERROR){const s=e.map(Wi);_e.error(`Firestore (${Ee}): ${r}`,...s)}}function Wi(r){if(typeof r=="string")return r;try{return(function(s){return JSON.stringify(s)})(r)}catch{return r}}function ve(r,e,s){let h="Unexpected state";typeof e=="string"?h=e:s=e,qi(r,h,s)}function qi(r,e,s){let h=`FIRESTORE (${Ee}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(s!==void 0)try{h+=" CONTEXT: "+JSON.stringify(s)}catch{h+=" CONTEXT: "+s}throw Gi(h),new Error(h)}function Kt(r,e,s,h){let u="Unexpected state";typeof s=="string"?u=s:h=s,r||qi(e,u,h)}const b={CANCELLED:"cancelled",INVALID_ARGUMENT:"invalid-argument",FAILED_PRECONDITION:"failed-precondition"};class D extends Ot{constructor(e,s){super(e,s),this.code=e,this.message=s,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Yt{constructor(){this.promise=new Promise(((e,s)=>{this.resolve=e,this.reject=s}))}}class Wr{constructor(e,s){this.user=s,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class qr{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,s){e.enqueueRetryable((()=>s(G.UNAUTHENTICATED)))}shutdown(){}}class Xr{constructor(e){this.t=e,this.currentUser=G.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,s){Kt(this.o===void 0,42304);let h=this.i;const u=A=>this.i!==h?(h=this.i,s(A)):Promise.resolve();let v=new Yt;this.o=()=>{this.i++,this.currentUser=this.u(),v.resolve(),v=new Yt,e.enqueueRetryable((()=>u(this.currentUser)))};const y=()=>{const A=v;e.enqueueRetryable((async()=>{await A.promise,await u(this.currentUser)}))},E=A=>{J("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=A,this.o&&(this.auth.addAuthTokenListener(this.o),y())};this.t.onInit((A=>E(A))),setTimeout((()=>{if(!this.auth){const A=this.t.getImmediate({optional:!0});A?E(A):(J("FirebaseAuthCredentialsProvider","Auth not yet detected"),v.resolve(),v=new Yt)}}),0),y()}getToken(){const e=this.i,s=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(s).then((h=>this.i!==e?(J("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):h?(Kt(typeof h.accessToken=="string",31837,{l:h}),new Wr(h.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Kt(e===null||typeof e=="string",2055,{h:e}),new G(e)}}class zr{constructor(e,s,h){this.P=e,this.T=s,this.I=h,this.type="FirstParty",this.user=G.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Jr{constructor(e,s,h){this.P=e,this.T=s,this.I=h}getToken(){return Promise.resolve(new zr(this.P,this.T,this.I))}start(e,s){e.enqueueRetryable((()=>s(G.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Ei{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Kr{constructor(e,s){this.V=s,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Or(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,s){Kt(this.o===void 0,3512);const h=v=>{v.error!=null&&J("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${v.error.message}`);const y=v.token!==this.m;return this.m=v.token,J("FirebaseAppCheckTokenProvider",`Received ${y?"new":"existing"} token.`),y?s(v.token):Promise.resolve()};this.o=v=>{e.enqueueRetryable((()=>h(v)))};const u=v=>{J("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=v,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((v=>u(v))),setTimeout((()=>{if(!this.appCheck){const v=this.V.getImmediate({optional:!0});v?u(v):J("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Ei(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((s=>s?(Kt(typeof s.token=="string",44558,{tokenResult:s}),this.m=s.token,new Ei(s.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function Yr(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),s=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(s);else for(let h=0;h<r;h++)s[h]=Math.floor(256*Math.random());return s}class Qr{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",s=62*Math.floor(4.129032258064516);let h="";for(;h.length<20;){const u=Yr(40);for(let v=0;v<u.length;++v)h.length<20&&u[v]<s&&(h+=e.charAt(u[v]%62))}return h}}function gt(r,e){return r<e?-1:r>e?1:0}function Zr(r,e){const s=Math.min(r.length,e.length);for(let h=0;h<s;h++){const u=r.charAt(h),v=e.charAt(h);if(u!==v)return Qe(u)===Qe(v)?gt(u,v):Qe(u)?1:-1}return gt(r.length,e.length)}const to=55296,eo=57343;function Qe(r){const e=r.charCodeAt(0);return e>=to&&e<=eo}const Ai="__name__";class Z{constructor(e,s,h){s===void 0?s=0:s>e.length&&ve(637,{offset:s,range:e.length}),h===void 0?h=e.length-s:h>e.length-s&&ve(1746,{length:h,range:e.length-s}),this.segments=e,this.offset=s,this.len=h}get length(){return this.len}isEqual(e){return Z.comparator(this,e)===0}child(e){const s=this.segments.slice(this.offset,this.limit());return e instanceof Z?e.forEach((h=>{s.push(h)})):s.push(e),this.construct(s)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let s=0;s<this.length;s++)if(this.get(s)!==e.get(s))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let s=0;s<this.length;s++)if(this.get(s)!==e.get(s))return!1;return!0}forEach(e){for(let s=this.offset,h=this.limit();s<h;s++)e(this.segments[s])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,s){const h=Math.min(e.length,s.length);for(let u=0;u<h;u++){const v=Z.compareSegments(e.get(u),s.get(u));if(v!==0)return v}return gt(e.length,s.length)}static compareSegments(e,s){const h=Z.isNumericId(e),u=Z.isNumericId(s);return h&&!u?-1:!h&&u?1:h&&u?Z.extractNumericId(e).compare(Z.extractNumericId(s)):Zr(e,s)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return on.fromString(e.substring(4,e.length-2))}}class z extends Z{construct(e,s,h){return new z(e,s,h)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const s=[];for(const h of e){if(h.indexOf("//")>=0)throw new D(b.INVALID_ARGUMENT,`Invalid segment (${h}). Paths must not contain // in them.`);s.push(...h.split("/").filter((u=>u.length>0)))}return new z(s)}static emptyPath(){return new z([])}}const no=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class vt extends Z{construct(e,s,h){return new vt(e,s,h)}static isValidIdentifier(e){return no.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),vt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Ai}static keyField(){return new vt([Ai])}static fromServerFormat(e){const s=[];let h="",u=0;const v=()=>{if(h.length===0)throw new D(b.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);s.push(h),h=""};let y=!1;for(;u<e.length;){const E=e[u];if(E==="\\"){if(u+1===e.length)throw new D(b.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const A=e[u+1];if(A!=="\\"&&A!=="."&&A!=="`")throw new D(b.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);h+=A,u+=2}else E==="`"?(y=!y,u++):E!=="."||y?(h+=E,u++):(v(),u++)}if(v(),y)throw new D(b.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new vt(s)}static emptyPath(){return new vt([])}}class wt{constructor(e){this.path=e}static fromPath(e){return new wt(z.fromString(e))}static fromName(e){return new wt(z.fromString(e).popFirst(5))}static empty(){return new wt(z.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&z.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,s){return z.comparator(e.path,s.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new wt(new z(e.slice()))}}function io(r,e,s,h){if(e===!0&&h===!0)throw new D(b.INVALID_ARGUMENT,`${r} and ${s} cannot be used together.`)}function so(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function M(r,e){const s={typeString:r};return e&&(s.value=e),s}function te(r,e){if(!so(r))throw new D(b.INVALID_ARGUMENT,"JSON must be an object");let s;for(const h in e)if(e[h]){const u=e[h].typeString,v="value"in e[h]?{value:e[h].value}:void 0;if(!(h in r)){s=`JSON missing required field: '${h}'`;break}const y=r[h];if(u&&typeof y!==u){s=`JSON field '${h}' must be a ${u}.`;break}if(v!==void 0&&y!==v.value){s=`Expected '${h}' field to equal '${v.value}'`;break}}if(s)throw new D(b.INVALID_ARGUMENT,s);return!0}const Si=-62135596800,Ti=1e6;class tt{static now(){return tt.fromMillis(Date.now())}static fromDate(e){return tt.fromMillis(e.getTime())}static fromMillis(e){const s=Math.floor(e/1e3),h=Math.floor((e-1e3*s)*Ti);return new tt(s,h)}constructor(e,s){if(this.seconds=e,this.nanoseconds=s,s<0)throw new D(b.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+s);if(s>=1e9)throw new D(b.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+s);if(e<Si)throw new D(b.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new D(b.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Ti}_compareTo(e){return this.seconds===e.seconds?gt(this.nanoseconds,e.nanoseconds):gt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:tt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(te(e,tt._jsonSchema))return new tt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Si;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}tt._jsonSchemaVersion="firestore/timestamp/1.0",tt._jsonSchema={type:M("string",tt._jsonSchemaVersion),seconds:M("number"),nanoseconds:M("number")};function ro(r){return r.name==="IndexedDbTransactionError"}class oo extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class St{constructor(e){this.binaryString=e}static fromBase64String(e){const s=(function(u){try{return atob(u)}catch(v){throw typeof DOMException<"u"&&v instanceof DOMException?new oo("Invalid base64 string: "+v):v}})(e);return new St(s)}static fromUint8Array(e){const s=(function(u){let v="";for(let y=0;y<u.length;++y)v+=String.fromCharCode(u[y]);return v})(e);return new St(s)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(s){return btoa(s)})(this.binaryString)}toUint8Array(){return(function(s){const h=new Uint8Array(s.length);for(let u=0;u<s.length;u++)h[u]=s.charCodeAt(u);return h})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return gt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}St.EMPTY_BYTE_STRING=new St("");const Ii="(default)";class we{constructor(e,s){this.projectId=e,this.database=s||Ii}static empty(){return new we("","")}get isDefaultDatabase(){return this.database===Ii}isEqual(e){return e instanceof we&&e.projectId===this.projectId&&e.database===this.database}}class ho{constructor(e,s=null,h=[],u=[],v=null,y="F",E=null,A=null){this.path=e,this.collectionGroup=s,this.explicitOrderBy=h,this.filters=u,this.limit=v,this.limitType=y,this.startAt=E,this.endAt=A,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function ao(r){return new ho(r)}var bi,I;(I=bi||(bi={}))[I.OK=0]="OK",I[I.CANCELLED=1]="CANCELLED",I[I.UNKNOWN=2]="UNKNOWN",I[I.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",I[I.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",I[I.NOT_FOUND=5]="NOT_FOUND",I[I.ALREADY_EXISTS=6]="ALREADY_EXISTS",I[I.PERMISSION_DENIED=7]="PERMISSION_DENIED",I[I.UNAUTHENTICATED=16]="UNAUTHENTICATED",I[I.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",I[I.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",I[I.ABORTED=10]="ABORTED",I[I.OUT_OF_RANGE=11]="OUT_OF_RANGE",I[I.UNIMPLEMENTED=12]="UNIMPLEMENTED",I[I.INTERNAL=13]="INTERNAL",I[I.UNAVAILABLE=14]="UNAVAILABLE",I[I.DATA_LOSS=15]="DATA_LOSS";new on([4294967295,4294967295],0);const lo=41943040;const co=1048576;function Ze(){return typeof document<"u"?document:null}class uo{constructor(e,s,h=1e3,u=1.5,v=6e4){this.Mi=e,this.timerId=s,this.d_=h,this.A_=u,this.R_=v,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const s=Math.floor(this.V_+this.y_()),h=Math.max(0,Date.now()-this.f_),u=Math.max(0,s-h);u>0&&J("ExponentialBackoff",`Backing off for ${u} ms (base delay: ${this.V_} ms, delay with jitter: ${s} ms, last attempt: ${h} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,u,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}class hn{constructor(e,s,h,u,v){this.asyncQueue=e,this.timerId=s,this.targetTimeMs=h,this.op=u,this.removalCallback=v,this.deferred=new Yt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((y=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,s,h,u,v){const y=Date.now()+h,E=new hn(e,s,y,u,v);return E.start(h),E}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new D(b.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}var Di,Ci;(Ci=Di||(Di={})).Ma="default",Ci.Cache="cache";function fo(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}const Ri=new Map;const go="firestore.googleapis.com",Pi=!0;class Ni{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new D(b.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=go,this.ssl=Pi}else this.host=e.host,this.ssl=e.ssl??Pi;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=lo;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<co)throw new D(b.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}io("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=fo(e.experimentalLongPollingOptions??{}),(function(h){if(h.timeoutSeconds!==void 0){if(isNaN(h.timeoutSeconds))throw new D(b.INVALID_ARGUMENT,`invalid long polling timeout: ${h.timeoutSeconds} (must not be NaN)`);if(h.timeoutSeconds<5)throw new D(b.INVALID_ARGUMENT,`invalid long polling timeout: ${h.timeoutSeconds} (minimum allowed value is 5)`);if(h.timeoutSeconds>30)throw new D(b.INVALID_ARGUMENT,`invalid long polling timeout: ${h.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(h,u){return h.timeoutSeconds===u.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class po{constructor(e,s,h,u){this._authCredentials=e,this._appCheckCredentials=s,this._databaseId=h,this._app=u,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ni({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new D(b.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new D(b.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ni(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(h){if(!h)return new qr;switch(h.type){case"firstParty":return new Jr(h.sessionIndex||"0",h.iamToken||null,h.authTokenFactory||null);case"provider":return h.client;default:throw new D(b.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(s){const h=Ri.get(s);h&&(J("ComponentProvider","Removing Datastore"),Ri.delete(s),h.terminate())})(this),Promise.resolve()}}class an{constructor(e,s,h){this.converter=s,this._query=h,this.type="query",this.firestore=e}withConverter(e){return new an(this.firestore,e,this._query)}}class et{constructor(e,s,h){this.converter=s,this._key=h,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ln(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new et(this.firestore,e,this._key)}toJSON(){return{type:et._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,s,h){if(te(s,et._jsonSchema))return new et(e,h||null,new wt(z.fromString(s.referencePath)))}}et._jsonSchemaVersion="firestore/documentReference/1.0",et._jsonSchema={type:M("string",et._jsonSchemaVersion),referencePath:M("string")};class ln extends an{constructor(e,s,h){super(e,s,ao(h)),this._path=h,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new et(this.firestore,null,new wt(e))}withConverter(e){return new ln(this.firestore,e,this._path)}}const Oi="AsyncQueue";class Mi{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new uo(this,"async_queue_retry"),this._c=()=>{const h=Ze();h&&J(Oi,"Visibility state changed to "+h.visibilityState),this.M_.w_()},this.ac=e;const s=Ze();s&&typeof s.addEventListener=="function"&&s.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const s=Ze();s&&typeof s.removeEventListener=="function"&&s.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const s=new Yt;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(s.resolve,s.reject),s.promise))).then((()=>s.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!ro(e))throw e;J(Oi,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const s=this.ac.then((()=>(this.rc=!0,e().catch((h=>{throw this.nc=h,this.rc=!1,Gi("INTERNAL UNHANDLED ERROR: ",Li(h)),h})).then((h=>(this.rc=!1,h))))));return this.ac=s,s}enqueueAfterDelay(e,s,h){this.uc(),this.oc.indexOf(e)>-1&&(s=0);const u=hn.createAndSchedule(this,e,s,h,(v=>this.hc(v)));return this.tc.push(u),u}uc(){this.nc&&ve(47125,{Pc:Li(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const s of this.tc)if(s.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((s,h)=>s.targetTimeMs-h.targetTimeMs));for(const s of this.tc)if(s.skipDelay(),e!=="all"&&s.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const s=this.tc.indexOf(e);this.tc.splice(s,1)}}function Li(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}class mo extends po{constructor(e,s,h,u){super(e,s,h,u),this.type="firestore",this._queue=new Mi,this._persistenceKey=u?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Mi(e),this._firestoreClient=void 0,await e}}}class nt{constructor(e){this._byteString=e}static fromBase64String(e){try{return new nt(St.fromBase64String(e))}catch(s){throw new D(b.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+s)}}static fromUint8Array(e){return new nt(St.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:nt._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(te(e,nt._jsonSchema))return nt.fromBase64String(e.bytes)}}nt._jsonSchemaVersion="firestore/bytes/1.0",nt._jsonSchema={type:M("string",nt._jsonSchemaVersion),bytes:M("string")};class Xi{constructor(...e){for(let s=0;s<e.length;++s)if(e[s].length===0)throw new D(b.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new vt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Et{constructor(e,s){if(!isFinite(e)||e<-90||e>90)throw new D(b.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(s)||s<-180||s>180)throw new D(b.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+s);this._lat=e,this._long=s}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return gt(this._lat,e._lat)||gt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Et._jsonSchemaVersion}}static fromJSON(e){if(te(e,Et._jsonSchema))return new Et(e.latitude,e.longitude)}}Et._jsonSchemaVersion="firestore/geoPoint/1.0",Et._jsonSchema={type:M("string",Et._jsonSchemaVersion),latitude:M("number"),longitude:M("number")};class At{constructor(e){this._values=(e||[]).map((s=>s))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(h,u){if(h.length!==u.length)return!1;for(let v=0;v<h.length;++v)if(h[v]!==u[v])return!1;return!0})(this._values,e._values)}toJSON(){return{type:At._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(te(e,At._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((s=>typeof s=="number")))return new At(e.vectorValues);throw new D(b.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}At._jsonSchemaVersion="firestore/vectorValue/1.0",At._jsonSchema={type:M("string",At._jsonSchemaVersion),vectorValues:M("object")};const yo=new RegExp("[~\\*/\\[\\]]");function _o(r,e,s){if(e.search(yo)>=0)throw ki(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r);try{return new Xi(...e.split("."))._internalPath}catch{throw ki(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r)}}function ki(r,e,s,h,u){let v=`Function ${e}() called with invalid data`;v+=". ";let y="";return new D(b.INVALID_ARGUMENT,v+r+y)}class zi{constructor(e,s,h,u,v){this._firestore=e,this._userDataWriter=s,this._key=h,this._document=u,this._converter=v}get id(){return this._key.path.lastSegment()}get ref(){return new et(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new vo(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const s=this._document.data.field(Ji("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s)}}}class vo extends zi{data(){return super.data()}}function Ji(r,e){return typeof e=="string"?_o(r,e):e instanceof Xi?e._internalPath:e._delegate._internalPath}class pe{constructor(e,s){this.hasPendingWrites=e,this.fromCache=s}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Nt extends zi{constructor(e,s,h,u,v,y){super(e,s,h,u,y),this._firestore=e,this._firestoreImpl=e,this.metadata=v}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const s=new de(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(s,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,s={}){if(this._document){const h=this._document.data.field(Ji("DocumentSnapshot.get",e));if(h!==null)return this._userDataWriter.convertValue(h,s.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new D(b.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,s={};return s.type=Nt._jsonSchemaVersion,s.bundle="",s.bundleSource="DocumentSnapshot",s.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?s:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),s.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),s)}}Nt._jsonSchemaVersion="firestore/documentSnapshot/1.0",Nt._jsonSchema={type:M("string",Nt._jsonSchemaVersion),bundleSource:M("string","DocumentSnapshot"),bundleName:M("string"),bundle:M("string")};class de extends Nt{data(e={}){return super.data(e)}}class Qt{constructor(e,s,h,u){this._firestore=e,this._userDataWriter=s,this._snapshot=u,this.metadata=new pe(u.hasPendingWrites,u.fromCache),this.query=h}get docs(){const e=[];return this.forEach((s=>e.push(s))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,s){this._snapshot.docs.forEach((h=>{e.call(s,new de(this._firestore,this._userDataWriter,h.key,h,new pe(this._snapshot.mutatedKeys.has(h.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const s=!!e.includeMetadataChanges;if(s&&this._snapshot.excludesMetadataChanges)throw new D(b.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===s||(this._cachedChanges=(function(u,v){if(u._snapshot.oldDocs.isEmpty()){let y=0;return u._snapshot.docChanges.map((E=>{const A=new de(u._firestore,u._userDataWriter,E.doc.key,E.doc,new pe(u._snapshot.mutatedKeys.has(E.doc.key),u._snapshot.fromCache),u.query.converter);return E.doc,{type:"added",doc:A,oldIndex:-1,newIndex:y++}}))}{let y=u._snapshot.oldDocs;return u._snapshot.docChanges.filter((E=>v||E.type!==3)).map((E=>{const A=new de(u._firestore,u._userDataWriter,E.doc.key,E.doc,new pe(u._snapshot.mutatedKeys.has(E.doc.key),u._snapshot.fromCache),u.query.converter);let S=-1,V=-1;return E.type!==0&&(S=y.indexOf(E.doc.key),y=y.delete(E.doc.key)),E.type!==1&&(y=y.add(E.doc),V=y.indexOf(E.doc.key)),{type:wo(E.type),doc:A,oldIndex:S,newIndex:V}}))}})(this,s),this._cachedChangesIncludeMetadataChanges=s),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new D(b.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Qt._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Qr.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const s=[],h=[],u=[];return this.docs.forEach((v=>{v._document!==null&&(s.push(v._document),h.push(this._userDataWriter.convertObjectMap(v._document.data.value.mapValue.fields,"previous")),u.push(v.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function wo(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ve(61501,{type:r})}}Qt._jsonSchemaVersion="firestore/querySnapshot/1.0",Qt._jsonSchema={type:M("string",Qt._jsonSchemaVersion),bundleSource:M("string","QuerySnapshot"),bundleName:M("string"),bundle:M("string")};(function(e,s=!0){(function(u){Ee=u})(Lr),ye(new me("firestore",((h,{instanceIdentifier:u,options:v})=>{const y=h.getProvider("app").getImmediate(),E=new mo(new Xr(h.getProvider("auth-internal")),new Kr(y,h.getProvider("app-check-internal")),(function(S,V){if(!Object.prototype.hasOwnProperty.apply(S.options,["projectId"]))throw new D(b.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new we(S.options.projectId,V)})(y,u),y);return v={useFetchStreams:s,...v},E._setSettings(v),E}),"PUBLIC").setMultipleInstances(!0)),Jt(vi,wi,e),Jt(vi,wi,"esm2020")})();

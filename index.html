<!doctype html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <link rel="icon" type="image/svg+xml" href="/witiempo/smile.png" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Wihope</title>
  <script type="module" crossorigin src="/witiempo/assets/main-BLehDhpD.js"></script>
  <link rel="modulepreload" crossorigin href="/witiempo/assets/vendor-B2AETYxa.js">
  <link rel="modulepreload" crossorigin href="/witiempo/assets/firebase-CSULmGgG.js">
  <link rel="stylesheet" crossorigin href="/witiempo/assets/main-BucmcVRw.css">
</head>

<body>
  <!-- CONTAINER PRINCIPAL 100vh -->
  <div class="wicontainer">

    <!-- HEADER 6vh -->
    <header class="wiheader">
      <!-- LADO IZQUIERDO: Logo + Navegaci칩n -->
      <div class="wiheader_left">
        <div class="wilogo">
          <i class="fas fa-clock"></i>
          <span>wihope</span>
        </div>
        <nav class="winav">
          <a href="/" class="winav_item active" data-page="hora">
            <i class="fas fa-clock"></i>
            <span>Hora</span>
          </a>
          <a href="/calendario" class="winav_item" data-page="calendario">
            <i class="fas fa-calendar-alt"></i>
            <span>Calendario</span>
          </a>
          <a href="/calculadora" class="winav_item" data-page="calculadora">
            <i class="fas fa-calculator"></i>
            <span>Calculadora</span>
          </a>
          <a href="/cronometro" class="winav_item" data-page="cronometro">
            <i class="fas fa-stopwatch"></i>
            <span>Cron칩metro</span>
          </a>
        </nav>
      </div>

      <!-- LADO DERECHO: Temas + Auth -->
      <div class="wiheader_right">
        <div class="witemas"></div>

        <!-- 游 AUTH UI - Renderizado instant치neo -->
        <div id="auth-container">
          <!-- Se renderiza instant치neamente con JavaScript inline -->
          <script>
            (function () {
              try {
                const cached = localStorage.getItem('wiAuthUser');
                if (cached) {
                  const data = JSON.parse(cached);
                  if (data && data.expiry > Date.now()) {
                    const user = data.value;
                    const inicial = (user.nombre || 'U').charAt(0).toUpperCase();
                    const foto = user.foto || './smile.png';
                    document.getElementById('auth-container').innerHTML = `
                      <div class="auth-user" data-auth-state="authenticated">
                        <div class="user-avatar" style="background-image: url('${foto}')">
                          ${!foto || foto === './smile.png' ? inicial : ''}
                        </div>
                        <span class="user-name">${user.nombre || 'Usuario'}</span>
                        <button class="btn-logout" title="Cerrar sesi칩n">
                          <i class="fas fa-sign-out-alt"></i>
                          <span>Salir</span>
                        </button>
                      </div>
                    `;
                  } else {
                    // Cache expirado
                    localStorage.removeItem('wiAuthUser');
                    throw new Error('Cache expired');
                  }
                } else {
                  throw new Error('No cache');
                }
              } catch (e) {
                // No hay cache o error - mostrar botones guest
                document.getElementById('auth-container').innerHTML = `
                  <div class="auth-guest" data-auth-state="guest">
                    <button class="wibtn_auth registrar" data-auth="register">
                      <i class="fas fa-user-plus"></i>
                      <span>Registrar</span>
                    </button>
                    <button class="wibtn_auth login" data-auth="login">
                      <i class="fas fa-sign-in-alt"></i>
                      <span>Login</span>
                    </button>
                  </div>
                `;
              }
            })();
          </script>
        </div>
      </div>
    </header>

    <!-- CONTENIDO PRINCIPAL DIN츼MICO -->
    <main class="wimain" id="wiMainContent">
      <!-- El contenido se cargar치 din치micamente aqu칤 -->
    </main>

  </div>

</body>

</html>
(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function t(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=t(i);fetch(i.href,a)}})();const Bf="modulepreload",qf=function(n){return"/witiempo/v10/"+n},qu={},Oo=function(e,t,r){let i=Promise.resolve();if(t&&t.length>0){let _=function(T){return Promise.all(T.map(b=>Promise.resolve(b).then(k=>({status:"fulfilled",value:k}),k=>({status:"rejected",reason:k}))))};document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),p=c?.nonce||c?.getAttribute("nonce");i=_(t.map(T=>{if(T=qf(T),T in qu)return;qu[T]=!0;const b=T.endsWith(".css"),k=b?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${T}"]${k}`))return;const L=document.createElement("link");if(L.rel=b?"stylesheet":Bf,b||(L.as="script"),L.crossOrigin="",L.href=T,p&&L.setAttribute("nonce",p),document.head.appendChild(L),b)return new Promise((G,W)=>{L.addEventListener("load",G),L.addEventListener("error",()=>W(new Error(`Unable to preload CSS for ${T}`)))})}))}function a(c){const p=new Event("vite:preloadError",{cancelable:!0});if(p.payload=c,window.dispatchEvent(p),!p.defaultPrevented)throw c}return i.then(c=>{for(const p of c||[])p.status==="rejected"&&a(p.reason);return e().catch(a)})};function $f(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var ro={exports:{}};var Hf=ro.exports,$u;function zf(){return $u||($u=1,(function(n){(function(e,t){n.exports=e.document?t(e,!0):function(r){if(!r.document)throw new Error("jQuery requires a window with a document");return t(r)}})(typeof window<"u"?window:Hf,function(e,t){var r=[],i=Object.getPrototypeOf,a=r.slice,c=r.flat?function(s){return r.flat.call(s)}:function(s){return r.concat.apply([],s)},p=r.push,_=r.indexOf,T={},b=T.toString,k=T.hasOwnProperty,L=k.toString,G=L.call(Object),W={},X=function(u){return typeof u=="function"&&typeof u.nodeType!="number"&&typeof u.item!="function"},Z=function(u){return u!=null&&u===u.window},Y=e.document,Ae={type:!0,src:!0,nonce:!0,noModule:!0};function Se(s,u,h){h=h||Y;var d,m,y=h.createElement("script");if(y.text=s,u)for(d in Ae)m=u[d]||u.getAttribute&&u.getAttribute(d),m&&y.setAttribute(d,m);h.head.appendChild(y).parentNode.removeChild(y)}function je(s){return s==null?s+"":typeof s=="object"||typeof s=="function"?T[b.call(s)]||"object":typeof s}var tt="3.7.1",ze=/HTML$/i,l=function(s,u){return new l.fn.init(s,u)};l.fn=l.prototype={jquery:tt,constructor:l,length:0,toArray:function(){return a.call(this)},get:function(s){return s==null?a.call(this):s<0?this[s+this.length]:this[s]},pushStack:function(s){var u=l.merge(this.constructor(),s);return u.prevObject=this,u},each:function(s){return l.each(this,s)},map:function(s){return this.pushStack(l.map(this,function(u,h){return s.call(u,h,u)}))},slice:function(){return this.pushStack(a.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(l.grep(this,function(s,u){return(u+1)%2}))},odd:function(){return this.pushStack(l.grep(this,function(s,u){return u%2}))},eq:function(s){var u=this.length,h=+s+(s<0?u:0);return this.pushStack(h>=0&&h<u?[this[h]]:[])},end:function(){return this.prevObject||this.constructor()},push:p,sort:r.sort,splice:r.splice},l.extend=l.fn.extend=function(){var s,u,h,d,m,y,v=arguments[0]||{},R=1,I=arguments.length,N=!1;for(typeof v=="boolean"&&(N=v,v=arguments[R]||{},R++),typeof v!="object"&&!X(v)&&(v={}),R===I&&(v=this,R--);R<I;R++)if((s=arguments[R])!=null)for(u in s)d=s[u],!(u==="__proto__"||v===d)&&(N&&d&&(l.isPlainObject(d)||(m=Array.isArray(d)))?(h=v[u],m&&!Array.isArray(h)?y=[]:!m&&!l.isPlainObject(h)?y={}:y=h,m=!1,v[u]=l.extend(N,y,d)):d!==void 0&&(v[u]=d));return v},l.extend({expando:"jQuery"+(tt+Math.random()).replace(/\D/g,""),isReady:!0,error:function(s){throw new Error(s)},noop:function(){},isPlainObject:function(s){var u,h;return!s||b.call(s)!=="[object Object]"?!1:(u=i(s),u?(h=k.call(u,"constructor")&&u.constructor,typeof h=="function"&&L.call(h)===G):!0)},isEmptyObject:function(s){var u;for(u in s)return!1;return!0},globalEval:function(s,u,h){Se(s,{nonce:u&&u.nonce},h)},each:function(s,u){var h,d=0;if(C(s))for(h=s.length;d<h&&u.call(s[d],d,s[d])!==!1;d++);else for(d in s)if(u.call(s[d],d,s[d])===!1)break;return s},text:function(s){var u,h="",d=0,m=s.nodeType;if(!m)for(;u=s[d++];)h+=l.text(u);return m===1||m===11?s.textContent:m===9?s.documentElement.textContent:m===3||m===4?s.nodeValue:h},makeArray:function(s,u){var h=u||[];return s!=null&&(C(Object(s))?l.merge(h,typeof s=="string"?[s]:s):p.call(h,s)),h},inArray:function(s,u,h){return u==null?-1:_.call(u,s,h)},isXMLDoc:function(s){var u=s&&s.namespaceURI,h=s&&(s.ownerDocument||s).documentElement;return!ze.test(u||h&&h.nodeName||"HTML")},merge:function(s,u){for(var h=+u.length,d=0,m=s.length;d<h;d++)s[m++]=u[d];return s.length=m,s},grep:function(s,u,h){for(var d,m=[],y=0,v=s.length,R=!h;y<v;y++)d=!u(s[y],y),d!==R&&m.push(s[y]);return m},map:function(s,u,h){var d,m,y=0,v=[];if(C(s))for(d=s.length;y<d;y++)m=u(s[y],y,h),m!=null&&v.push(m);else for(y in s)m=u(s[y],y,h),m!=null&&v.push(m);return c(v)},guid:1,support:W}),typeof Symbol=="function"&&(l.fn[Symbol.iterator]=r[Symbol.iterator]),l.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(s,u){T["[object "+u+"]"]=u.toLowerCase()});function C(s){var u=!!s&&"length"in s&&s.length,h=je(s);return X(s)||Z(s)?!1:h==="array"||u===0||typeof u=="number"&&u>0&&u-1 in s}function S(s,u){return s.nodeName&&s.nodeName.toLowerCase()===u.toLowerCase()}var x=r.pop,D=r.sort,M=r.splice,A="[\\x20\\t\\r\\n\\f]",We=new RegExp("^"+A+"+|((?:^|[^\\\\])(?:\\\\.)*)"+A+"+$","g");l.contains=function(s,u){var h=u&&u.parentNode;return s===h||!!(h&&h.nodeType===1&&(s.contains?s.contains(h):s.compareDocumentPosition&&s.compareDocumentPosition(h)&16))};var sn=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g;function Jo(s,u){return u?s==="\0"?"ï¿½":s.slice(0,-1)+"\\"+s.charCodeAt(s.length-1).toString(16)+" ":"\\"+s}l.escapeSelector=function(s){return(s+"").replace(sn,Jo)};var Pt=Y,wn=p;(function(){var s,u,h,d,m,y=wn,v,R,I,N,B,q=l.expando,U=0,Q=0,ie=Gs(),_e=Gs(),me=Gs(),Oe=Gs(),o=function(w,P){return w===P&&(m=!0),0},f="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",g="(?:\\\\[\\da-fA-F]{1,6}"+A+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",E="\\["+A+"*("+g+")(?:"+A+"*([*^$|!~]?=)"+A+`*(?:'((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)"|(`+g+"))|)"+A+"*\\]",O=":("+g+`)(?:\\((('((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)")|((?:\\\\.|[^\\\\()[\\]]|`+E+")*)|.*)\\)|)",V=new RegExp(A+"+","g"),z=new RegExp("^"+A+"*,"+A+"*"),fe=new RegExp("^"+A+"*([>+~]|"+A+")"+A+"*"),Me=new RegExp(A+"|>"),ye=new RegExp(O),Le=new RegExp("^"+g+"$"),qe={ID:new RegExp("^#("+g+")"),CLASS:new RegExp("^\\.("+g+")"),TAG:new RegExp("^("+g+"|[*])"),ATTR:new RegExp("^"+E),PSEUDO:new RegExp("^"+O),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+A+"*(even|odd|(([+-]|)(\\d*)n|)"+A+"*(?:([+-]|)"+A+"*(\\d+)|))"+A+"*\\)|)","i"),bool:new RegExp("^(?:"+f+")$","i"),needsContext:new RegExp("^"+A+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+A+"*((?:-\\d)?\\d*)"+A+"*\\)|)(?=[^-]|$)","i")},ct=/^(?:input|select|textarea|button)$/i,it=/^h\d$/i,$e=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Mn=/[+~]/,Et=new RegExp("\\\\[\\da-fA-F]{1,6}"+A+"?|\\\\([^\\r\\n\\f])","g"),fn=function(w,P){var F="0x"+w.slice(1)-65536;return P||(F<0?String.fromCharCode(F+65536):String.fromCharCode(F>>10|55296,F&1023|56320))},Vf=function(){Fn()},Of=Qs(function(w){return w.disabled===!0&&S(w,"fieldset")},{dir:"parentNode",next:"legend"});function Lf(){try{return v.activeElement}catch{}}try{y.apply(r=a.call(Pt.childNodes),Pt.childNodes),r[Pt.childNodes.length].nodeType}catch{y={apply:function(P,F){wn.apply(P,a.call(F))},call:function(P){wn.apply(P,a.call(arguments,1))}}}function Pe(w,P,F,j){var $,J,ee,se,te,ve,le,de=P&&P.ownerDocument,Te=P?P.nodeType:9;if(F=F||[],typeof w!="string"||!w||Te!==1&&Te!==9&&Te!==11)return F;if(!j&&(Fn(P),P=P||v,I)){if(Te!==11&&(te=$e.exec(w)))if($=te[1]){if(Te===9)if(ee=P.getElementById($)){if(ee.id===$)return y.call(F,ee),F}else return F;else if(de&&(ee=de.getElementById($))&&Pe.contains(P,ee)&&ee.id===$)return y.call(F,ee),F}else{if(te[2])return y.apply(F,P.getElementsByTagName(w)),F;if(($=te[3])&&P.getElementsByClassName)return y.apply(F,P.getElementsByClassName($)),F}if(!Oe[w+" "]&&(!N||!N.test(w))){if(le=w,de=P,Te===1&&(Me.test(w)||fe.test(w))){for(de=Mn.test(w)&&oa(P.parentNode)||P,(de!=P||!W.scope)&&((se=P.getAttribute("id"))?se=l.escapeSelector(se):P.setAttribute("id",se=q)),ve=Ki(w),J=ve.length;J--;)ve[J]=(se?"#"+se:":scope")+" "+Ks(ve[J]);le=ve.join(",")}try{return y.apply(F,de.querySelectorAll(le)),F}catch{Oe(w,!0)}finally{se===q&&P.removeAttribute("id")}}}return Bu(w.replace(We,"$1"),P,F,j)}function Gs(){var w=[];function P(F,j){return w.push(F+" ")>u.cacheLength&&delete P[w.shift()],P[F+" "]=j}return P}function Ot(w){return w[q]=!0,w}function qr(w){var P=v.createElement("fieldset");try{return!!w(P)}catch{return!1}finally{P.parentNode&&P.parentNode.removeChild(P),P=null}}function Mf(w){return function(P){return S(P,"input")&&P.type===w}}function Ff(w){return function(P){return(S(P,"input")||S(P,"button"))&&P.type===w}}function Uu(w){return function(P){return"form"in P?P.parentNode&&P.disabled===!1?"label"in P?"label"in P.parentNode?P.parentNode.disabled===w:P.disabled===w:P.isDisabled===w||P.isDisabled!==!w&&Of(P)===w:P.disabled===w:"label"in P?P.disabled===w:!1}}function _r(w){return Ot(function(P){return P=+P,Ot(function(F,j){for(var $,J=w([],F.length,P),ee=J.length;ee--;)F[$=J[ee]]&&(F[$]=!(j[$]=F[$]))})})}function oa(w){return w&&typeof w.getElementsByTagName<"u"&&w}function Fn(w){var P,F=w?w.ownerDocument||w:Pt;return F==v||F.nodeType!==9||!F.documentElement||(v=F,R=v.documentElement,I=!l.isXMLDoc(v),B=R.matches||R.webkitMatchesSelector||R.msMatchesSelector,R.msMatchesSelector&&Pt!=v&&(P=v.defaultView)&&P.top!==P&&P.addEventListener("unload",Vf),W.getById=qr(function(j){return R.appendChild(j).id=l.expando,!v.getElementsByName||!v.getElementsByName(l.expando).length}),W.disconnectedMatch=qr(function(j){return B.call(j,"*")}),W.scope=qr(function(){return v.querySelectorAll(":scope")}),W.cssHas=qr(function(){try{return v.querySelector(":has(*,:jqfake)"),!1}catch{return!0}}),W.getById?(u.filter.ID=function(j){var $=j.replace(Et,fn);return function(J){return J.getAttribute("id")===$}},u.find.ID=function(j,$){if(typeof $.getElementById<"u"&&I){var J=$.getElementById(j);return J?[J]:[]}}):(u.filter.ID=function(j){var $=j.replace(Et,fn);return function(J){var ee=typeof J.getAttributeNode<"u"&&J.getAttributeNode("id");return ee&&ee.value===$}},u.find.ID=function(j,$){if(typeof $.getElementById<"u"&&I){var J,ee,se,te=$.getElementById(j);if(te){if(J=te.getAttributeNode("id"),J&&J.value===j)return[te];for(se=$.getElementsByName(j),ee=0;te=se[ee++];)if(J=te.getAttributeNode("id"),J&&J.value===j)return[te]}return[]}}),u.find.TAG=function(j,$){return typeof $.getElementsByTagName<"u"?$.getElementsByTagName(j):$.querySelectorAll(j)},u.find.CLASS=function(j,$){if(typeof $.getElementsByClassName<"u"&&I)return $.getElementsByClassName(j)},N=[],qr(function(j){var $;R.appendChild(j).innerHTML="<a id='"+q+"' href='' disabled='disabled'></a><select id='"+q+"-\r\\' disabled='disabled'><option selected=''></option></select>",j.querySelectorAll("[selected]").length||N.push("\\["+A+"*(?:value|"+f+")"),j.querySelectorAll("[id~="+q+"-]").length||N.push("~="),j.querySelectorAll("a#"+q+"+*").length||N.push(".#.+[+~]"),j.querySelectorAll(":checked").length||N.push(":checked"),$=v.createElement("input"),$.setAttribute("type","hidden"),j.appendChild($).setAttribute("name","D"),R.appendChild(j).disabled=!0,j.querySelectorAll(":disabled").length!==2&&N.push(":enabled",":disabled"),$=v.createElement("input"),$.setAttribute("name",""),j.appendChild($),j.querySelectorAll("[name='']").length||N.push("\\["+A+"*name"+A+"*="+A+`*(?:''|"")`)}),W.cssHas||N.push(":has"),N=N.length&&new RegExp(N.join("|")),o=function(j,$){if(j===$)return m=!0,0;var J=!j.compareDocumentPosition-!$.compareDocumentPosition;return J||(J=(j.ownerDocument||j)==($.ownerDocument||$)?j.compareDocumentPosition($):1,J&1||!W.sortDetached&&$.compareDocumentPosition(j)===J?j===v||j.ownerDocument==Pt&&Pe.contains(Pt,j)?-1:$===v||$.ownerDocument==Pt&&Pe.contains(Pt,$)?1:d?_.call(d,j)-_.call(d,$):0:J&4?-1:1)}),v}Pe.matches=function(w,P){return Pe(w,null,null,P)},Pe.matchesSelector=function(w,P){if(Fn(w),I&&!Oe[P+" "]&&(!N||!N.test(P)))try{var F=B.call(w,P);if(F||W.disconnectedMatch||w.document&&w.document.nodeType!==11)return F}catch{Oe(P,!0)}return Pe(P,v,null,[w]).length>0},Pe.contains=function(w,P){return(w.ownerDocument||w)!=v&&Fn(w),l.contains(w,P)},Pe.attr=function(w,P){(w.ownerDocument||w)!=v&&Fn(w);var F=u.attrHandle[P.toLowerCase()],j=F&&k.call(u.attrHandle,P.toLowerCase())?F(w,P,!I):void 0;return j!==void 0?j:w.getAttribute(P)},Pe.error=function(w){throw new Error("Syntax error, unrecognized expression: "+w)},l.uniqueSort=function(w){var P,F=[],j=0,$=0;if(m=!W.sortStable,d=!W.sortStable&&a.call(w,0),D.call(w,o),m){for(;P=w[$++];)P===w[$]&&(j=F.push($));for(;j--;)M.call(w,F[j],1)}return d=null,w},l.fn.uniqueSort=function(){return this.pushStack(l.uniqueSort(a.apply(this)))},u=l.expr={cacheLength:50,createPseudo:Ot,match:qe,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(w){return w[1]=w[1].replace(Et,fn),w[3]=(w[3]||w[4]||w[5]||"").replace(Et,fn),w[2]==="~="&&(w[3]=" "+w[3]+" "),w.slice(0,4)},CHILD:function(w){return w[1]=w[1].toLowerCase(),w[1].slice(0,3)==="nth"?(w[3]||Pe.error(w[0]),w[4]=+(w[4]?w[5]+(w[6]||1):2*(w[3]==="even"||w[3]==="odd")),w[5]=+(w[7]+w[8]||w[3]==="odd")):w[3]&&Pe.error(w[0]),w},PSEUDO:function(w){var P,F=!w[6]&&w[2];return qe.CHILD.test(w[0])?null:(w[3]?w[2]=w[4]||w[5]||"":F&&ye.test(F)&&(P=Ki(F,!0))&&(P=F.indexOf(")",F.length-P)-F.length)&&(w[0]=w[0].slice(0,P),w[2]=F.slice(0,P)),w.slice(0,3))}},filter:{TAG:function(w){var P=w.replace(Et,fn).toLowerCase();return w==="*"?function(){return!0}:function(F){return S(F,P)}},CLASS:function(w){var P=ie[w+" "];return P||(P=new RegExp("(^|"+A+")"+w+"("+A+"|$)"))&&ie(w,function(F){return P.test(typeof F.className=="string"&&F.className||typeof F.getAttribute<"u"&&F.getAttribute("class")||"")})},ATTR:function(w,P,F){return function(j){var $=Pe.attr(j,w);return $==null?P==="!=":P?($+="",P==="="?$===F:P==="!="?$!==F:P==="^="?F&&$.indexOf(F)===0:P==="*="?F&&$.indexOf(F)>-1:P==="$="?F&&$.slice(-F.length)===F:P==="~="?(" "+$.replace(V," ")+" ").indexOf(F)>-1:P==="|="?$===F||$.slice(0,F.length+1)===F+"-":!1):!0}},CHILD:function(w,P,F,j,$){var J=w.slice(0,3)!=="nth",ee=w.slice(-4)!=="last",se=P==="of-type";return j===1&&$===0?function(te){return!!te.parentNode}:function(te,ve,le){var de,Te,ae,De,yt,lt=J!==ee?"nextSibling":"previousSibling",St=te.parentNode,Wt=se&&te.nodeName.toLowerCase(),$r=!le&&!se,mt=!1;if(St){if(J){for(;lt;){for(ae=te;ae=ae[lt];)if(se?S(ae,Wt):ae.nodeType===1)return!1;yt=lt=w==="only"&&!yt&&"nextSibling"}return!0}if(yt=[ee?St.firstChild:St.lastChild],ee&&$r){for(Te=St[q]||(St[q]={}),de=Te[w]||[],De=de[0]===U&&de[1],mt=De&&de[2],ae=De&&St.childNodes[De];ae=++De&&ae&&ae[lt]||(mt=De=0)||yt.pop();)if(ae.nodeType===1&&++mt&&ae===te){Te[w]=[U,De,mt];break}}else if($r&&(Te=te[q]||(te[q]={}),de=Te[w]||[],De=de[0]===U&&de[1],mt=De),mt===!1)for(;(ae=++De&&ae&&ae[lt]||(mt=De=0)||yt.pop())&&!((se?S(ae,Wt):ae.nodeType===1)&&++mt&&($r&&(Te=ae[q]||(ae[q]={}),Te[w]=[U,mt]),ae===te)););return mt-=$,mt===j||mt%j===0&&mt/j>=0}}},PSEUDO:function(w,P){var F,j=u.pseudos[w]||u.setFilters[w.toLowerCase()]||Pe.error("unsupported pseudo: "+w);return j[q]?j(P):j.length>1?(F=[w,w,"",P],u.setFilters.hasOwnProperty(w.toLowerCase())?Ot(function($,J){for(var ee,se=j($,P),te=se.length;te--;)ee=_.call($,se[te]),$[ee]=!(J[ee]=se[te])}):function($){return j($,0,F)}):j}},pseudos:{not:Ot(function(w){var P=[],F=[],j=la(w.replace(We,"$1"));return j[q]?Ot(function($,J,ee,se){for(var te,ve=j($,null,se,[]),le=$.length;le--;)(te=ve[le])&&($[le]=!(J[le]=te))}):function($,J,ee){return P[0]=$,j(P,null,ee,F),P[0]=null,!F.pop()}}),has:Ot(function(w){return function(P){return Pe(w,P).length>0}}),contains:Ot(function(w){return w=w.replace(Et,fn),function(P){return(P.textContent||l.text(P)).indexOf(w)>-1}}),lang:Ot(function(w){return Le.test(w||"")||Pe.error("unsupported lang: "+w),w=w.replace(Et,fn).toLowerCase(),function(P){var F;do if(F=I?P.lang:P.getAttribute("xml:lang")||P.getAttribute("lang"))return F=F.toLowerCase(),F===w||F.indexOf(w+"-")===0;while((P=P.parentNode)&&P.nodeType===1);return!1}}),target:function(w){var P=e.location&&e.location.hash;return P&&P.slice(1)===w.id},root:function(w){return w===R},focus:function(w){return w===Lf()&&v.hasFocus()&&!!(w.type||w.href||~w.tabIndex)},enabled:Uu(!1),disabled:Uu(!0),checked:function(w){return S(w,"input")&&!!w.checked||S(w,"option")&&!!w.selected},selected:function(w){return w.parentNode&&w.parentNode.selectedIndex,w.selected===!0},empty:function(w){for(w=w.firstChild;w;w=w.nextSibling)if(w.nodeType<6)return!1;return!0},parent:function(w){return!u.pseudos.empty(w)},header:function(w){return it.test(w.nodeName)},input:function(w){return ct.test(w.nodeName)},button:function(w){return S(w,"input")&&w.type==="button"||S(w,"button")},text:function(w){var P;return S(w,"input")&&w.type==="text"&&((P=w.getAttribute("type"))==null||P.toLowerCase()==="text")},first:_r(function(){return[0]}),last:_r(function(w,P){return[P-1]}),eq:_r(function(w,P,F){return[F<0?F+P:F]}),even:_r(function(w,P){for(var F=0;F<P;F+=2)w.push(F);return w}),odd:_r(function(w,P){for(var F=1;F<P;F+=2)w.push(F);return w}),lt:_r(function(w,P,F){var j;for(F<0?j=F+P:F>P?j=P:j=F;--j>=0;)w.push(j);return w}),gt:_r(function(w,P,F){for(var j=F<0?F+P:F;++j<P;)w.push(j);return w})}},u.pseudos.nth=u.pseudos.eq;for(s in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})u.pseudos[s]=Mf(s);for(s in{submit:!0,reset:!0})u.pseudos[s]=Ff(s);function ju(){}ju.prototype=u.filters=u.pseudos,u.setFilters=new ju;function Ki(w,P){var F,j,$,J,ee,se,te,ve=_e[w+" "];if(ve)return P?0:ve.slice(0);for(ee=w,se=[],te=u.preFilter;ee;){(!F||(j=z.exec(ee)))&&(j&&(ee=ee.slice(j[0].length)||ee),se.push($=[])),F=!1,(j=fe.exec(ee))&&(F=j.shift(),$.push({value:F,type:j[0].replace(We," ")}),ee=ee.slice(F.length));for(J in u.filter)(j=qe[J].exec(ee))&&(!te[J]||(j=te[J](j)))&&(F=j.shift(),$.push({value:F,type:J,matches:j}),ee=ee.slice(F.length));if(!F)break}return P?ee.length:ee?Pe.error(w):_e(w,se).slice(0)}function Ks(w){for(var P=0,F=w.length,j="";P<F;P++)j+=w[P].value;return j}function Qs(w,P,F){var j=P.dir,$=P.next,J=$||j,ee=F&&J==="parentNode",se=Q++;return P.first?function(te,ve,le){for(;te=te[j];)if(te.nodeType===1||ee)return w(te,ve,le);return!1}:function(te,ve,le){var de,Te,ae=[U,se];if(le){for(;te=te[j];)if((te.nodeType===1||ee)&&w(te,ve,le))return!0}else for(;te=te[j];)if(te.nodeType===1||ee)if(Te=te[q]||(te[q]={}),$&&S(te,$))te=te[j]||te;else{if((de=Te[J])&&de[0]===U&&de[1]===se)return ae[2]=de[2];if(Te[J]=ae,ae[2]=w(te,ve,le))return!0}return!1}}function aa(w){return w.length>1?function(P,F,j){for(var $=w.length;$--;)if(!w[$](P,F,j))return!1;return!0}:w[0]}function Uf(w,P,F){for(var j=0,$=P.length;j<$;j++)Pe(w,P[j],F);return F}function Xs(w,P,F,j,$){for(var J,ee=[],se=0,te=w.length,ve=P!=null;se<te;se++)(J=w[se])&&(!F||F(J,j,$))&&(ee.push(J),ve&&P.push(se));return ee}function ua(w,P,F,j,$,J){return j&&!j[q]&&(j=ua(j)),$&&!$[q]&&($=ua($,J)),Ot(function(ee,se,te,ve){var le,de,Te,ae,De=[],yt=[],lt=se.length,St=ee||Uf(P||"*",te.nodeType?[te]:te,[]),Wt=w&&(ee||!P)?Xs(St,De,w,te,ve):St;if(F?(ae=$||(ee?w:lt||j)?[]:se,F(Wt,ae,te,ve)):ae=Wt,j)for(le=Xs(ae,yt),j(le,[],te,ve),de=le.length;de--;)(Te=le[de])&&(ae[yt[de]]=!(Wt[yt[de]]=Te));if(ee){if($||w){if($){for(le=[],de=ae.length;de--;)(Te=ae[de])&&le.push(Wt[de]=Te);$(null,ae=[],le,ve)}for(de=ae.length;de--;)(Te=ae[de])&&(le=$?_.call(ee,Te):De[de])>-1&&(ee[le]=!(se[le]=Te))}}else ae=Xs(ae===se?ae.splice(lt,ae.length):ae),$?$(null,se,ae,ve):y.apply(se,ae)})}function ca(w){for(var P,F,j,$=w.length,J=u.relative[w[0].type],ee=J||u.relative[" "],se=J?1:0,te=Qs(function(de){return de===P},ee,!0),ve=Qs(function(de){return _.call(P,de)>-1},ee,!0),le=[function(de,Te,ae){var De=!J&&(ae||Te!=h)||((P=Te).nodeType?te(de,Te,ae):ve(de,Te,ae));return P=null,De}];se<$;se++)if(F=u.relative[w[se].type])le=[Qs(aa(le),F)];else{if(F=u.filter[w[se].type].apply(null,w[se].matches),F[q]){for(j=++se;j<$&&!u.relative[w[j].type];j++);return ua(se>1&&aa(le),se>1&&Ks(w.slice(0,se-1).concat({value:w[se-2].type===" "?"*":""})).replace(We,"$1"),F,se<j&&ca(w.slice(se,j)),j<$&&ca(w=w.slice(j)),j<$&&Ks(w))}le.push(F)}return aa(le)}function jf(w,P){var F=P.length>0,j=w.length>0,$=function(J,ee,se,te,ve){var le,de,Te,ae=0,De="0",yt=J&&[],lt=[],St=h,Wt=J||j&&u.find.TAG("*",ve),$r=U+=St==null?1:Math.random()||.1,mt=Wt.length;for(ve&&(h=ee==v||ee||ve);De!==mt&&(le=Wt[De])!=null;De++){if(j&&le){for(de=0,!ee&&le.ownerDocument!=v&&(Fn(le),se=!I);Te=w[de++];)if(Te(le,ee||v,se)){y.call(te,le);break}ve&&(U=$r)}F&&((le=!Te&&le)&&ae--,J&&yt.push(le))}if(ae+=De,F&&De!==ae){for(de=0;Te=P[de++];)Te(yt,lt,ee,se);if(J){if(ae>0)for(;De--;)yt[De]||lt[De]||(lt[De]=x.call(te));lt=Xs(lt)}y.apply(te,lt),ve&&!J&&lt.length>0&&ae+P.length>1&&l.uniqueSort(te)}return ve&&(U=$r,h=St),yt};return F?Ot($):$}function la(w,P){var F,j=[],$=[],J=me[w+" "];if(!J){for(P||(P=Ki(w)),F=P.length;F--;)J=ca(P[F]),J[q]?j.push(J):$.push(J);J=me(w,jf($,j)),J.selector=w}return J}function Bu(w,P,F,j){var $,J,ee,se,te,ve=typeof w=="function"&&w,le=!j&&Ki(w=ve.selector||w);if(F=F||[],le.length===1){if(J=le[0]=le[0].slice(0),J.length>2&&(ee=J[0]).type==="ID"&&P.nodeType===9&&I&&u.relative[J[1].type]){if(P=(u.find.ID(ee.matches[0].replace(Et,fn),P)||[])[0],P)ve&&(P=P.parentNode);else return F;w=w.slice(J.shift().value.length)}for($=qe.needsContext.test(w)?0:J.length;$--&&(ee=J[$],!u.relative[se=ee.type]);)if((te=u.find[se])&&(j=te(ee.matches[0].replace(Et,fn),Mn.test(J[0].type)&&oa(P.parentNode)||P))){if(J.splice($,1),w=j.length&&Ks(J),!w)return y.apply(F,j),F;break}}return(ve||la(w,le))(j,P,!I,F,!P||Mn.test(w)&&oa(P.parentNode)||P),F}W.sortStable=q.split("").sort(o).join("")===q,Fn(),W.sortDetached=qr(function(w){return w.compareDocumentPosition(v.createElement("fieldset"))&1}),l.find=Pe,l.expr[":"]=l.expr.pseudos,l.unique=l.uniqueSort,Pe.compile=la,Pe.select=Bu,Pe.setDocument=Fn,Pe.tokenize=Ki,Pe.escape=l.escapeSelector,Pe.getText=l.text,Pe.isXML=l.isXMLDoc,Pe.selectors=l.expr,Pe.support=l.support,Pe.uniqueSort=l.uniqueSort})();var kt=function(s,u,h){for(var d=[],m=h!==void 0;(s=s[u])&&s.nodeType!==9;)if(s.nodeType===1){if(m&&l(s).is(h))break;d.push(s)}return d},Cs=function(s,u){for(var h=[];s;s=s.nextSibling)s.nodeType===1&&s!==u&&h.push(s);return h},gi=l.expr.match.needsContext,mi=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function Nr(s,u,h){return X(u)?l.grep(s,function(d,m){return!!u.call(d,m,d)!==h}):u.nodeType?l.grep(s,function(d){return d===u!==h}):typeof u!="string"?l.grep(s,function(d){return _.call(u,d)>-1!==h}):l.filter(u,s,h)}l.filter=function(s,u,h){var d=u[0];return h&&(s=":not("+s+")"),u.length===1&&d.nodeType===1?l.find.matchesSelector(d,s)?[d]:[]:l.find.matches(s,l.grep(u,function(m){return m.nodeType===1}))},l.fn.extend({find:function(s){var u,h,d=this.length,m=this;if(typeof s!="string")return this.pushStack(l(s).filter(function(){for(u=0;u<d;u++)if(l.contains(m[u],this))return!0}));for(h=this.pushStack([]),u=0;u<d;u++)l.find(s,m[u],h);return d>1?l.uniqueSort(h):h},filter:function(s){return this.pushStack(Nr(this,s||[],!1))},not:function(s){return this.pushStack(Nr(this,s||[],!0))},is:function(s){return!!Nr(this,typeof s=="string"&&gi.test(s)?l(s):s||[],!1).length}});var nr,yi=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,_i=l.fn.init=function(s,u,h){var d,m;if(!s)return this;if(h=h||nr,typeof s=="string")if(s[0]==="<"&&s[s.length-1]===">"&&s.length>=3?d=[null,s,null]:d=yi.exec(s),d&&(d[1]||!u))if(d[1]){if(u=u instanceof l?u[0]:u,l.merge(this,l.parseHTML(d[1],u&&u.nodeType?u.ownerDocument||u:Y,!0)),mi.test(d[1])&&l.isPlainObject(u))for(d in u)X(this[d])?this[d](u[d]):this.attr(d,u[d]);return this}else return m=Y.getElementById(d[2]),m&&(this[0]=m,this.length=1),this;else return!u||u.jquery?(u||h).find(s):this.constructor(u).find(s);else{if(s.nodeType)return this[0]=s,this.length=1,this;if(X(s))return h.ready!==void 0?h.ready(s):s(l)}return l.makeArray(s,this)};_i.prototype=l.fn,nr=l(Y);var vi=/^(?:parents|prev(?:Until|All))/,Ti={children:!0,contents:!0,next:!0,prev:!0};l.fn.extend({has:function(s){var u=l(s,this),h=u.length;return this.filter(function(){for(var d=0;d<h;d++)if(l.contains(this,u[d]))return!0})},closest:function(s,u){var h,d=0,m=this.length,y=[],v=typeof s!="string"&&l(s);if(!gi.test(s)){for(;d<m;d++)for(h=this[d];h&&h!==u;h=h.parentNode)if(h.nodeType<11&&(v?v.index(h)>-1:h.nodeType===1&&l.find.matchesSelector(h,s))){y.push(h);break}}return this.pushStack(y.length>1?l.uniqueSort(y):y)},index:function(s){return s?typeof s=="string"?_.call(l(s),this[0]):_.call(this,s.jquery?s[0]:s):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(s,u){return this.pushStack(l.uniqueSort(l.merge(this.get(),l(s,u))))},addBack:function(s){return this.add(s==null?this.prevObject:this.prevObject.filter(s))}});function Ei(s,u){for(;(s=s[u])&&s.nodeType!==1;);return s}l.each({parent:function(s){var u=s.parentNode;return u&&u.nodeType!==11?u:null},parents:function(s){return kt(s,"parentNode")},parentsUntil:function(s,u,h){return kt(s,"parentNode",h)},next:function(s){return Ei(s,"nextSibling")},prev:function(s){return Ei(s,"previousSibling")},nextAll:function(s){return kt(s,"nextSibling")},prevAll:function(s){return kt(s,"previousSibling")},nextUntil:function(s,u,h){return kt(s,"nextSibling",h)},prevUntil:function(s,u,h){return kt(s,"previousSibling",h)},siblings:function(s){return Cs((s.parentNode||{}).firstChild,s)},children:function(s){return Cs(s.firstChild)},contents:function(s){return s.contentDocument!=null&&i(s.contentDocument)?s.contentDocument:(S(s,"template")&&(s=s.content||s),l.merge([],s.childNodes))}},function(s,u){l.fn[s]=function(h,d){var m=l.map(this,u,h);return s.slice(-5)!=="Until"&&(d=h),d&&typeof d=="string"&&(m=l.filter(d,m)),this.length>1&&(Ti[s]||l.uniqueSort(m),vi.test(s)&&m.reverse()),this.pushStack(m)}});var wt=/[^\x20\t\r\n\f]+/g;function Yo(s){var u={};return l.each(s.match(wt)||[],function(h,d){u[d]=!0}),u}l.Callbacks=function(s){s=typeof s=="string"?Yo(s):l.extend({},s);var u,h,d,m,y=[],v=[],R=-1,I=function(){for(m=m||s.once,d=u=!0;v.length;R=-1)for(h=v.shift();++R<y.length;)y[R].apply(h[0],h[1])===!1&&s.stopOnFalse&&(R=y.length,h=!1);s.memory||(h=!1),u=!1,m&&(h?y=[]:y="")},N={add:function(){return y&&(h&&!u&&(R=y.length-1,v.push(h)),(function B(q){l.each(q,function(U,Q){X(Q)?(!s.unique||!N.has(Q))&&y.push(Q):Q&&Q.length&&je(Q)!=="string"&&B(Q)})})(arguments),h&&!u&&I()),this},remove:function(){return l.each(arguments,function(B,q){for(var U;(U=l.inArray(q,y,U))>-1;)y.splice(U,1),U<=R&&R--}),this},has:function(B){return B?l.inArray(B,y)>-1:y.length>0},empty:function(){return y&&(y=[]),this},disable:function(){return m=v=[],y=h="",this},disabled:function(){return!y},lock:function(){return m=v=[],!h&&!u&&(y=h=""),this},locked:function(){return!!m},fireWith:function(B,q){return m||(q=q||[],q=[B,q.slice?q.slice():q],v.push(q),u||I()),this},fire:function(){return N.fireWith(this,arguments),this},fired:function(){return!!d}};return N};function on(s){return s}function In(s){throw s}function wi(s,u,h,d){var m;try{s&&X(m=s.promise)?m.call(s).done(u).fail(h):s&&X(m=s.then)?m.call(s,u,h):u.apply(void 0,[s].slice(d))}catch(y){h.apply(void 0,[y])}}l.extend({Deferred:function(s){var u=[["notify","progress",l.Callbacks("memory"),l.Callbacks("memory"),2],["resolve","done",l.Callbacks("once memory"),l.Callbacks("once memory"),0,"resolved"],["reject","fail",l.Callbacks("once memory"),l.Callbacks("once memory"),1,"rejected"]],h="pending",d={state:function(){return h},always:function(){return m.done(arguments).fail(arguments),this},catch:function(y){return d.then(null,y)},pipe:function(){var y=arguments;return l.Deferred(function(v){l.each(u,function(R,I){var N=X(y[I[4]])&&y[I[4]];m[I[1]](function(){var B=N&&N.apply(this,arguments);B&&X(B.promise)?B.promise().progress(v.notify).done(v.resolve).fail(v.reject):v[I[0]+"With"](this,N?[B]:arguments)})}),y=null}).promise()},then:function(y,v,R){var I=0;function N(B,q,U,Q){return function(){var ie=this,_e=arguments,me=function(){var o,f;if(!(B<I)){if(o=U.apply(ie,_e),o===q.promise())throw new TypeError("Thenable self-resolution");f=o&&(typeof o=="object"||typeof o=="function")&&o.then,X(f)?Q?f.call(o,N(I,q,on,Q),N(I,q,In,Q)):(I++,f.call(o,N(I,q,on,Q),N(I,q,In,Q),N(I,q,on,q.notifyWith))):(U!==on&&(ie=void 0,_e=[o]),(Q||q.resolveWith)(ie,_e))}},Oe=Q?me:function(){try{me()}catch(o){l.Deferred.exceptionHook&&l.Deferred.exceptionHook(o,Oe.error),B+1>=I&&(U!==In&&(ie=void 0,_e=[o]),q.rejectWith(ie,_e))}};B?Oe():(l.Deferred.getErrorHook?Oe.error=l.Deferred.getErrorHook():l.Deferred.getStackHook&&(Oe.error=l.Deferred.getStackHook()),e.setTimeout(Oe))}}return l.Deferred(function(B){u[0][3].add(N(0,B,X(R)?R:on,B.notifyWith)),u[1][3].add(N(0,B,X(y)?y:on)),u[2][3].add(N(0,B,X(v)?v:In))}).promise()},promise:function(y){return y!=null?l.extend(y,d):d}},m={};return l.each(u,function(y,v){var R=v[2],I=v[5];d[v[1]]=R.add,I&&R.add(function(){h=I},u[3-y][2].disable,u[3-y][3].disable,u[0][2].lock,u[0][3].lock),R.add(v[3].fire),m[v[0]]=function(){return m[v[0]+"With"](this===m?void 0:this,arguments),this},m[v[0]+"With"]=R.fireWith}),d.promise(m),s&&s.call(m,m),m},when:function(s){var u=arguments.length,h=u,d=Array(h),m=a.call(arguments),y=l.Deferred(),v=function(R){return function(I){d[R]=this,m[R]=arguments.length>1?a.call(arguments):I,--u||y.resolveWith(d,m)}};if(u<=1&&(wi(s,y.done(v(h)).resolve,y.reject,!u),y.state()==="pending"||X(m[h]&&m[h].then)))return y.then();for(;h--;)wi(m[h],v(h),y.reject);return y.promise()}});var Zo=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;l.Deferred.exceptionHook=function(s,u){e.console&&e.console.warn&&s&&Zo.test(s.name)&&e.console.warn("jQuery.Deferred exception: "+s.message,s.stack,u)},l.readyException=function(s){e.setTimeout(function(){throw s})};var rr=l.Deferred();l.fn.ready=function(s){return rr.then(s).catch(function(u){l.readyException(u)}),this},l.extend({isReady:!1,readyWait:1,ready:function(s){(s===!0?--l.readyWait:l.isReady)||(l.isReady=!0,!(s!==!0&&--l.readyWait>0)&&rr.resolveWith(Y,[l]))}}),l.ready.then=rr.then;function An(){Y.removeEventListener("DOMContentLoaded",An),e.removeEventListener("load",An),l.ready()}Y.readyState==="complete"||Y.readyState!=="loading"&&!Y.documentElement.doScroll?e.setTimeout(l.ready):(Y.addEventListener("DOMContentLoaded",An),e.addEventListener("load",An));var It=function(s,u,h,d,m,y,v){var R=0,I=s.length,N=h==null;if(je(h)==="object"){m=!0;for(R in h)It(s,u,R,h[R],!0,y,v)}else if(d!==void 0&&(m=!0,X(d)||(v=!0),N&&(v?(u.call(s,d),u=null):(N=u,u=function(B,q,U){return N.call(l(B),U)})),u))for(;R<I;R++)u(s[R],h,v?d:d.call(s[R],R,u(s[R],h)));return m?s:N?u.call(s):I?u(s[0],h):y},Je=/^-ms-/,nt=/-([a-z])/g;function xr(s,u){return u.toUpperCase()}function At(s){return s.replace(Je,"ms-").replace(nt,xr)}var bn=function(s){return s.nodeType===1||s.nodeType===9||!+s.nodeType};function ir(){this.expando=l.expando+ir.uid++}ir.uid=1,ir.prototype={cache:function(s){var u=s[this.expando];return u||(u={},bn(s)&&(s.nodeType?s[this.expando]=u:Object.defineProperty(s,this.expando,{value:u,configurable:!0}))),u},set:function(s,u,h){var d,m=this.cache(s);if(typeof u=="string")m[At(u)]=h;else for(d in u)m[At(d)]=u[d];return m},get:function(s,u){return u===void 0?this.cache(s):s[this.expando]&&s[this.expando][At(u)]},access:function(s,u,h){return u===void 0||u&&typeof u=="string"&&h===void 0?this.get(s,u):(this.set(s,u,h),h!==void 0?h:u)},remove:function(s,u){var h,d=s[this.expando];if(d!==void 0){if(u!==void 0)for(Array.isArray(u)?u=u.map(At):(u=At(u),u=u in d?[u]:u.match(wt)||[]),h=u.length;h--;)delete d[u[h]];(u===void 0||l.isEmptyObject(d))&&(s.nodeType?s[this.expando]=void 0:delete s[this.expando])}},hasData:function(s){var u=s[this.expando];return u!==void 0&&!l.isEmptyObject(u)}};var re=new ir,rt=new ir,Rs=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Ii=/[A-Z]/g;function ea(s){return s==="true"?!0:s==="false"?!1:s==="null"?null:s===+s+""?+s:Rs.test(s)?JSON.parse(s):s}function Ps(s,u,h){var d;if(h===void 0&&s.nodeType===1)if(d="data-"+u.replace(Ii,"-$&").toLowerCase(),h=s.getAttribute(d),typeof h=="string"){try{h=ea(h)}catch{}rt.set(s,u,h)}else h=void 0;return h}l.extend({hasData:function(s){return rt.hasData(s)||re.hasData(s)},data:function(s,u,h){return rt.access(s,u,h)},removeData:function(s,u){rt.remove(s,u)},_data:function(s,u,h){return re.access(s,u,h)},_removeData:function(s,u){re.remove(s,u)}}),l.fn.extend({data:function(s,u){var h,d,m,y=this[0],v=y&&y.attributes;if(s===void 0){if(this.length&&(m=rt.get(y),y.nodeType===1&&!re.get(y,"hasDataAttrs"))){for(h=v.length;h--;)v[h]&&(d=v[h].name,d.indexOf("data-")===0&&(d=At(d.slice(5)),Ps(y,d,m[d])));re.set(y,"hasDataAttrs",!0)}return m}return typeof s=="object"?this.each(function(){rt.set(this,s)}):It(this,function(R){var I;if(y&&R===void 0)return I=rt.get(y,s),I!==void 0||(I=Ps(y,s),I!==void 0)?I:void 0;this.each(function(){rt.set(this,s,R)})},null,u,arguments.length>1,null,!0)},removeData:function(s){return this.each(function(){rt.remove(this,s)})}}),l.extend({queue:function(s,u,h){var d;if(s)return u=(u||"fx")+"queue",d=re.get(s,u),h&&(!d||Array.isArray(h)?d=re.access(s,u,l.makeArray(h)):d.push(h)),d||[]},dequeue:function(s,u){u=u||"fx";var h=l.queue(s,u),d=h.length,m=h.shift(),y=l._queueHooks(s,u),v=function(){l.dequeue(s,u)};m==="inprogress"&&(m=h.shift(),d--),m&&(u==="fx"&&h.unshift("inprogress"),delete y.stop,m.call(s,v,y)),!d&&y&&y.empty.fire()},_queueHooks:function(s,u){var h=u+"queueHooks";return re.get(s,h)||re.access(s,h,{empty:l.Callbacks("once memory").add(function(){re.remove(s,[u+"queue",h])})})}}),l.fn.extend({queue:function(s,u){var h=2;return typeof s!="string"&&(u=s,s="fx",h--),arguments.length<h?l.queue(this[0],s):u===void 0?this:this.each(function(){var d=l.queue(this,s,u);l._queueHooks(this,s),s==="fx"&&d[0]!=="inprogress"&&l.dequeue(this,s)})},dequeue:function(s){return this.each(function(){l.dequeue(this,s)})},clearQueue:function(s){return this.queue(s||"fx",[])},promise:function(s,u){var h,d=1,m=l.Deferred(),y=this,v=this.length,R=function(){--d||m.resolveWith(y,[y])};for(typeof s!="string"&&(u=s,s=void 0),s=s||"fx";v--;)h=re.get(y[v],s+"queueHooks"),h&&h.empty&&(d++,h.empty.add(R));return R(),m.promise(u)}});var Ai=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Sn=new RegExp("^(?:([+-])=|)("+Ai+")([a-z%]*)$","i"),gt=["Top","Right","Bottom","Left"],Dt=Y.documentElement,Ft=function(s){return l.contains(s.ownerDocument,s)},an={composed:!0};Dt.getRootNode&&(Ft=function(s){return l.contains(s.ownerDocument,s)||s.getRootNode(an)===s.ownerDocument});var sr=function(s,u){return s=u||s,s.style.display==="none"||s.style.display===""&&Ft(s)&&l.css(s,"display")==="none"};function or(s,u,h,d){var m,y,v=20,R=d?function(){return d.cur()}:function(){return l.css(s,u,"")},I=R(),N=h&&h[3]||(l.cssNumber[u]?"":"px"),B=s.nodeType&&(l.cssNumber[u]||N!=="px"&&+I)&&Sn.exec(l.css(s,u));if(B&&B[3]!==N){for(I=I/2,N=N||B[3],B=+I||1;v--;)l.style(s,u,B+N),(1-y)*(1-(y=R()/I||.5))<=0&&(v=0),B=B/y;B=B*2,l.style(s,u,B+N),h=h||[]}return h&&(B=+B||+I||0,m=h[1]?B+(h[1]+1)*h[2]:+h[2],d&&(d.unit=N,d.start=B,d.end=m)),m}var bi={};function ar(s){var u,h=s.ownerDocument,d=s.nodeName,m=bi[d];return m||(u=h.body.appendChild(h.createElement(d)),m=l.css(u,"display"),u.parentNode.removeChild(u),m==="none"&&(m="block"),bi[d]=m,m)}function un(s,u){for(var h,d,m=[],y=0,v=s.length;y<v;y++)d=s[y],d.style&&(h=d.style.display,u?(h==="none"&&(m[y]=re.get(d,"display")||null,m[y]||(d.style.display="")),d.style.display===""&&sr(d)&&(m[y]=ar(d))):h!=="none"&&(m[y]="none",re.set(d,"display",h)));for(y=0;y<v;y++)m[y]!=null&&(s[y].style.display=m[y]);return s}l.fn.extend({show:function(){return un(this,!0)},hide:function(){return un(this)},toggle:function(s){return typeof s=="boolean"?s?this.show():this.hide():this.each(function(){sr(this)?l(this).show():l(this).hide()})}});var Be=/^(?:checkbox|radio)$/i,Si=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,Cn=/^$|^module$|\/(?:java|ecma)script/i;(function(){var s=Y.createDocumentFragment(),u=s.appendChild(Y.createElement("div")),h=Y.createElement("input");h.setAttribute("type","radio"),h.setAttribute("checked","checked"),h.setAttribute("name","t"),u.appendChild(h),W.checkClone=u.cloneNode(!0).cloneNode(!0).lastChild.checked,u.innerHTML="<textarea>x</textarea>",W.noCloneChecked=!!u.cloneNode(!0).lastChild.defaultValue,u.innerHTML="<option></option>",W.option=!!u.lastChild})();var Ye={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Ye.tbody=Ye.tfoot=Ye.colgroup=Ye.caption=Ye.thead,Ye.th=Ye.td,W.option||(Ye.optgroup=Ye.option=[1,"<select multiple='multiple'>","</select>"]);function ut(s,u){var h;return typeof s.getElementsByTagName<"u"?h=s.getElementsByTagName(u||"*"):typeof s.querySelectorAll<"u"?h=s.querySelectorAll(u||"*"):h=[],u===void 0||u&&S(s,u)?l.merge([s],h):h}function Ci(s,u){for(var h=0,d=s.length;h<d;h++)re.set(s[h],"globalEval",!u||re.get(u[h],"globalEval"))}var Rn=/<|&#?\w+;/;function ks(s,u,h,d,m){for(var y,v,R,I,N,B,q=u.createDocumentFragment(),U=[],Q=0,ie=s.length;Q<ie;Q++)if(y=s[Q],y||y===0)if(je(y)==="object")l.merge(U,y.nodeType?[y]:y);else if(!Rn.test(y))U.push(u.createTextNode(y));else{for(v=v||q.appendChild(u.createElement("div")),R=(Si.exec(y)||["",""])[1].toLowerCase(),I=Ye[R]||Ye._default,v.innerHTML=I[1]+l.htmlPrefilter(y)+I[2],B=I[0];B--;)v=v.lastChild;l.merge(U,v.childNodes),v=q.firstChild,v.textContent=""}for(q.textContent="",Q=0;y=U[Q++];){if(d&&l.inArray(y,d)>-1){m&&m.push(y);continue}if(N=Ft(y),v=ut(q.appendChild(y),"script"),N&&Ci(v),h)for(B=0;y=v[B++];)Cn.test(y.type||"")&&h.push(y)}return q}var Ds=/^([^.]*)(?:\.(.+)|)/;function Nt(){return!0}function cn(){return!1}function Vr(s,u,h,d,m,y){var v,R;if(typeof u=="object"){typeof h!="string"&&(d=d||h,h=void 0);for(R in u)Vr(s,R,h,d,u[R],y);return s}if(d==null&&m==null?(m=h,d=h=void 0):m==null&&(typeof h=="string"?(m=d,d=void 0):(m=d,d=h,h=void 0)),m===!1)m=cn;else if(!m)return s;return y===1&&(v=m,m=function(I){return l().off(I),v.apply(this,arguments)},m.guid=v.guid||(v.guid=l.guid++)),s.each(function(){l.event.add(this,u,m,d,h)})}l.event={global:{},add:function(s,u,h,d,m){var y,v,R,I,N,B,q,U,Q,ie,_e,me=re.get(s);if(bn(s))for(h.handler&&(y=h,h=y.handler,m=y.selector),m&&l.find.matchesSelector(Dt,m),h.guid||(h.guid=l.guid++),(I=me.events)||(I=me.events=Object.create(null)),(v=me.handle)||(v=me.handle=function(Oe){return typeof l<"u"&&l.event.triggered!==Oe.type?l.event.dispatch.apply(s,arguments):void 0}),u=(u||"").match(wt)||[""],N=u.length;N--;)R=Ds.exec(u[N])||[],Q=_e=R[1],ie=(R[2]||"").split(".").sort(),Q&&(q=l.event.special[Q]||{},Q=(m?q.delegateType:q.bindType)||Q,q=l.event.special[Q]||{},B=l.extend({type:Q,origType:_e,data:d,handler:h,guid:h.guid,selector:m,needsContext:m&&l.expr.match.needsContext.test(m),namespace:ie.join(".")},y),(U=I[Q])||(U=I[Q]=[],U.delegateCount=0,(!q.setup||q.setup.call(s,d,ie,v)===!1)&&s.addEventListener&&s.addEventListener(Q,v)),q.add&&(q.add.call(s,B),B.handler.guid||(B.handler.guid=h.guid)),m?U.splice(U.delegateCount++,0,B):U.push(B),l.event.global[Q]=!0)},remove:function(s,u,h,d,m){var y,v,R,I,N,B,q,U,Q,ie,_e,me=re.hasData(s)&&re.get(s);if(!(!me||!(I=me.events))){for(u=(u||"").match(wt)||[""],N=u.length;N--;){if(R=Ds.exec(u[N])||[],Q=_e=R[1],ie=(R[2]||"").split(".").sort(),!Q){for(Q in I)l.event.remove(s,Q+u[N],h,d,!0);continue}for(q=l.event.special[Q]||{},Q=(d?q.delegateType:q.bindType)||Q,U=I[Q]||[],R=R[2]&&new RegExp("(^|\\.)"+ie.join("\\.(?:.*\\.|)")+"(\\.|$)"),v=y=U.length;y--;)B=U[y],(m||_e===B.origType)&&(!h||h.guid===B.guid)&&(!R||R.test(B.namespace))&&(!d||d===B.selector||d==="**"&&B.selector)&&(U.splice(y,1),B.selector&&U.delegateCount--,q.remove&&q.remove.call(s,B));v&&!U.length&&((!q.teardown||q.teardown.call(s,ie,me.handle)===!1)&&l.removeEvent(s,Q,me.handle),delete I[Q])}l.isEmptyObject(I)&&re.remove(s,"handle events")}},dispatch:function(s){var u,h,d,m,y,v,R=new Array(arguments.length),I=l.event.fix(s),N=(re.get(this,"events")||Object.create(null))[I.type]||[],B=l.event.special[I.type]||{};for(R[0]=I,u=1;u<arguments.length;u++)R[u]=arguments[u];if(I.delegateTarget=this,!(B.preDispatch&&B.preDispatch.call(this,I)===!1)){for(v=l.event.handlers.call(this,I,N),u=0;(m=v[u++])&&!I.isPropagationStopped();)for(I.currentTarget=m.elem,h=0;(y=m.handlers[h++])&&!I.isImmediatePropagationStopped();)(!I.rnamespace||y.namespace===!1||I.rnamespace.test(y.namespace))&&(I.handleObj=y,I.data=y.data,d=((l.event.special[y.origType]||{}).handle||y.handler).apply(m.elem,R),d!==void 0&&(I.result=d)===!1&&(I.preventDefault(),I.stopPropagation()));return B.postDispatch&&B.postDispatch.call(this,I),I.result}},handlers:function(s,u){var h,d,m,y,v,R=[],I=u.delegateCount,N=s.target;if(I&&N.nodeType&&!(s.type==="click"&&s.button>=1)){for(;N!==this;N=N.parentNode||this)if(N.nodeType===1&&!(s.type==="click"&&N.disabled===!0)){for(y=[],v={},h=0;h<I;h++)d=u[h],m=d.selector+" ",v[m]===void 0&&(v[m]=d.needsContext?l(m,this).index(N)>-1:l.find(m,this,null,[N]).length),v[m]&&y.push(d);y.length&&R.push({elem:N,handlers:y})}}return N=this,I<u.length&&R.push({elem:N,handlers:u.slice(I)}),R},addProp:function(s,u){Object.defineProperty(l.Event.prototype,s,{enumerable:!0,configurable:!0,get:X(u)?function(){if(this.originalEvent)return u(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[s]},set:function(h){Object.defineProperty(this,s,{enumerable:!0,configurable:!0,writable:!0,value:h})}})},fix:function(s){return s[l.expando]?s:new l.Event(s)},special:{load:{noBubble:!0},click:{setup:function(s){var u=this||s;return Be.test(u.type)&&u.click&&S(u,"input")&&Pn(u,"click",!0),!1},trigger:function(s){var u=this||s;return Be.test(u.type)&&u.click&&S(u,"input")&&Pn(u,"click"),!0},_default:function(s){var u=s.target;return Be.test(u.type)&&u.click&&S(u,"input")&&re.get(u,"click")||S(u,"a")}},beforeunload:{postDispatch:function(s){s.result!==void 0&&s.originalEvent&&(s.originalEvent.returnValue=s.result)}}}};function Pn(s,u,h){if(!h){re.get(s,u)===void 0&&l.event.add(s,u,Nt);return}re.set(s,u,!1),l.event.add(s,u,{namespace:!1,handler:function(d){var m,y=re.get(this,u);if(d.isTrigger&1&&this[u]){if(y)(l.event.special[u]||{}).delegateType&&d.stopPropagation();else if(y=a.call(arguments),re.set(this,u,y),this[u](),m=re.get(this,u),re.set(this,u,!1),y!==m)return d.stopImmediatePropagation(),d.preventDefault(),m}else y&&(re.set(this,u,l.event.trigger(y[0],y.slice(1),this)),d.stopPropagation(),d.isImmediatePropagationStopped=Nt)}})}l.removeEvent=function(s,u,h){s.removeEventListener&&s.removeEventListener(u,h)},l.Event=function(s,u){if(!(this instanceof l.Event))return new l.Event(s,u);s&&s.type?(this.originalEvent=s,this.type=s.type,this.isDefaultPrevented=s.defaultPrevented||s.defaultPrevented===void 0&&s.returnValue===!1?Nt:cn,this.target=s.target&&s.target.nodeType===3?s.target.parentNode:s.target,this.currentTarget=s.currentTarget,this.relatedTarget=s.relatedTarget):this.type=s,u&&l.extend(this,u),this.timeStamp=s&&s.timeStamp||Date.now(),this[l.expando]=!0},l.Event.prototype={constructor:l.Event,isDefaultPrevented:cn,isPropagationStopped:cn,isImmediatePropagationStopped:cn,isSimulated:!1,preventDefault:function(){var s=this.originalEvent;this.isDefaultPrevented=Nt,s&&!this.isSimulated&&s.preventDefault()},stopPropagation:function(){var s=this.originalEvent;this.isPropagationStopped=Nt,s&&!this.isSimulated&&s.stopPropagation()},stopImmediatePropagation:function(){var s=this.originalEvent;this.isImmediatePropagationStopped=Nt,s&&!this.isSimulated&&s.stopImmediatePropagation(),this.stopPropagation()}},l.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},l.event.addProp),l.each({focus:"focusin",blur:"focusout"},function(s,u){function h(d){if(Y.documentMode){var m=re.get(this,"handle"),y=l.event.fix(d);y.type=d.type==="focusin"?"focus":"blur",y.isSimulated=!0,m(d),y.target===y.currentTarget&&m(y)}else l.event.simulate(u,d.target,l.event.fix(d))}l.event.special[s]={setup:function(){var d;if(Pn(this,s,!0),Y.documentMode)d=re.get(this,u),d||this.addEventListener(u,h),re.set(this,u,(d||0)+1);else return!1},trigger:function(){return Pn(this,s),!0},teardown:function(){var d;if(Y.documentMode)d=re.get(this,u)-1,d?re.set(this,u,d):(this.removeEventListener(u,h),re.remove(this,u));else return!1},_default:function(d){return re.get(d.target,s)},delegateType:u},l.event.special[u]={setup:function(){var d=this.ownerDocument||this.document||this,m=Y.documentMode?this:d,y=re.get(m,u);y||(Y.documentMode?this.addEventListener(u,h):d.addEventListener(s,h,!0)),re.set(m,u,(y||0)+1)},teardown:function(){var d=this.ownerDocument||this.document||this,m=Y.documentMode?this:d,y=re.get(m,u)-1;y?re.set(m,u,y):(Y.documentMode?this.removeEventListener(u,h):d.removeEventListener(s,h,!0),re.remove(m,u))}}}),l.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(s,u){l.event.special[s]={delegateType:u,bindType:u,handle:function(h){var d,m=this,y=h.relatedTarget,v=h.handleObj;return(!y||y!==m&&!l.contains(m,y))&&(h.type=v.origType,d=v.handler.apply(this,arguments),h.type=u),d}}}),l.fn.extend({on:function(s,u,h,d){return Vr(this,s,u,h,d)},one:function(s,u,h,d){return Vr(this,s,u,h,d,1)},off:function(s,u,h){var d,m;if(s&&s.preventDefault&&s.handleObj)return d=s.handleObj,l(s.delegateTarget).off(d.namespace?d.origType+"."+d.namespace:d.origType,d.selector,d.handler),this;if(typeof s=="object"){for(m in s)this.off(m,u,s[m]);return this}return(u===!1||typeof u=="function")&&(h=u,u=void 0),h===!1&&(h=cn),this.each(function(){l.event.remove(this,s,h,u)})}});var ur=/<script|<style|<link/i,ta=/checked\s*(?:[^=]|=\s*.checked.)/i,Ut=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function Ri(s,u){return S(s,"table")&&S(u.nodeType!==11?u:u.firstChild,"tr")&&l(s).children("tbody")[0]||s}function Ns(s){return s.type=(s.getAttribute("type")!==null)+"/"+s.type,s}function Pi(s){return(s.type||"").slice(0,5)==="true/"?s.type=s.type.slice(5):s.removeAttribute("type"),s}function Or(s,u){var h,d,m,y,v,R,I;if(u.nodeType===1){if(re.hasData(s)&&(y=re.get(s),I=y.events,I)){re.remove(u,"handle events");for(m in I)for(h=0,d=I[m].length;h<d;h++)l.event.add(u,m,I[m][h])}rt.hasData(s)&&(v=rt.access(s),R=l.extend({},v),rt.set(u,R))}}function xs(s,u){var h=u.nodeName.toLowerCase();h==="input"&&Be.test(s.type)?u.checked=s.checked:(h==="input"||h==="textarea")&&(u.defaultValue=s.defaultValue)}function kn(s,u,h,d){u=c(u);var m,y,v,R,I,N,B=0,q=s.length,U=q-1,Q=u[0],ie=X(Q);if(ie||q>1&&typeof Q=="string"&&!W.checkClone&&ta.test(Q))return s.each(function(_e){var me=s.eq(_e);ie&&(u[0]=Q.call(this,_e,me.html())),kn(me,u,h,d)});if(q&&(m=ks(u,s[0].ownerDocument,!1,s,d),y=m.firstChild,m.childNodes.length===1&&(m=y),y||d)){for(v=l.map(ut(m,"script"),Ns),R=v.length;B<q;B++)I=m,B!==U&&(I=l.clone(I,!0,!0),R&&l.merge(v,ut(I,"script"))),h.call(s[B],I,B);if(R)for(N=v[v.length-1].ownerDocument,l.map(v,Pi),B=0;B<R;B++)I=v[B],Cn.test(I.type||"")&&!re.access(I,"globalEval")&&l.contains(N,I)&&(I.src&&(I.type||"").toLowerCase()!=="module"?l._evalUrl&&!I.noModule&&l._evalUrl(I.src,{nonce:I.nonce||I.getAttribute("nonce")},N):Se(I.textContent.replace(Ut,""),I,N))}return s}function ki(s,u,h){for(var d,m=u?l.filter(u,s):s,y=0;(d=m[y])!=null;y++)!h&&d.nodeType===1&&l.cleanData(ut(d)),d.parentNode&&(h&&Ft(d)&&Ci(ut(d,"script")),d.parentNode.removeChild(d));return s}l.extend({htmlPrefilter:function(s){return s},clone:function(s,u,h){var d,m,y,v,R=s.cloneNode(!0),I=Ft(s);if(!W.noCloneChecked&&(s.nodeType===1||s.nodeType===11)&&!l.isXMLDoc(s))for(v=ut(R),y=ut(s),d=0,m=y.length;d<m;d++)xs(y[d],v[d]);if(u)if(h)for(y=y||ut(s),v=v||ut(R),d=0,m=y.length;d<m;d++)Or(y[d],v[d]);else Or(s,R);return v=ut(R,"script"),v.length>0&&Ci(v,!I&&ut(s,"script")),R},cleanData:function(s){for(var u,h,d,m=l.event.special,y=0;(h=s[y])!==void 0;y++)if(bn(h)){if(u=h[re.expando]){if(u.events)for(d in u.events)m[d]?l.event.remove(h,d):l.removeEvent(h,d,u.handle);h[re.expando]=void 0}h[rt.expando]&&(h[rt.expando]=void 0)}}}),l.fn.extend({detach:function(s){return ki(this,s,!0)},remove:function(s){return ki(this,s)},text:function(s){return It(this,function(u){return u===void 0?l.text(this):this.empty().each(function(){(this.nodeType===1||this.nodeType===11||this.nodeType===9)&&(this.textContent=u)})},null,s,arguments.length)},append:function(){return kn(this,arguments,function(s){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var u=Ri(this,s);u.appendChild(s)}})},prepend:function(){return kn(this,arguments,function(s){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var u=Ri(this,s);u.insertBefore(s,u.firstChild)}})},before:function(){return kn(this,arguments,function(s){this.parentNode&&this.parentNode.insertBefore(s,this)})},after:function(){return kn(this,arguments,function(s){this.parentNode&&this.parentNode.insertBefore(s,this.nextSibling)})},empty:function(){for(var s,u=0;(s=this[u])!=null;u++)s.nodeType===1&&(l.cleanData(ut(s,!1)),s.textContent="");return this},clone:function(s,u){return s=s??!1,u=u??s,this.map(function(){return l.clone(this,s,u)})},html:function(s){return It(this,function(u){var h=this[0]||{},d=0,m=this.length;if(u===void 0&&h.nodeType===1)return h.innerHTML;if(typeof u=="string"&&!ur.test(u)&&!Ye[(Si.exec(u)||["",""])[1].toLowerCase()]){u=l.htmlPrefilter(u);try{for(;d<m;d++)h=this[d]||{},h.nodeType===1&&(l.cleanData(ut(h,!1)),h.innerHTML=u);h=0}catch{}}h&&this.empty().append(u)},null,s,arguments.length)},replaceWith:function(){var s=[];return kn(this,arguments,function(u){var h=this.parentNode;l.inArray(this,s)<0&&(l.cleanData(ut(this)),h&&h.replaceChild(u,this))},s)}}),l.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(s,u){l.fn[s]=function(h){for(var d,m=[],y=l(h),v=y.length-1,R=0;R<=v;R++)d=R===v?this:this.clone(!0),l(y[R])[u](d),p.apply(m,d.get());return this.pushStack(m)}});var Di=new RegExp("^("+Ai+")(?!px)[a-z%]+$","i"),Dn=/^--/,cr=function(s){var u=s.ownerDocument.defaultView;return(!u||!u.opener)&&(u=e),u.getComputedStyle(s)},Lr=function(s,u,h){var d,m,y={};for(m in u)y[m]=s.style[m],s.style[m]=u[m];d=h.call(s);for(m in u)s.style[m]=y[m];return d},lr=new RegExp(gt.join("|"),"i");(function(){function s(){if(N){I.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",N.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",Dt.appendChild(I).appendChild(N);var B=e.getComputedStyle(N);h=B.top!=="1%",R=u(B.marginLeft)===12,N.style.right="60%",y=u(B.right)===36,d=u(B.width)===36,N.style.position="absolute",m=u(N.offsetWidth/3)===12,Dt.removeChild(I),N=null}}function u(B){return Math.round(parseFloat(B))}var h,d,m,y,v,R,I=Y.createElement("div"),N=Y.createElement("div");N.style&&(N.style.backgroundClip="content-box",N.cloneNode(!0).style.backgroundClip="",W.clearCloneStyle=N.style.backgroundClip==="content-box",l.extend(W,{boxSizingReliable:function(){return s(),d},pixelBoxStyles:function(){return s(),y},pixelPosition:function(){return s(),h},reliableMarginLeft:function(){return s(),R},scrollboxSize:function(){return s(),m},reliableTrDimensions:function(){var B,q,U,Q;return v==null&&(B=Y.createElement("table"),q=Y.createElement("tr"),U=Y.createElement("div"),B.style.cssText="position:absolute;left:-11111px;border-collapse:separate",q.style.cssText="box-sizing:content-box;border:1px solid",q.style.height="1px",U.style.height="9px",U.style.display="block",Dt.appendChild(B).appendChild(q).appendChild(U),Q=e.getComputedStyle(q),v=parseInt(Q.height,10)+parseInt(Q.borderTopWidth,10)+parseInt(Q.borderBottomWidth,10)===q.offsetHeight,Dt.removeChild(B)),v}}))})();function vt(s,u,h){var d,m,y,v,R=Dn.test(u),I=s.style;return h=h||cr(s),h&&(v=h.getPropertyValue(u)||h[u],R&&v&&(v=v.replace(We,"$1")||void 0),v===""&&!Ft(s)&&(v=l.style(s,u)),!W.pixelBoxStyles()&&Di.test(v)&&lr.test(u)&&(d=I.width,m=I.minWidth,y=I.maxWidth,I.minWidth=I.maxWidth=I.width=v,v=h.width,I.width=d,I.minWidth=m,I.maxWidth=y)),v!==void 0?v+"":v}function Mr(s,u){return{get:function(){if(s()){delete this.get;return}return(this.get=u).apply(this,arguments)}}}var Vs=["Webkit","Moz","ms"],Ni=Y.createElement("div").style,xi={};function Os(s){for(var u=s[0].toUpperCase()+s.slice(1),h=Vs.length;h--;)if(s=Vs[h]+u,s in Ni)return s}function hr(s){var u=l.cssProps[s]||xi[s];return u||(s in Ni?s:xi[s]=Os(s)||s)}var Vi=/^(none|table(?!-c[ea]).+)/,Ls={position:"absolute",visibility:"hidden",display:"block"},Oi={letterSpacing:"0",fontWeight:"400"};function Li(s,u,h){var d=Sn.exec(u);return d?Math.max(0,d[2]-(h||0))+(d[3]||"px"):u}function Mi(s,u,h,d,m,y){var v=u==="width"?1:0,R=0,I=0,N=0;if(h===(d?"border":"content"))return 0;for(;v<4;v+=2)h==="margin"&&(N+=l.css(s,h+gt[v],!0,m)),d?(h==="content"&&(I-=l.css(s,"padding"+gt[v],!0,m)),h!=="margin"&&(I-=l.css(s,"border"+gt[v]+"Width",!0,m))):(I+=l.css(s,"padding"+gt[v],!0,m),h!=="padding"?I+=l.css(s,"border"+gt[v]+"Width",!0,m):R+=l.css(s,"border"+gt[v]+"Width",!0,m));return!d&&y>=0&&(I+=Math.max(0,Math.ceil(s["offset"+u[0].toUpperCase()+u.slice(1)]-y-I-R-.5))||0),I+N}function xt(s,u,h){var d=cr(s),m=!W.boxSizingReliable()||h,y=m&&l.css(s,"boxSizing",!1,d)==="border-box",v=y,R=vt(s,u,d),I="offset"+u[0].toUpperCase()+u.slice(1);if(Di.test(R)){if(!h)return R;R="auto"}return(!W.boxSizingReliable()&&y||!W.reliableTrDimensions()&&S(s,"tr")||R==="auto"||!parseFloat(R)&&l.css(s,"display",!1,d)==="inline")&&s.getClientRects().length&&(y=l.css(s,"boxSizing",!1,d)==="border-box",v=I in s,v&&(R=s[I])),R=parseFloat(R)||0,R+Mi(s,u,h||(y?"border":"content"),v,d,R)+"px"}l.extend({cssHooks:{opacity:{get:function(s,u){if(u){var h=vt(s,"opacity");return h===""?"1":h}}}},cssNumber:{animationIterationCount:!0,aspectRatio:!0,borderImageSlice:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,scale:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeMiterlimit:!0,strokeOpacity:!0},cssProps:{},style:function(s,u,h,d){if(!(!s||s.nodeType===3||s.nodeType===8||!s.style)){var m,y,v,R=At(u),I=Dn.test(u),N=s.style;if(I||(u=hr(R)),v=l.cssHooks[u]||l.cssHooks[R],h!==void 0){if(y=typeof h,y==="string"&&(m=Sn.exec(h))&&m[1]&&(h=or(s,u,m),y="number"),h==null||h!==h)return;y==="number"&&!I&&(h+=m&&m[3]||(l.cssNumber[R]?"":"px")),!W.clearCloneStyle&&h===""&&u.indexOf("background")===0&&(N[u]="inherit"),(!v||!("set"in v)||(h=v.set(s,h,d))!==void 0)&&(I?N.setProperty(u,h):N[u]=h)}else return v&&"get"in v&&(m=v.get(s,!1,d))!==void 0?m:N[u]}},css:function(s,u,h,d){var m,y,v,R=At(u),I=Dn.test(u);return I||(u=hr(R)),v=l.cssHooks[u]||l.cssHooks[R],v&&"get"in v&&(m=v.get(s,!0,h)),m===void 0&&(m=vt(s,u,d)),m==="normal"&&u in Oi&&(m=Oi[u]),h===""||h?(y=parseFloat(m),h===!0||isFinite(y)?y||0:m):m}}),l.each(["height","width"],function(s,u){l.cssHooks[u]={get:function(h,d,m){if(d)return Vi.test(l.css(h,"display"))&&(!h.getClientRects().length||!h.getBoundingClientRect().width)?Lr(h,Ls,function(){return xt(h,u,m)}):xt(h,u,m)},set:function(h,d,m){var y,v=cr(h),R=!W.scrollboxSize()&&v.position==="absolute",I=R||m,N=I&&l.css(h,"boxSizing",!1,v)==="border-box",B=m?Mi(h,u,m,N,v):0;return N&&R&&(B-=Math.ceil(h["offset"+u[0].toUpperCase()+u.slice(1)]-parseFloat(v[u])-Mi(h,u,"border",!1,v)-.5)),B&&(y=Sn.exec(d))&&(y[3]||"px")!=="px"&&(h.style[u]=d,d=l.css(h,u)),Li(h,d,B)}}}),l.cssHooks.marginLeft=Mr(W.reliableMarginLeft,function(s,u){if(u)return(parseFloat(vt(s,"marginLeft"))||s.getBoundingClientRect().left-Lr(s,{marginLeft:0},function(){return s.getBoundingClientRect().left}))+"px"}),l.each({margin:"",padding:"",border:"Width"},function(s,u){l.cssHooks[s+u]={expand:function(h){for(var d=0,m={},y=typeof h=="string"?h.split(" "):[h];d<4;d++)m[s+gt[d]+u]=y[d]||y[d-2]||y[0];return m}},s!=="margin"&&(l.cssHooks[s+u].set=Li)}),l.fn.extend({css:function(s,u){return It(this,function(h,d,m){var y,v,R={},I=0;if(Array.isArray(d)){for(y=cr(h),v=d.length;I<v;I++)R[d[I]]=l.css(h,d[I],!1,y);return R}return m!==void 0?l.style(h,d,m):l.css(h,d)},s,u,arguments.length>1)}});function Ne(s,u,h,d,m){return new Ne.prototype.init(s,u,h,d,m)}l.Tween=Ne,Ne.prototype={constructor:Ne,init:function(s,u,h,d,m,y){this.elem=s,this.prop=h,this.easing=m||l.easing._default,this.options=u,this.start=this.now=this.cur(),this.end=d,this.unit=y||(l.cssNumber[h]?"":"px")},cur:function(){var s=Ne.propHooks[this.prop];return s&&s.get?s.get(this):Ne.propHooks._default.get(this)},run:function(s){var u,h=Ne.propHooks[this.prop];return this.options.duration?this.pos=u=l.easing[this.easing](s,this.options.duration*s,0,1,this.options.duration):this.pos=u=s,this.now=(this.end-this.start)*u+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),h&&h.set?h.set(this):Ne.propHooks._default.set(this),this}},Ne.prototype.init.prototype=Ne.prototype,Ne.propHooks={_default:{get:function(s){var u;return s.elem.nodeType!==1||s.elem[s.prop]!=null&&s.elem.style[s.prop]==null?s.elem[s.prop]:(u=l.css(s.elem,s.prop,""),!u||u==="auto"?0:u)},set:function(s){l.fx.step[s.prop]?l.fx.step[s.prop](s):s.elem.nodeType===1&&(l.cssHooks[s.prop]||s.elem.style[hr(s.prop)]!=null)?l.style(s.elem,s.prop,s.now+s.unit):s.elem[s.prop]=s.now}}},Ne.propHooks.scrollTop=Ne.propHooks.scrollLeft={set:function(s){s.elem.nodeType&&s.elem.parentNode&&(s.elem[s.prop]=s.now)}},l.easing={linear:function(s){return s},swing:function(s){return .5-Math.cos(s*Math.PI)/2},_default:"swing"},l.fx=Ne.prototype.init,l.fx.step={};var bt,jt,Fi=/^(?:toggle|show|hide)$/,ke=/queueHooks$/;function Nn(){jt&&(Y.hidden===!1&&e.requestAnimationFrame?e.requestAnimationFrame(Nn):e.setTimeout(Nn,l.fx.interval),l.fx.tick())}function xn(){return e.setTimeout(function(){bt=void 0}),bt=Date.now()}function Bt(s,u){var h,d=0,m={height:s};for(u=u?1:0;d<4;d+=2-u)h=gt[d],m["margin"+h]=m["padding"+h]=s;return u&&(m.opacity=m.width=s),m}function Ms(s,u,h){for(var d,m=(Tt.tweeners[u]||[]).concat(Tt.tweeners["*"]),y=0,v=m.length;y<v;y++)if(d=m[y].call(h,u,s))return d}function Fs(s,u,h){var d,m,y,v,R,I,N,B,q="width"in u||"height"in u,U=this,Q={},ie=s.style,_e=s.nodeType&&sr(s),me=re.get(s,"fxshow");h.queue||(v=l._queueHooks(s,"fx"),v.unqueued==null&&(v.unqueued=0,R=v.empty.fire,v.empty.fire=function(){v.unqueued||R()}),v.unqueued++,U.always(function(){U.always(function(){v.unqueued--,l.queue(s,"fx").length||v.empty.fire()})}));for(d in u)if(m=u[d],Fi.test(m)){if(delete u[d],y=y||m==="toggle",m===(_e?"hide":"show"))if(m==="show"&&me&&me[d]!==void 0)_e=!0;else continue;Q[d]=me&&me[d]||l.style(s,d)}if(I=!l.isEmptyObject(u),!(!I&&l.isEmptyObject(Q))){q&&s.nodeType===1&&(h.overflow=[ie.overflow,ie.overflowX,ie.overflowY],N=me&&me.display,N==null&&(N=re.get(s,"display")),B=l.css(s,"display"),B==="none"&&(N?B=N:(un([s],!0),N=s.style.display||N,B=l.css(s,"display"),un([s]))),(B==="inline"||B==="inline-block"&&N!=null)&&l.css(s,"float")==="none"&&(I||(U.done(function(){ie.display=N}),N==null&&(B=ie.display,N=B==="none"?"":B)),ie.display="inline-block")),h.overflow&&(ie.overflow="hidden",U.always(function(){ie.overflow=h.overflow[0],ie.overflowX=h.overflow[1],ie.overflowY=h.overflow[2]})),I=!1;for(d in Q)I||(me?"hidden"in me&&(_e=me.hidden):me=re.access(s,"fxshow",{display:N}),y&&(me.hidden=!_e),_e&&un([s],!0),U.done(function(){_e||un([s]),re.remove(s,"fxshow");for(d in Q)l.style(s,d,Q[d])})),I=Ms(_e?me[d]:0,d,U),d in me||(me[d]=I.start,_e&&(I.end=I.start,I.start=0))}}function na(s,u){var h,d,m,y,v;for(h in s)if(d=At(h),m=u[d],y=s[h],Array.isArray(y)&&(m=y[1],y=s[h]=y[0]),h!==d&&(s[d]=y,delete s[h]),v=l.cssHooks[d],v&&"expand"in v){y=v.expand(y),delete s[d];for(h in y)h in s||(s[h]=y[h],u[h]=m)}else u[d]=m}function Tt(s,u,h){var d,m,y=0,v=Tt.prefilters.length,R=l.Deferred().always(function(){delete I.elem}),I=function(){if(m)return!1;for(var q=bt||xn(),U=Math.max(0,N.startTime+N.duration-q),Q=U/N.duration||0,ie=1-Q,_e=0,me=N.tweens.length;_e<me;_e++)N.tweens[_e].run(ie);return R.notifyWith(s,[N,ie,U]),ie<1&&me?U:(me||R.notifyWith(s,[N,1,0]),R.resolveWith(s,[N]),!1)},N=R.promise({elem:s,props:l.extend({},u),opts:l.extend(!0,{specialEasing:{},easing:l.easing._default},h),originalProperties:u,originalOptions:h,startTime:bt||xn(),duration:h.duration,tweens:[],createTween:function(q,U){var Q=l.Tween(s,N.opts,q,U,N.opts.specialEasing[q]||N.opts.easing);return N.tweens.push(Q),Q},stop:function(q){var U=0,Q=q?N.tweens.length:0;if(m)return this;for(m=!0;U<Q;U++)N.tweens[U].run(1);return q?(R.notifyWith(s,[N,1,0]),R.resolveWith(s,[N,q])):R.rejectWith(s,[N,q]),this}}),B=N.props;for(na(B,N.opts.specialEasing);y<v;y++)if(d=Tt.prefilters[y].call(N,s,B,N.opts),d)return X(d.stop)&&(l._queueHooks(N.elem,N.opts.queue).stop=d.stop.bind(d)),d;return l.map(B,Ms,N),X(N.opts.start)&&N.opts.start.call(s,N),N.progress(N.opts.progress).done(N.opts.done,N.opts.complete).fail(N.opts.fail).always(N.opts.always),l.fx.timer(l.extend(I,{elem:s,anim:N,queue:N.opts.queue})),N}l.Animation=l.extend(Tt,{tweeners:{"*":[function(s,u){var h=this.createTween(s,u);return or(h.elem,s,Sn.exec(u),h),h}]},tweener:function(s,u){X(s)?(u=s,s=["*"]):s=s.match(wt);for(var h,d=0,m=s.length;d<m;d++)h=s[d],Tt.tweeners[h]=Tt.tweeners[h]||[],Tt.tweeners[h].unshift(u)},prefilters:[Fs],prefilter:function(s,u){u?Tt.prefilters.unshift(s):Tt.prefilters.push(s)}}),l.speed=function(s,u,h){var d=s&&typeof s=="object"?l.extend({},s):{complete:h||!h&&u||X(s)&&s,duration:s,easing:h&&u||u&&!X(u)&&u};return l.fx.off?d.duration=0:typeof d.duration!="number"&&(d.duration in l.fx.speeds?d.duration=l.fx.speeds[d.duration]:d.duration=l.fx.speeds._default),(d.queue==null||d.queue===!0)&&(d.queue="fx"),d.old=d.complete,d.complete=function(){X(d.old)&&d.old.call(this),d.queue&&l.dequeue(this,d.queue)},d},l.fn.extend({fadeTo:function(s,u,h,d){return this.filter(sr).css("opacity",0).show().end().animate({opacity:u},s,h,d)},animate:function(s,u,h,d){var m=l.isEmptyObject(s),y=l.speed(u,h,d),v=function(){var R=Tt(this,l.extend({},s),y);(m||re.get(this,"finish"))&&R.stop(!0)};return v.finish=v,m||y.queue===!1?this.each(v):this.queue(y.queue,v)},stop:function(s,u,h){var d=function(m){var y=m.stop;delete m.stop,y(h)};return typeof s!="string"&&(h=u,u=s,s=void 0),u&&this.queue(s||"fx",[]),this.each(function(){var m=!0,y=s!=null&&s+"queueHooks",v=l.timers,R=re.get(this);if(y)R[y]&&R[y].stop&&d(R[y]);else for(y in R)R[y]&&R[y].stop&&ke.test(y)&&d(R[y]);for(y=v.length;y--;)v[y].elem===this&&(s==null||v[y].queue===s)&&(v[y].anim.stop(h),m=!1,v.splice(y,1));(m||!h)&&l.dequeue(this,s)})},finish:function(s){return s!==!1&&(s=s||"fx"),this.each(function(){var u,h=re.get(this),d=h[s+"queue"],m=h[s+"queueHooks"],y=l.timers,v=d?d.length:0;for(h.finish=!0,l.queue(this,s,[]),m&&m.stop&&m.stop.call(this,!0),u=y.length;u--;)y[u].elem===this&&y[u].queue===s&&(y[u].anim.stop(!0),y.splice(u,1));for(u=0;u<v;u++)d[u]&&d[u].finish&&d[u].finish.call(this);delete h.finish})}}),l.each(["toggle","show","hide"],function(s,u){var h=l.fn[u];l.fn[u]=function(d,m,y){return d==null||typeof d=="boolean"?h.apply(this,arguments):this.animate(Bt(u,!0),d,m,y)}}),l.each({slideDown:Bt("show"),slideUp:Bt("hide"),slideToggle:Bt("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(s,u){l.fn[s]=function(h,d,m){return this.animate(u,h,d,m)}}),l.timers=[],l.fx.tick=function(){var s,u=0,h=l.timers;for(bt=Date.now();u<h.length;u++)s=h[u],!s()&&h[u]===s&&h.splice(u--,1);h.length||l.fx.stop(),bt=void 0},l.fx.timer=function(s){l.timers.push(s),l.fx.start()},l.fx.interval=13,l.fx.start=function(){jt||(jt=!0,Nn())},l.fx.stop=function(){jt=null},l.fx.speeds={slow:600,fast:200,_default:400},l.fn.delay=function(s,u){return s=l.fx&&l.fx.speeds[s]||s,u=u||"fx",this.queue(u,function(h,d){var m=e.setTimeout(h,s);d.stop=function(){e.clearTimeout(m)}})},(function(){var s=Y.createElement("input"),u=Y.createElement("select"),h=u.appendChild(Y.createElement("option"));s.type="checkbox",W.checkOn=s.value!=="",W.optSelected=h.selected,s=Y.createElement("input"),s.value="t",s.type="radio",W.radioValue=s.value==="t"})();var Us,fr=l.expr.attrHandle;l.fn.extend({attr:function(s,u){return It(this,l.attr,s,u,arguments.length>1)},removeAttr:function(s){return this.each(function(){l.removeAttr(this,s)})}}),l.extend({attr:function(s,u,h){var d,m,y=s.nodeType;if(!(y===3||y===8||y===2)){if(typeof s.getAttribute>"u")return l.prop(s,u,h);if((y!==1||!l.isXMLDoc(s))&&(m=l.attrHooks[u.toLowerCase()]||(l.expr.match.bool.test(u)?Us:void 0)),h!==void 0){if(h===null){l.removeAttr(s,u);return}return m&&"set"in m&&(d=m.set(s,h,u))!==void 0?d:(s.setAttribute(u,h+""),h)}return m&&"get"in m&&(d=m.get(s,u))!==null?d:(d=l.find.attr(s,u),d??void 0)}},attrHooks:{type:{set:function(s,u){if(!W.radioValue&&u==="radio"&&S(s,"input")){var h=s.value;return s.setAttribute("type",u),h&&(s.value=h),u}}}},removeAttr:function(s,u){var h,d=0,m=u&&u.match(wt);if(m&&s.nodeType===1)for(;h=m[d++];)s.removeAttribute(h)}}),Us={set:function(s,u,h){return u===!1?l.removeAttr(s,h):s.setAttribute(h,h),h}},l.each(l.expr.match.bool.source.match(/\w+/g),function(s,u){var h=fr[u]||l.find.attr;fr[u]=function(d,m,y){var v,R,I=m.toLowerCase();return y||(R=fr[I],fr[I]=v,v=h(d,m,y)!=null?I:null,fr[I]=R),v}});var dr=/^(?:input|select|textarea|button)$/i,ln=/^(?:a|area)$/i;l.fn.extend({prop:function(s,u){return It(this,l.prop,s,u,arguments.length>1)},removeProp:function(s){return this.each(function(){delete this[l.propFix[s]||s]})}}),l.extend({prop:function(s,u,h){var d,m,y=s.nodeType;if(!(y===3||y===8||y===2))return(y!==1||!l.isXMLDoc(s))&&(u=l.propFix[u]||u,m=l.propHooks[u]),h!==void 0?m&&"set"in m&&(d=m.set(s,h,u))!==void 0?d:s[u]=h:m&&"get"in m&&(d=m.get(s,u))!==null?d:s[u]},propHooks:{tabIndex:{get:function(s){var u=l.find.attr(s,"tabindex");return u?parseInt(u,10):dr.test(s.nodeName)||ln.test(s.nodeName)&&s.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),W.optSelected||(l.propHooks.selected={get:function(s){var u=s.parentNode;return u&&u.parentNode&&u.parentNode.selectedIndex,null},set:function(s){var u=s.parentNode;u&&(u.selectedIndex,u.parentNode&&u.parentNode.selectedIndex)}}),l.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){l.propFix[this.toLowerCase()]=this});function qt(s){var u=s.match(wt)||[];return u.join(" ")}function $t(s){return s.getAttribute&&s.getAttribute("class")||""}function Fr(s){return Array.isArray(s)?s:typeof s=="string"?s.match(wt)||[]:[]}l.fn.extend({addClass:function(s){var u,h,d,m,y,v;return X(s)?this.each(function(R){l(this).addClass(s.call(this,R,$t(this)))}):(u=Fr(s),u.length?this.each(function(){if(d=$t(this),h=this.nodeType===1&&" "+qt(d)+" ",h){for(y=0;y<u.length;y++)m=u[y],h.indexOf(" "+m+" ")<0&&(h+=m+" ");v=qt(h),d!==v&&this.setAttribute("class",v)}}):this)},removeClass:function(s){var u,h,d,m,y,v;return X(s)?this.each(function(R){l(this).removeClass(s.call(this,R,$t(this)))}):arguments.length?(u=Fr(s),u.length?this.each(function(){if(d=$t(this),h=this.nodeType===1&&" "+qt(d)+" ",h){for(y=0;y<u.length;y++)for(m=u[y];h.indexOf(" "+m+" ")>-1;)h=h.replace(" "+m+" "," ");v=qt(h),d!==v&&this.setAttribute("class",v)}}):this):this.attr("class","")},toggleClass:function(s,u){var h,d,m,y,v=typeof s,R=v==="string"||Array.isArray(s);return X(s)?this.each(function(I){l(this).toggleClass(s.call(this,I,$t(this),u),u)}):typeof u=="boolean"&&R?u?this.addClass(s):this.removeClass(s):(h=Fr(s),this.each(function(){if(R)for(y=l(this),m=0;m<h.length;m++)d=h[m],y.hasClass(d)?y.removeClass(d):y.addClass(d);else(s===void 0||v==="boolean")&&(d=$t(this),d&&re.set(this,"__className__",d),this.setAttribute&&this.setAttribute("class",d||s===!1?"":re.get(this,"__className__")||""))}))},hasClass:function(s){var u,h,d=0;for(u=" "+s+" ";h=this[d++];)if(h.nodeType===1&&(" "+qt($t(h))+" ").indexOf(u)>-1)return!0;return!1}});var js=/\r/g;l.fn.extend({val:function(s){var u,h,d,m=this[0];return arguments.length?(d=X(s),this.each(function(y){var v;this.nodeType===1&&(d?v=s.call(this,y,l(this).val()):v=s,v==null?v="":typeof v=="number"?v+="":Array.isArray(v)&&(v=l.map(v,function(R){return R==null?"":R+""})),u=l.valHooks[this.type]||l.valHooks[this.nodeName.toLowerCase()],(!u||!("set"in u)||u.set(this,v,"value")===void 0)&&(this.value=v))})):m?(u=l.valHooks[m.type]||l.valHooks[m.nodeName.toLowerCase()],u&&"get"in u&&(h=u.get(m,"value"))!==void 0?h:(h=m.value,typeof h=="string"?h.replace(js,""):h??"")):void 0}}),l.extend({valHooks:{option:{get:function(s){var u=l.find.attr(s,"value");return u??qt(l.text(s))}},select:{get:function(s){var u,h,d,m=s.options,y=s.selectedIndex,v=s.type==="select-one",R=v?null:[],I=v?y+1:m.length;for(y<0?d=I:d=v?y:0;d<I;d++)if(h=m[d],(h.selected||d===y)&&!h.disabled&&(!h.parentNode.disabled||!S(h.parentNode,"optgroup"))){if(u=l(h).val(),v)return u;R.push(u)}return R},set:function(s,u){for(var h,d,m=s.options,y=l.makeArray(u),v=m.length;v--;)d=m[v],(d.selected=l.inArray(l.valHooks.option.get(d),y)>-1)&&(h=!0);return h||(s.selectedIndex=-1),y}}}}),l.each(["radio","checkbox"],function(){l.valHooks[this]={set:function(s,u){if(Array.isArray(u))return s.checked=l.inArray(l(s).val(),u)>-1}},W.checkOn||(l.valHooks[this].get=function(s){return s.getAttribute("value")===null?"on":s.value})});var Vn=e.location,hn={guid:Date.now()},Ui=/\?/;l.parseXML=function(s){var u,h;if(!s||typeof s!="string")return null;try{u=new e.DOMParser().parseFromString(s,"text/xml")}catch{}return h=u&&u.getElementsByTagName("parsererror")[0],(!u||h)&&l.error("Invalid XML: "+(h?l.map(h.childNodes,function(d){return d.textContent}).join(`
`):s)),u};var Bs=/^(?:focusinfocus|focusoutblur)$/,qs=function(s){s.stopPropagation()};l.extend(l.event,{trigger:function(s,u,h,d){var m,y,v,R,I,N,B,q,U=[h||Y],Q=k.call(s,"type")?s.type:s,ie=k.call(s,"namespace")?s.namespace.split("."):[];if(y=q=v=h=h||Y,!(h.nodeType===3||h.nodeType===8)&&!Bs.test(Q+l.event.triggered)&&(Q.indexOf(".")>-1&&(ie=Q.split("."),Q=ie.shift(),ie.sort()),I=Q.indexOf(":")<0&&"on"+Q,s=s[l.expando]?s:new l.Event(Q,typeof s=="object"&&s),s.isTrigger=d?2:3,s.namespace=ie.join("."),s.rnamespace=s.namespace?new RegExp("(^|\\.)"+ie.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,s.result=void 0,s.target||(s.target=h),u=u==null?[s]:l.makeArray(u,[s]),B=l.event.special[Q]||{},!(!d&&B.trigger&&B.trigger.apply(h,u)===!1))){if(!d&&!B.noBubble&&!Z(h)){for(R=B.delegateType||Q,Bs.test(R+Q)||(y=y.parentNode);y;y=y.parentNode)U.push(y),v=y;v===(h.ownerDocument||Y)&&U.push(v.defaultView||v.parentWindow||e)}for(m=0;(y=U[m++])&&!s.isPropagationStopped();)q=y,s.type=m>1?R:B.bindType||Q,N=(re.get(y,"events")||Object.create(null))[s.type]&&re.get(y,"handle"),N&&N.apply(y,u),N=I&&y[I],N&&N.apply&&bn(y)&&(s.result=N.apply(y,u),s.result===!1&&s.preventDefault());return s.type=Q,!d&&!s.isDefaultPrevented()&&(!B._default||B._default.apply(U.pop(),u)===!1)&&bn(h)&&I&&X(h[Q])&&!Z(h)&&(v=h[I],v&&(h[I]=null),l.event.triggered=Q,s.isPropagationStopped()&&q.addEventListener(Q,qs),h[Q](),s.isPropagationStopped()&&q.removeEventListener(Q,qs),l.event.triggered=void 0,v&&(h[I]=v)),s.result}},simulate:function(s,u,h){var d=l.extend(new l.Event,h,{type:s,isSimulated:!0});l.event.trigger(d,null,u)}}),l.fn.extend({trigger:function(s,u){return this.each(function(){l.event.trigger(s,u,this)})},triggerHandler:function(s,u){var h=this[0];if(h)return l.event.trigger(s,u,h,!0)}});var Ht=/\[\]$/,$s=/\r?\n/g,ji=/^(?:submit|button|image|reset|file)$/i,Ur=/^(?:input|select|textarea|keygen)/i;function jr(s,u,h,d){var m;if(Array.isArray(u))l.each(u,function(y,v){h||Ht.test(s)?d(s,v):jr(s+"["+(typeof v=="object"&&v!=null?y:"")+"]",v,h,d)});else if(!h&&je(u)==="object")for(m in u)jr(s+"["+m+"]",u[m],h,d);else d(s,u)}l.param=function(s,u){var h,d=[],m=function(y,v){var R=X(v)?v():v;d[d.length]=encodeURIComponent(y)+"="+encodeURIComponent(R??"")};if(s==null)return"";if(Array.isArray(s)||s.jquery&&!l.isPlainObject(s))l.each(s,function(){m(this.name,this.value)});else for(h in s)jr(h,s[h],u,m);return d.join("&")},l.fn.extend({serialize:function(){return l.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var s=l.prop(this,"elements");return s?l.makeArray(s):this}).filter(function(){var s=this.type;return this.name&&!l(this).is(":disabled")&&Ur.test(this.nodeName)&&!ji.test(s)&&(this.checked||!Be.test(s))}).map(function(s,u){var h=l(this).val();return h==null?null:Array.isArray(h)?l.map(h,function(d){return{name:u.name,value:d.replace($s,`\r
`)}}):{name:u.name,value:h.replace($s,`\r
`)}}).get()}});var pr=/%20/g,gr=/#.*$/,Hs=/([?&])_=[^&]*/,Bi=/^(.*?):[ \t]*([^\r\n]*)$/mg,Ve=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,ra=/^(?:GET|HEAD)$/,ia=/^\/\//,qi={},Br={},$i="*/".concat("*"),On=Y.createElement("a");On.href=Vn.href;function Vt(s){return function(u,h){typeof u!="string"&&(h=u,u="*");var d,m=0,y=u.toLowerCase().match(wt)||[];if(X(h))for(;d=y[m++];)d[0]==="+"?(d=d.slice(1)||"*",(s[d]=s[d]||[]).unshift(h)):(s[d]=s[d]||[]).push(h)}}function Hi(s,u,h,d){var m={},y=s===Br;function v(R){var I;return m[R]=!0,l.each(s[R]||[],function(N,B){var q=B(u,h,d);if(typeof q=="string"&&!y&&!m[q])return u.dataTypes.unshift(q),v(q),!1;if(y)return!(I=q)}),I}return v(u.dataTypes[0])||!m["*"]&&v("*")}function zi(s,u){var h,d,m=l.ajaxSettings.flatOptions||{};for(h in u)u[h]!==void 0&&((m[h]?s:d||(d={}))[h]=u[h]);return d&&l.extend(!0,s,d),s}function mr(s,u,h){for(var d,m,y,v,R=s.contents,I=s.dataTypes;I[0]==="*";)I.shift(),d===void 0&&(d=s.mimeType||u.getResponseHeader("Content-Type"));if(d){for(m in R)if(R[m]&&R[m].test(d)){I.unshift(m);break}}if(I[0]in h)y=I[0];else{for(m in h){if(!I[0]||s.converters[m+" "+I[0]]){y=m;break}v||(v=m)}y=y||v}if(y)return y!==I[0]&&I.unshift(y),h[y]}function zs(s,u,h,d){var m,y,v,R,I,N={},B=s.dataTypes.slice();if(B[1])for(v in s.converters)N[v.toLowerCase()]=s.converters[v];for(y=B.shift();y;)if(s.responseFields[y]&&(h[s.responseFields[y]]=u),!I&&d&&s.dataFilter&&(u=s.dataFilter(u,s.dataType)),I=y,y=B.shift(),y){if(y==="*")y=I;else if(I!=="*"&&I!==y){if(v=N[I+" "+y]||N["* "+y],!v){for(m in N)if(R=m.split(" "),R[1]===y&&(v=N[I+" "+R[0]]||N["* "+R[0]],v)){v===!0?v=N[m]:N[m]!==!0&&(y=R[0],B.unshift(R[1]));break}}if(v!==!0)if(v&&s.throws)u=v(u);else try{u=v(u)}catch(q){return{state:"parsererror",error:v?q:"No conversion from "+I+" to "+y}}}}return{state:"success",data:u}}l.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Vn.href,type:"GET",isLocal:Ve.test(Vn.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":$i,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":l.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(s,u){return u?zi(zi(s,l.ajaxSettings),u):zi(l.ajaxSettings,s)},ajaxPrefilter:Vt(qi),ajaxTransport:Vt(Br),ajax:function(s,u){typeof s=="object"&&(u=s,s=void 0),u=u||{};var h,d,m,y,v,R,I,N,B,q,U=l.ajaxSetup({},u),Q=U.context||U,ie=U.context&&(Q.nodeType||Q.jquery)?l(Q):l.event,_e=l.Deferred(),me=l.Callbacks("once memory"),Oe=U.statusCode||{},o={},f={},g="canceled",E={readyState:0,getResponseHeader:function(V){var z;if(I){if(!y)for(y={};z=Bi.exec(m);)y[z[1].toLowerCase()+" "]=(y[z[1].toLowerCase()+" "]||[]).concat(z[2]);z=y[V.toLowerCase()+" "]}return z==null?null:z.join(", ")},getAllResponseHeaders:function(){return I?m:null},setRequestHeader:function(V,z){return I==null&&(V=f[V.toLowerCase()]=f[V.toLowerCase()]||V,o[V]=z),this},overrideMimeType:function(V){return I==null&&(U.mimeType=V),this},statusCode:function(V){var z;if(V)if(I)E.always(V[E.status]);else for(z in V)Oe[z]=[Oe[z],V[z]];return this},abort:function(V){var z=V||g;return h&&h.abort(z),O(0,z),this}};if(_e.promise(E),U.url=((s||U.url||Vn.href)+"").replace(ia,Vn.protocol+"//"),U.type=u.method||u.type||U.method||U.type,U.dataTypes=(U.dataType||"*").toLowerCase().match(wt)||[""],U.crossDomain==null){R=Y.createElement("a");try{R.href=U.url,R.href=R.href,U.crossDomain=On.protocol+"//"+On.host!=R.protocol+"//"+R.host}catch{U.crossDomain=!0}}if(U.data&&U.processData&&typeof U.data!="string"&&(U.data=l.param(U.data,U.traditional)),Hi(qi,U,u,E),I)return E;N=l.event&&U.global,N&&l.active++===0&&l.event.trigger("ajaxStart"),U.type=U.type.toUpperCase(),U.hasContent=!ra.test(U.type),d=U.url.replace(gr,""),U.hasContent?U.data&&U.processData&&(U.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&(U.data=U.data.replace(pr,"+")):(q=U.url.slice(d.length),U.data&&(U.processData||typeof U.data=="string")&&(d+=(Ui.test(d)?"&":"?")+U.data,delete U.data),U.cache===!1&&(d=d.replace(Hs,"$1"),q=(Ui.test(d)?"&":"?")+"_="+hn.guid+++q),U.url=d+q),U.ifModified&&(l.lastModified[d]&&E.setRequestHeader("If-Modified-Since",l.lastModified[d]),l.etag[d]&&E.setRequestHeader("If-None-Match",l.etag[d])),(U.data&&U.hasContent&&U.contentType!==!1||u.contentType)&&E.setRequestHeader("Content-Type",U.contentType),E.setRequestHeader("Accept",U.dataTypes[0]&&U.accepts[U.dataTypes[0]]?U.accepts[U.dataTypes[0]]+(U.dataTypes[0]!=="*"?", "+$i+"; q=0.01":""):U.accepts["*"]);for(B in U.headers)E.setRequestHeader(B,U.headers[B]);if(U.beforeSend&&(U.beforeSend.call(Q,E,U)===!1||I))return E.abort();if(g="abort",me.add(U.complete),E.done(U.success),E.fail(U.error),h=Hi(Br,U,u,E),!h)O(-1,"No Transport");else{if(E.readyState=1,N&&ie.trigger("ajaxSend",[E,U]),I)return E;U.async&&U.timeout>0&&(v=e.setTimeout(function(){E.abort("timeout")},U.timeout));try{I=!1,h.send(o,O)}catch(V){if(I)throw V;O(-1,V)}}function O(V,z,fe,Me){var ye,Le,qe,ct,it,$e=z;I||(I=!0,v&&e.clearTimeout(v),h=void 0,m=Me||"",E.readyState=V>0?4:0,ye=V>=200&&V<300||V===304,fe&&(ct=mr(U,E,fe)),!ye&&l.inArray("script",U.dataTypes)>-1&&l.inArray("json",U.dataTypes)<0&&(U.converters["text script"]=function(){}),ct=zs(U,ct,E,ye),ye?(U.ifModified&&(it=E.getResponseHeader("Last-Modified"),it&&(l.lastModified[d]=it),it=E.getResponseHeader("etag"),it&&(l.etag[d]=it)),V===204||U.type==="HEAD"?$e="nocontent":V===304?$e="notmodified":($e=ct.state,Le=ct.data,qe=ct.error,ye=!qe)):(qe=$e,(V||!$e)&&($e="error",V<0&&(V=0))),E.status=V,E.statusText=(z||$e)+"",ye?_e.resolveWith(Q,[Le,$e,E]):_e.rejectWith(Q,[E,$e,qe]),E.statusCode(Oe),Oe=void 0,N&&ie.trigger(ye?"ajaxSuccess":"ajaxError",[E,U,ye?Le:qe]),me.fireWith(Q,[E,$e]),N&&(ie.trigger("ajaxComplete",[E,U]),--l.active||l.event.trigger("ajaxStop")))}return E},getJSON:function(s,u,h){return l.get(s,u,h,"json")},getScript:function(s,u){return l.get(s,void 0,u,"script")}}),l.each(["get","post"],function(s,u){l[u]=function(h,d,m,y){return X(d)&&(y=y||m,m=d,d=void 0),l.ajax(l.extend({url:h,type:u,dataType:y,data:d,success:m},l.isPlainObject(h)&&h))}}),l.ajaxPrefilter(function(s){var u;for(u in s.headers)u.toLowerCase()==="content-type"&&(s.contentType=s.headers[u]||"")}),l._evalUrl=function(s,u,h){return l.ajax({url:s,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(d){l.globalEval(d,u,h)}})},l.fn.extend({wrapAll:function(s){var u;return this[0]&&(X(s)&&(s=s.call(this[0])),u=l(s,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&u.insertBefore(this[0]),u.map(function(){for(var h=this;h.firstElementChild;)h=h.firstElementChild;return h}).append(this)),this},wrapInner:function(s){return X(s)?this.each(function(u){l(this).wrapInner(s.call(this,u))}):this.each(function(){var u=l(this),h=u.contents();h.length?h.wrapAll(s):u.append(s)})},wrap:function(s){var u=X(s);return this.each(function(h){l(this).wrapAll(u?s.call(this,h):s)})},unwrap:function(s){return this.parent(s).not("body").each(function(){l(this).replaceWith(this.childNodes)}),this}}),l.expr.pseudos.hidden=function(s){return!l.expr.pseudos.visible(s)},l.expr.pseudos.visible=function(s){return!!(s.offsetWidth||s.offsetHeight||s.getClientRects().length)},l.ajaxSettings.xhr=function(){try{return new e.XMLHttpRequest}catch{}};var Wi={0:200,1223:204},zt=l.ajaxSettings.xhr();W.cors=!!zt&&"withCredentials"in zt,W.ajax=zt=!!zt,l.ajaxTransport(function(s){var u,h;if(W.cors||zt&&!s.crossDomain)return{send:function(d,m){var y,v=s.xhr();if(v.open(s.type,s.url,s.async,s.username,s.password),s.xhrFields)for(y in s.xhrFields)v[y]=s.xhrFields[y];s.mimeType&&v.overrideMimeType&&v.overrideMimeType(s.mimeType),!s.crossDomain&&!d["X-Requested-With"]&&(d["X-Requested-With"]="XMLHttpRequest");for(y in d)v.setRequestHeader(y,d[y]);u=function(R){return function(){u&&(u=h=v.onload=v.onerror=v.onabort=v.ontimeout=v.onreadystatechange=null,R==="abort"?v.abort():R==="error"?typeof v.status!="number"?m(0,"error"):m(v.status,v.statusText):m(Wi[v.status]||v.status,v.statusText,(v.responseType||"text")!=="text"||typeof v.responseText!="string"?{binary:v.response}:{text:v.responseText},v.getAllResponseHeaders()))}},v.onload=u(),h=v.onerror=v.ontimeout=u("error"),v.onabort!==void 0?v.onabort=h:v.onreadystatechange=function(){v.readyState===4&&e.setTimeout(function(){u&&h()})},u=u("abort");try{v.send(s.hasContent&&s.data||null)}catch(R){if(u)throw R}},abort:function(){u&&u()}}}),l.ajaxPrefilter(function(s){s.crossDomain&&(s.contents.script=!1)}),l.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(s){return l.globalEval(s),s}}}),l.ajaxPrefilter("script",function(s){s.cache===void 0&&(s.cache=!1),s.crossDomain&&(s.type="GET")}),l.ajaxTransport("script",function(s){if(s.crossDomain||s.scriptAttrs){var u,h;return{send:function(d,m){u=l("<script>").attr(s.scriptAttrs||{}).prop({charset:s.scriptCharset,src:s.url}).on("load error",h=function(y){u.remove(),h=null,y&&m(y.type==="error"?404:200,y.type)}),Y.head.appendChild(u[0])},abort:function(){h&&h()}}}});var Gi=[],Ln=/(=)\?(?=&|$)|\?\?/;l.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var s=Gi.pop()||l.expando+"_"+hn.guid++;return this[s]=!0,s}}),l.ajaxPrefilter("json jsonp",function(s,u,h){var d,m,y,v=s.jsonp!==!1&&(Ln.test(s.url)?"url":typeof s.data=="string"&&(s.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&Ln.test(s.data)&&"data");if(v||s.dataTypes[0]==="jsonp")return d=s.jsonpCallback=X(s.jsonpCallback)?s.jsonpCallback():s.jsonpCallback,v?s[v]=s[v].replace(Ln,"$1"+d):s.jsonp!==!1&&(s.url+=(Ui.test(s.url)?"&":"?")+s.jsonp+"="+d),s.converters["script json"]=function(){return y||l.error(d+" was not called"),y[0]},s.dataTypes[0]="json",m=e[d],e[d]=function(){y=arguments},h.always(function(){m===void 0?l(e).removeProp(d):e[d]=m,s[d]&&(s.jsonpCallback=u.jsonpCallback,Gi.push(d)),y&&X(m)&&m(y[0]),y=m=void 0}),"script"}),W.createHTMLDocument=(function(){var s=Y.implementation.createHTMLDocument("").body;return s.innerHTML="<form></form><form></form>",s.childNodes.length===2})(),l.parseHTML=function(s,u,h){if(typeof s!="string")return[];typeof u=="boolean"&&(h=u,u=!1);var d,m,y;return u||(W.createHTMLDocument?(u=Y.implementation.createHTMLDocument(""),d=u.createElement("base"),d.href=Y.location.href,u.head.appendChild(d)):u=Y),m=mi.exec(s),y=!h&&[],m?[u.createElement(m[1])]:(m=ks([s],u,y),y&&y.length&&l(y).remove(),l.merge([],m.childNodes))},l.fn.load=function(s,u,h){var d,m,y,v=this,R=s.indexOf(" ");return R>-1&&(d=qt(s.slice(R)),s=s.slice(0,R)),X(u)?(h=u,u=void 0):u&&typeof u=="object"&&(m="POST"),v.length>0&&l.ajax({url:s,type:m||"GET",dataType:"html",data:u}).done(function(I){y=arguments,v.html(d?l("<div>").append(l.parseHTML(I)).find(d):I)}).always(h&&function(I,N){v.each(function(){h.apply(this,y||[I.responseText,N,I])})}),this},l.expr.pseudos.animated=function(s){return l.grep(l.timers,function(u){return s===u.elem}).length},l.offset={setOffset:function(s,u,h){var d,m,y,v,R,I,N,B=l.css(s,"position"),q=l(s),U={};B==="static"&&(s.style.position="relative"),R=q.offset(),y=l.css(s,"top"),I=l.css(s,"left"),N=(B==="absolute"||B==="fixed")&&(y+I).indexOf("auto")>-1,N?(d=q.position(),v=d.top,m=d.left):(v=parseFloat(y)||0,m=parseFloat(I)||0),X(u)&&(u=u.call(s,h,l.extend({},R))),u.top!=null&&(U.top=u.top-R.top+v),u.left!=null&&(U.left=u.left-R.left+m),"using"in u?u.using.call(s,U):q.css(U)}},l.fn.extend({offset:function(s){if(arguments.length)return s===void 0?this:this.each(function(m){l.offset.setOffset(this,s,m)});var u,h,d=this[0];if(d)return d.getClientRects().length?(u=d.getBoundingClientRect(),h=d.ownerDocument.defaultView,{top:u.top+h.pageYOffset,left:u.left+h.pageXOffset}):{top:0,left:0}},position:function(){if(this[0]){var s,u,h,d=this[0],m={top:0,left:0};if(l.css(d,"position")==="fixed")u=d.getBoundingClientRect();else{for(u=this.offset(),h=d.ownerDocument,s=d.offsetParent||h.documentElement;s&&(s===h.body||s===h.documentElement)&&l.css(s,"position")==="static";)s=s.parentNode;s&&s!==d&&s.nodeType===1&&(m=l(s).offset(),m.top+=l.css(s,"borderTopWidth",!0),m.left+=l.css(s,"borderLeftWidth",!0))}return{top:u.top-m.top-l.css(d,"marginTop",!0),left:u.left-m.left-l.css(d,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var s=this.offsetParent;s&&l.css(s,"position")==="static";)s=s.offsetParent;return s||Dt})}}),l.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(s,u){var h=u==="pageYOffset";l.fn[s]=function(d){return It(this,function(m,y,v){var R;if(Z(m)?R=m:m.nodeType===9&&(R=m.defaultView),v===void 0)return R?R[u]:m[y];R?R.scrollTo(h?R.pageXOffset:v,h?v:R.pageYOffset):m[y]=v},s,d,arguments.length)}}),l.each(["top","left"],function(s,u){l.cssHooks[u]=Mr(W.pixelPosition,function(h,d){if(d)return d=vt(h,u),Di.test(d)?l(h).position()[u]+"px":d})}),l.each({Height:"height",Width:"width"},function(s,u){l.each({padding:"inner"+s,content:u,"":"outer"+s},function(h,d){l.fn[d]=function(m,y){var v=arguments.length&&(h||typeof m!="boolean"),R=h||(m===!0||y===!0?"margin":"border");return It(this,function(I,N,B){var q;return Z(I)?d.indexOf("outer")===0?I["inner"+s]:I.document.documentElement["client"+s]:I.nodeType===9?(q=I.documentElement,Math.max(I.body["scroll"+s],q["scroll"+s],I.body["offset"+s],q["offset"+s],q["client"+s])):B===void 0?l.css(I,N,R):l.style(I,N,B,R)},u,v?m:void 0,v)}})}),l.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(s,u){l.fn[u]=function(h){return this.on(u,h)}}),l.fn.extend({bind:function(s,u,h){return this.on(s,null,u,h)},unbind:function(s,u){return this.off(s,null,u)},delegate:function(s,u,h,d){return this.on(u,s,h,d)},undelegate:function(s,u,h){return arguments.length===1?this.off(s,"**"):this.off(u,s||"**",h)},hover:function(s,u){return this.on("mouseenter",s).on("mouseleave",u||s)}}),l.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(s,u){l.fn[u]=function(h,d){return arguments.length>0?this.on(u,null,h,d):this.trigger(u)}});var sa=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;l.proxy=function(s,u){var h,d,m;if(typeof u=="string"&&(h=s[u],u=s,s=h),!!X(s))return d=a.call(arguments,2),m=function(){return s.apply(u||this,d.concat(a.call(arguments)))},m.guid=s.guid=s.guid||l.guid++,m},l.holdReady=function(s){s?l.readyWait++:l.ready(!0)},l.isArray=Array.isArray,l.parseJSON=JSON.parse,l.nodeName=S,l.isFunction=X,l.isWindow=Z,l.camelCase=At,l.type=je,l.now=Date.now,l.isNumeric=function(s){var u=l.type(s);return(u==="number"||u==="string")&&!isNaN(s-parseFloat(s))},l.trim=function(s){return s==null?"":(s+"").replace(sa,"$1")};var Ws=e.jQuery,yr=e.$;return l.noConflict=function(s){return e.$===l&&(e.$=yr),s&&e.jQuery===l&&(e.jQuery=Ws),l},typeof t>"u"&&(e.jQuery=e.$=l),l})})(ro)),ro.exports}var Wf=zf();const Ce=$f(Wf),Gf=()=>{};var Hu={};const dl=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},Kf=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const a=n[t++];e[r++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){const a=n[t++],c=n[t++],p=n[t++],_=((i&7)<<18|(a&63)<<12|(c&63)<<6|p&63)-65536;e[r++]=String.fromCharCode(55296+(_>>10)),e[r++]=String.fromCharCode(56320+(_&1023))}else{const a=n[t++],c=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(a&63)<<6|c&63)}}return e.join("")},pl={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const a=n[i],c=i+1<n.length,p=c?n[i+1]:0,_=i+2<n.length,T=_?n[i+2]:0,b=a>>2,k=(a&3)<<4|p>>4;let L=(p&15)<<2|T>>6,G=T&63;_||(G=64,c||(L=64)),r.push(t[b],t[k],t[L],t[G])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(dl(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):Kf(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const a=t[n.charAt(i++)],p=i<n.length?t[n.charAt(i)]:0;++i;const T=i<n.length?t[n.charAt(i)]:64;++i;const k=i<n.length?t[n.charAt(i)]:64;if(++i,a==null||p==null||T==null||k==null)throw new Qf;const L=a<<2|p>>4;if(r.push(L),T!==64){const G=p<<4&240|T>>2;if(r.push(G),k!==64){const W=T<<6&192|k;r.push(W)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class Qf extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Xf=function(n){const e=dl(n);return pl.encodeByteArray(e,!0)},go=function(n){return Xf(n).replace(/\./g,"")},gl=function(n){try{return pl.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Jf(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const Yf=()=>Jf().__FIREBASE_DEFAULTS__,Zf=()=>{if(typeof process>"u"||typeof Hu>"u")return;const n=Hu.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},ed=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&gl(n[1]);return e&&JSON.parse(e)},Lo=()=>{try{return Gf()||Yf()||Zf()||ed()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},ml=n=>Lo()?.emulatorHosts?.[n],td=n=>{const e=ml(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},yl=()=>Lo()?.config,_l=n=>Lo()?.[`_${n}`];class nd{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}function ai(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function vl(n){return(await fetch(n,{credentials:"include"})).ok}function rd(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,a=n.sub||n.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}},...n};return[go(JSON.stringify(t)),go(JSON.stringify(c)),""].join(".")}const Zi={};function id(){const n={prod:[],emulator:[]};for(const e of Object.keys(Zi))Zi[e]?n.emulator.push(e):n.prod.push(e);return n}function sd(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let zu=!1;function Tl(n,e){if(typeof window>"u"||typeof document>"u"||!ai(window.location.host)||Zi[n]===e||Zi[n]||zu)return;Zi[n]=e;function t(L){return`__firebase__banner__${L}`}const r="__firebase__banner",a=id().prod.length>0;function c(){const L=document.getElementById(r);L&&L.remove()}function p(L){L.style.display="flex",L.style.background="#7faaf0",L.style.position="fixed",L.style.bottom="5px",L.style.left="5px",L.style.padding=".5em",L.style.borderRadius="5px",L.style.alignItems="center"}function _(L,G){L.setAttribute("width","24"),L.setAttribute("id",G),L.setAttribute("height","24"),L.setAttribute("viewBox","0 0 24 24"),L.setAttribute("fill","none"),L.style.marginLeft="-6px"}function T(){const L=document.createElement("span");return L.style.cursor="pointer",L.style.marginLeft="16px",L.style.fontSize="24px",L.innerHTML=" &times;",L.onclick=()=>{zu=!0,c()},L}function b(L,G){L.setAttribute("id",G),L.innerText="Learn more",L.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",L.setAttribute("target","__blank"),L.style.paddingLeft="5px",L.style.textDecoration="underline"}function k(){const L=sd(r),G=t("text"),W=document.getElementById(G)||document.createElement("span"),X=t("learnmore"),Z=document.getElementById(X)||document.createElement("a"),Y=t("preprendIcon"),Ae=document.getElementById(Y)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(L.created){const Se=L.element;p(Se),b(Z,X);const je=T();_(Ae,Y),Se.append(Ae,W,Z,je),document.body.appendChild(Se)}a?(W.innerText="Preview backend disconnected.",Ae.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(Ae.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,W.innerText="Preview backend running in this workspace."),W.setAttribute("id",G)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",k):k()}function pt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function od(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(pt())}function ad(){const n=Lo()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function ud(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function cd(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function ld(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function hd(){const n=pt();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function fd(){return!ad()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function dd(){try{return typeof indexedDB=="object"}catch{return!1}}function pd(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(t){e(t)}})}const gd="FirebaseError";class En extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=gd,Object.setPrototypeOf(this,En.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ys.prototype.create)}}class ys{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,a=this.errors[e],c=a?md(a,r):"Error",p=`${this.serviceName}: ${c} (${i}).`;return new En(i,p,r)}}function md(n,e){return n.replace(yd,(t,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const yd=/\{\$([^}]+)}/g;function _d(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Ir(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const a=n[i],c=e[i];if(Wu(a)&&Wu(c)){if(!Ir(a,c))return!1}else if(a!==c)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function Wu(n){return n!==null&&typeof n=="object"}function _s(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function vd(n,e){const t=new Td(n,e);return t.subscribe.bind(t)}class Td{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");Ed(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=ha),i.error===void 0&&(i.error=ha),i.complete===void 0&&(i.complete=ha);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Ed(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function ha(){}function tn(n){return n&&n._delegate?n._delegate:n}class Ar{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const vr="[DEFAULT]";class wd{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new nd;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Ad(e))try{this.getOrInitializeService({instanceIdentifier:vr})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:i});r.resolve(a)}catch{}}}}clearInstance(e=vr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=vr){return this.instances.has(e)}getOptions(e=vr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[a,c]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(a);r===p&&c.resolve(i)}return i}onInit(e,t){const r=this.normalizeInstanceIdentifier(t),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const a=this.instances.get(r);return a&&e(a,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Id(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=vr){return this.component?this.component.multipleInstances?e:vr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Id(n){return n===vr?void 0:n}function Ad(n){return n.instantiationMode==="EAGER"}class bd{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new wd(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var Ee;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Ee||(Ee={}));const Sd={debug:Ee.DEBUG,verbose:Ee.VERBOSE,info:Ee.INFO,warn:Ee.WARN,error:Ee.ERROR,silent:Ee.SILENT},Cd=Ee.INFO,Rd={[Ee.DEBUG]:"log",[Ee.VERBOSE]:"log",[Ee.INFO]:"info",[Ee.WARN]:"warn",[Ee.ERROR]:"error"},Pd=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),i=Rd[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Ka{constructor(e){this.name=e,this._logLevel=Cd,this._logHandler=Pd,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ee))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Sd[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ee.DEBUG,...e),this._logHandler(this,Ee.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ee.VERBOSE,...e),this._logHandler(this,Ee.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ee.INFO,...e),this._logHandler(this,Ee.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ee.WARN,...e),this._logHandler(this,Ee.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ee.ERROR,...e),this._logHandler(this,Ee.ERROR,...e)}}const kd=(n,e)=>e.some(t=>n instanceof t);let Gu,Ku;function Dd(){return Gu||(Gu=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Nd(){return Ku||(Ku=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const El=new WeakMap,Ia=new WeakMap,wl=new WeakMap,fa=new WeakMap,Qa=new WeakMap;function xd(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",a),n.removeEventListener("error",c)},a=()=>{t(zn(n.result)),i()},c=()=>{r(n.error),i()};n.addEventListener("success",a),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&El.set(t,n)}).catch(()=>{}),Qa.set(e,n),e}function Vd(n){if(Ia.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",c),n.removeEventListener("abort",c)},a=()=>{t(),i()},c=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",a),n.addEventListener("error",c),n.addEventListener("abort",c)});Ia.set(n,e)}let Aa={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Ia.get(n);if(e==="objectStoreNames")return n.objectStoreNames||wl.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return zn(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function Od(n){Aa=n(Aa)}function Ld(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(da(this),e,...t);return wl.set(r,e.sort?e.sort():[e]),zn(r)}:Nd().includes(n)?function(...e){return n.apply(da(this),e),zn(El.get(this))}:function(...e){return zn(n.apply(da(this),e))}}function Md(n){return typeof n=="function"?Ld(n):(n instanceof IDBTransaction&&Vd(n),kd(n,Dd())?new Proxy(n,Aa):n)}function zn(n){if(n instanceof IDBRequest)return xd(n);if(fa.has(n))return fa.get(n);const e=Md(n);return e!==n&&(fa.set(n,e),Qa.set(e,n)),e}const da=n=>Qa.get(n);function Fd(n,e,{blocked:t,upgrade:r,blocking:i,terminated:a}={}){const c=indexedDB.open(n,e),p=zn(c);return r&&c.addEventListener("upgradeneeded",_=>{r(zn(c.result),_.oldVersion,_.newVersion,zn(c.transaction),_)}),t&&c.addEventListener("blocked",_=>t(_.oldVersion,_.newVersion,_)),p.then(_=>{a&&_.addEventListener("close",()=>a()),i&&_.addEventListener("versionchange",T=>i(T.oldVersion,T.newVersion,T))}).catch(()=>{}),p}const Ud=["get","getKey","getAll","getAllKeys","count"],jd=["put","add","delete","clear"],pa=new Map;function Qu(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(pa.get(e))return pa.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=jd.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||Ud.includes(t)))return;const a=async function(c,...p){const _=this.transaction(c,i?"readwrite":"readonly");let T=_.store;return r&&(T=T.index(p.shift())),(await Promise.all([T[t](...p),i&&_.done]))[0]};return pa.set(e,a),a}Od(n=>({...n,get:(e,t,r)=>Qu(e,t)||n.get(e,t,r),has:(e,t)=>!!Qu(e,t)||n.has(e,t)}));class Bd{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(qd(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function qd(n){return n.getComponent()?.type==="VERSION"}const ba="@firebase/app",Xu="0.14.6";const mn=new Ka("@firebase/app"),$d="@firebase/app-compat",Hd="@firebase/analytics-compat",zd="@firebase/analytics",Wd="@firebase/app-check-compat",Gd="@firebase/app-check",Kd="@firebase/auth",Qd="@firebase/auth-compat",Xd="@firebase/database",Jd="@firebase/data-connect",Yd="@firebase/database-compat",Zd="@firebase/functions",ep="@firebase/functions-compat",tp="@firebase/installations",np="@firebase/installations-compat",rp="@firebase/messaging",ip="@firebase/messaging-compat",sp="@firebase/performance",op="@firebase/performance-compat",ap="@firebase/remote-config",up="@firebase/remote-config-compat",cp="@firebase/storage",lp="@firebase/storage-compat",hp="@firebase/firestore",fp="@firebase/ai",dp="@firebase/firestore-compat",pp="firebase",gp="12.6.0";const Sa="[DEFAULT]",mp={[ba]:"fire-core",[$d]:"fire-core-compat",[zd]:"fire-analytics",[Hd]:"fire-analytics-compat",[Gd]:"fire-app-check",[Wd]:"fire-app-check-compat",[Kd]:"fire-auth",[Qd]:"fire-auth-compat",[Xd]:"fire-rtdb",[Jd]:"fire-data-connect",[Yd]:"fire-rtdb-compat",[Zd]:"fire-fn",[ep]:"fire-fn-compat",[tp]:"fire-iid",[np]:"fire-iid-compat",[rp]:"fire-fcm",[ip]:"fire-fcm-compat",[sp]:"fire-perf",[op]:"fire-perf-compat",[ap]:"fire-rc",[up]:"fire-rc-compat",[cp]:"fire-gcs",[lp]:"fire-gcs-compat",[hp]:"fire-fst",[dp]:"fire-fst-compat",[fp]:"fire-vertex","fire-js":"fire-js",[pp]:"fire-js-all"};const mo=new Map,yp=new Map,Ca=new Map;function Ju(n,e){try{n.container.addComponent(e)}catch(t){mn.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Zr(n){const e=n.name;if(Ca.has(e))return mn.debug(`There were multiple attempts to register component ${e}.`),!1;Ca.set(e,n);for(const t of mo.values())Ju(t,n);for(const t of yp.values())Ju(t,n);return!0}function Xa(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Kt(n){return n==null?!1:n.settings!==void 0}const _p={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Wn=new ys("app","Firebase",_p);class vp{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ar("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Wn.create("app-deleted",{appName:this._name})}}const ui=gp;function Il(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r={name:Sa,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw Wn.create("bad-app-name",{appName:String(i)});if(t||(t=yl()),!t)throw Wn.create("no-options");const a=mo.get(i);if(a){if(Ir(t,a.options)&&Ir(r,a.config))return a;throw Wn.create("duplicate-app",{appName:i})}const c=new bd(i);for(const _ of Ca.values())c.addComponent(_);const p=new vp(t,r,c);return mo.set(i,p),p}function Al(n=Sa){const e=mo.get(n);if(!e&&n===Sa&&yl())return Il();if(!e)throw Wn.create("no-app",{appName:n});return e}function Gn(n,e,t){let r=mp[n]??n;t&&(r+=`-${t}`);const i=r.match(/\s|\//),a=e.match(/\s|\//);if(i||a){const c=[`Unable to register library "${r}" with version "${e}":`];i&&c.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&a&&c.push("and"),a&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),mn.warn(c.join(" "));return}Zr(new Ar(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}const Tp="firebase-heartbeat-database",Ep=1,os="firebase-heartbeat-store";let ga=null;function bl(){return ga||(ga=Fd(Tp,Ep,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(os)}catch(t){console.warn(t)}}}}).catch(n=>{throw Wn.create("idb-open",{originalErrorMessage:n.message})})),ga}async function wp(n){try{const t=(await bl()).transaction(os),r=await t.objectStore(os).get(Sl(n));return await t.done,r}catch(e){if(e instanceof En)mn.warn(e.message);else{const t=Wn.create("idb-get",{originalErrorMessage:e?.message});mn.warn(t.message)}}}async function Yu(n,e){try{const r=(await bl()).transaction(os,"readwrite");await r.objectStore(os).put(e,Sl(n)),await r.done}catch(t){if(t instanceof En)mn.warn(t.message);else{const r=Wn.create("idb-set",{originalErrorMessage:t?.message});mn.warn(r.message)}}}function Sl(n){return`${n.name}!${n.options.appId}`}const Ip=1024,Ap=30;class bp{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Cp(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Zu();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>Ap){const i=Rp(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){mn.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Zu(),{heartbeatsToSend:t,unsentEntries:r}=Sp(this._heartbeatsCache.heartbeats),i=go(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return mn.warn(e),""}}}function Zu(){return new Date().toISOString().substring(0,10)}function Sp(n,e=Ip){const t=[];let r=n.slice();for(const i of n){const a=t.find(c=>c.agent===i.agent);if(a){if(a.dates.push(i.date),ec(t)>e){a.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),ec(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class Cp{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return dd()?pd().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await wp(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Yu(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Yu(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function ec(n){return go(JSON.stringify({version:2,heartbeats:n})).length}function Rp(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function Pp(n){Zr(new Ar("platform-logger",e=>new Bd(e),"PRIVATE")),Zr(new Ar("heartbeat",e=>new bp(e),"PRIVATE")),Gn(ba,Xu,n),Gn(ba,Xu,"esm2020"),Gn("fire-js","")}Pp("");var tc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Kn,Cl;(function(){var n;function e(l,C){function S(){}S.prototype=C.prototype,l.F=C.prototype,l.prototype=new S,l.prototype.constructor=l,l.D=function(x,D,M){for(var A=Array(arguments.length-2),We=2;We<arguments.length;We++)A[We-2]=arguments[We];return C.prototype[D].apply(x,A)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(l,C,S){S||(S=0);const x=Array(16);if(typeof C=="string")for(var D=0;D<16;++D)x[D]=C.charCodeAt(S++)|C.charCodeAt(S++)<<8|C.charCodeAt(S++)<<16|C.charCodeAt(S++)<<24;else for(D=0;D<16;++D)x[D]=C[S++]|C[S++]<<8|C[S++]<<16|C[S++]<<24;C=l.g[0],S=l.g[1],D=l.g[2];let M=l.g[3],A;A=C+(M^S&(D^M))+x[0]+3614090360&4294967295,C=S+(A<<7&4294967295|A>>>25),A=M+(D^C&(S^D))+x[1]+3905402710&4294967295,M=C+(A<<12&4294967295|A>>>20),A=D+(S^M&(C^S))+x[2]+606105819&4294967295,D=M+(A<<17&4294967295|A>>>15),A=S+(C^D&(M^C))+x[3]+3250441966&4294967295,S=D+(A<<22&4294967295|A>>>10),A=C+(M^S&(D^M))+x[4]+4118548399&4294967295,C=S+(A<<7&4294967295|A>>>25),A=M+(D^C&(S^D))+x[5]+1200080426&4294967295,M=C+(A<<12&4294967295|A>>>20),A=D+(S^M&(C^S))+x[6]+2821735955&4294967295,D=M+(A<<17&4294967295|A>>>15),A=S+(C^D&(M^C))+x[7]+4249261313&4294967295,S=D+(A<<22&4294967295|A>>>10),A=C+(M^S&(D^M))+x[8]+1770035416&4294967295,C=S+(A<<7&4294967295|A>>>25),A=M+(D^C&(S^D))+x[9]+2336552879&4294967295,M=C+(A<<12&4294967295|A>>>20),A=D+(S^M&(C^S))+x[10]+4294925233&4294967295,D=M+(A<<17&4294967295|A>>>15),A=S+(C^D&(M^C))+x[11]+2304563134&4294967295,S=D+(A<<22&4294967295|A>>>10),A=C+(M^S&(D^M))+x[12]+1804603682&4294967295,C=S+(A<<7&4294967295|A>>>25),A=M+(D^C&(S^D))+x[13]+4254626195&4294967295,M=C+(A<<12&4294967295|A>>>20),A=D+(S^M&(C^S))+x[14]+2792965006&4294967295,D=M+(A<<17&4294967295|A>>>15),A=S+(C^D&(M^C))+x[15]+1236535329&4294967295,S=D+(A<<22&4294967295|A>>>10),A=C+(D^M&(S^D))+x[1]+4129170786&4294967295,C=S+(A<<5&4294967295|A>>>27),A=M+(S^D&(C^S))+x[6]+3225465664&4294967295,M=C+(A<<9&4294967295|A>>>23),A=D+(C^S&(M^C))+x[11]+643717713&4294967295,D=M+(A<<14&4294967295|A>>>18),A=S+(M^C&(D^M))+x[0]+3921069994&4294967295,S=D+(A<<20&4294967295|A>>>12),A=C+(D^M&(S^D))+x[5]+3593408605&4294967295,C=S+(A<<5&4294967295|A>>>27),A=M+(S^D&(C^S))+x[10]+38016083&4294967295,M=C+(A<<9&4294967295|A>>>23),A=D+(C^S&(M^C))+x[15]+3634488961&4294967295,D=M+(A<<14&4294967295|A>>>18),A=S+(M^C&(D^M))+x[4]+3889429448&4294967295,S=D+(A<<20&4294967295|A>>>12),A=C+(D^M&(S^D))+x[9]+568446438&4294967295,C=S+(A<<5&4294967295|A>>>27),A=M+(S^D&(C^S))+x[14]+3275163606&4294967295,M=C+(A<<9&4294967295|A>>>23),A=D+(C^S&(M^C))+x[3]+4107603335&4294967295,D=M+(A<<14&4294967295|A>>>18),A=S+(M^C&(D^M))+x[8]+1163531501&4294967295,S=D+(A<<20&4294967295|A>>>12),A=C+(D^M&(S^D))+x[13]+2850285829&4294967295,C=S+(A<<5&4294967295|A>>>27),A=M+(S^D&(C^S))+x[2]+4243563512&4294967295,M=C+(A<<9&4294967295|A>>>23),A=D+(C^S&(M^C))+x[7]+1735328473&4294967295,D=M+(A<<14&4294967295|A>>>18),A=S+(M^C&(D^M))+x[12]+2368359562&4294967295,S=D+(A<<20&4294967295|A>>>12),A=C+(S^D^M)+x[5]+4294588738&4294967295,C=S+(A<<4&4294967295|A>>>28),A=M+(C^S^D)+x[8]+2272392833&4294967295,M=C+(A<<11&4294967295|A>>>21),A=D+(M^C^S)+x[11]+1839030562&4294967295,D=M+(A<<16&4294967295|A>>>16),A=S+(D^M^C)+x[14]+4259657740&4294967295,S=D+(A<<23&4294967295|A>>>9),A=C+(S^D^M)+x[1]+2763975236&4294967295,C=S+(A<<4&4294967295|A>>>28),A=M+(C^S^D)+x[4]+1272893353&4294967295,M=C+(A<<11&4294967295|A>>>21),A=D+(M^C^S)+x[7]+4139469664&4294967295,D=M+(A<<16&4294967295|A>>>16),A=S+(D^M^C)+x[10]+3200236656&4294967295,S=D+(A<<23&4294967295|A>>>9),A=C+(S^D^M)+x[13]+681279174&4294967295,C=S+(A<<4&4294967295|A>>>28),A=M+(C^S^D)+x[0]+3936430074&4294967295,M=C+(A<<11&4294967295|A>>>21),A=D+(M^C^S)+x[3]+3572445317&4294967295,D=M+(A<<16&4294967295|A>>>16),A=S+(D^M^C)+x[6]+76029189&4294967295,S=D+(A<<23&4294967295|A>>>9),A=C+(S^D^M)+x[9]+3654602809&4294967295,C=S+(A<<4&4294967295|A>>>28),A=M+(C^S^D)+x[12]+3873151461&4294967295,M=C+(A<<11&4294967295|A>>>21),A=D+(M^C^S)+x[15]+530742520&4294967295,D=M+(A<<16&4294967295|A>>>16),A=S+(D^M^C)+x[2]+3299628645&4294967295,S=D+(A<<23&4294967295|A>>>9),A=C+(D^(S|~M))+x[0]+4096336452&4294967295,C=S+(A<<6&4294967295|A>>>26),A=M+(S^(C|~D))+x[7]+1126891415&4294967295,M=C+(A<<10&4294967295|A>>>22),A=D+(C^(M|~S))+x[14]+2878612391&4294967295,D=M+(A<<15&4294967295|A>>>17),A=S+(M^(D|~C))+x[5]+4237533241&4294967295,S=D+(A<<21&4294967295|A>>>11),A=C+(D^(S|~M))+x[12]+1700485571&4294967295,C=S+(A<<6&4294967295|A>>>26),A=M+(S^(C|~D))+x[3]+2399980690&4294967295,M=C+(A<<10&4294967295|A>>>22),A=D+(C^(M|~S))+x[10]+4293915773&4294967295,D=M+(A<<15&4294967295|A>>>17),A=S+(M^(D|~C))+x[1]+2240044497&4294967295,S=D+(A<<21&4294967295|A>>>11),A=C+(D^(S|~M))+x[8]+1873313359&4294967295,C=S+(A<<6&4294967295|A>>>26),A=M+(S^(C|~D))+x[15]+4264355552&4294967295,M=C+(A<<10&4294967295|A>>>22),A=D+(C^(M|~S))+x[6]+2734768916&4294967295,D=M+(A<<15&4294967295|A>>>17),A=S+(M^(D|~C))+x[13]+1309151649&4294967295,S=D+(A<<21&4294967295|A>>>11),A=C+(D^(S|~M))+x[4]+4149444226&4294967295,C=S+(A<<6&4294967295|A>>>26),A=M+(S^(C|~D))+x[11]+3174756917&4294967295,M=C+(A<<10&4294967295|A>>>22),A=D+(C^(M|~S))+x[2]+718787259&4294967295,D=M+(A<<15&4294967295|A>>>17),A=S+(M^(D|~C))+x[9]+3951481745&4294967295,l.g[0]=l.g[0]+C&4294967295,l.g[1]=l.g[1]+(D+(A<<21&4294967295|A>>>11))&4294967295,l.g[2]=l.g[2]+D&4294967295,l.g[3]=l.g[3]+M&4294967295}r.prototype.v=function(l,C){C===void 0&&(C=l.length);const S=C-this.blockSize,x=this.C;let D=this.h,M=0;for(;M<C;){if(D==0)for(;M<=S;)i(this,l,M),M+=this.blockSize;if(typeof l=="string"){for(;M<C;)if(x[D++]=l.charCodeAt(M++),D==this.blockSize){i(this,x),D=0;break}}else for(;M<C;)if(x[D++]=l[M++],D==this.blockSize){i(this,x),D=0;break}}this.h=D,this.o+=C},r.prototype.A=function(){var l=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);l[0]=128;for(var C=1;C<l.length-8;++C)l[C]=0;C=this.o*8;for(var S=l.length-8;S<l.length;++S)l[S]=C&255,C/=256;for(this.v(l),l=Array(16),C=0,S=0;S<4;++S)for(let x=0;x<32;x+=8)l[C++]=this.g[S]>>>x&255;return l};function a(l,C){var S=p;return Object.prototype.hasOwnProperty.call(S,l)?S[l]:S[l]=C(l)}function c(l,C){this.h=C;const S=[];let x=!0;for(let D=l.length-1;D>=0;D--){const M=l[D]|0;x&&M==C||(S[D]=M,x=!1)}this.g=S}var p={};function _(l){return-128<=l&&l<128?a(l,function(C){return new c([C|0],C<0?-1:0)}):new c([l|0],l<0?-1:0)}function T(l){if(isNaN(l)||!isFinite(l))return k;if(l<0)return Z(T(-l));const C=[];let S=1;for(let x=0;l>=S;x++)C[x]=l/S|0,S*=4294967296;return new c(C,0)}function b(l,C){if(l.length==0)throw Error("number format error: empty string");if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(l.charAt(0)=="-")return Z(b(l.substring(1),C));if(l.indexOf("-")>=0)throw Error('number format error: interior "-" character');const S=T(Math.pow(C,8));let x=k;for(let M=0;M<l.length;M+=8){var D=Math.min(8,l.length-M);const A=parseInt(l.substring(M,M+D),C);D<8?(D=T(Math.pow(C,D)),x=x.j(D).add(T(A))):(x=x.j(S),x=x.add(T(A)))}return x}var k=_(0),L=_(1),G=_(16777216);n=c.prototype,n.m=function(){if(X(this))return-Z(this).m();let l=0,C=1;for(let S=0;S<this.g.length;S++){const x=this.i(S);l+=(x>=0?x:4294967296+x)*C,C*=4294967296}return l},n.toString=function(l){if(l=l||10,l<2||36<l)throw Error("radix out of range: "+l);if(W(this))return"0";if(X(this))return"-"+Z(this).toString(l);const C=T(Math.pow(l,6));var S=this;let x="";for(;;){const D=je(S,C).g;S=Y(S,D.j(C));let M=((S.g.length>0?S.g[0]:S.h)>>>0).toString(l);if(S=D,W(S))return M+x;for(;M.length<6;)M="0"+M;x=M+x}},n.i=function(l){return l<0?0:l<this.g.length?this.g[l]:this.h};function W(l){if(l.h!=0)return!1;for(let C=0;C<l.g.length;C++)if(l.g[C]!=0)return!1;return!0}function X(l){return l.h==-1}n.l=function(l){return l=Y(this,l),X(l)?-1:W(l)?0:1};function Z(l){const C=l.g.length,S=[];for(let x=0;x<C;x++)S[x]=~l.g[x];return new c(S,~l.h).add(L)}n.abs=function(){return X(this)?Z(this):this},n.add=function(l){const C=Math.max(this.g.length,l.g.length),S=[];let x=0;for(let D=0;D<=C;D++){let M=x+(this.i(D)&65535)+(l.i(D)&65535),A=(M>>>16)+(this.i(D)>>>16)+(l.i(D)>>>16);x=A>>>16,M&=65535,A&=65535,S[D]=A<<16|M}return new c(S,S[S.length-1]&-2147483648?-1:0)};function Y(l,C){return l.add(Z(C))}n.j=function(l){if(W(this)||W(l))return k;if(X(this))return X(l)?Z(this).j(Z(l)):Z(Z(this).j(l));if(X(l))return Z(this.j(Z(l)));if(this.l(G)<0&&l.l(G)<0)return T(this.m()*l.m());const C=this.g.length+l.g.length,S=[];for(var x=0;x<2*C;x++)S[x]=0;for(x=0;x<this.g.length;x++)for(let D=0;D<l.g.length;D++){const M=this.i(x)>>>16,A=this.i(x)&65535,We=l.i(D)>>>16,sn=l.i(D)&65535;S[2*x+2*D]+=A*sn,Ae(S,2*x+2*D),S[2*x+2*D+1]+=M*sn,Ae(S,2*x+2*D+1),S[2*x+2*D+1]+=A*We,Ae(S,2*x+2*D+1),S[2*x+2*D+2]+=M*We,Ae(S,2*x+2*D+2)}for(l=0;l<C;l++)S[l]=S[2*l+1]<<16|S[2*l];for(l=C;l<2*C;l++)S[l]=0;return new c(S,0)};function Ae(l,C){for(;(l[C]&65535)!=l[C];)l[C+1]+=l[C]>>>16,l[C]&=65535,C++}function Se(l,C){this.g=l,this.h=C}function je(l,C){if(W(C))throw Error("division by zero");if(W(l))return new Se(k,k);if(X(l))return C=je(Z(l),C),new Se(Z(C.g),Z(C.h));if(X(C))return C=je(l,Z(C)),new Se(Z(C.g),C.h);if(l.g.length>30){if(X(l)||X(C))throw Error("slowDivide_ only works with positive integers.");for(var S=L,x=C;x.l(l)<=0;)S=tt(S),x=tt(x);var D=ze(S,1),M=ze(x,1);for(x=ze(x,2),S=ze(S,2);!W(x);){var A=M.add(x);A.l(l)<=0&&(D=D.add(S),M=A),x=ze(x,1),S=ze(S,1)}return C=Y(l,D.j(C)),new Se(D,C)}for(D=k;l.l(C)>=0;){for(S=Math.max(1,Math.floor(l.m()/C.m())),x=Math.ceil(Math.log(S)/Math.LN2),x=x<=48?1:Math.pow(2,x-48),M=T(S),A=M.j(C);X(A)||A.l(l)>0;)S-=x,M=T(S),A=M.j(C);W(M)&&(M=L),D=D.add(M),l=Y(l,A)}return new Se(D,l)}n.B=function(l){return je(this,l).h},n.and=function(l){const C=Math.max(this.g.length,l.g.length),S=[];for(let x=0;x<C;x++)S[x]=this.i(x)&l.i(x);return new c(S,this.h&l.h)},n.or=function(l){const C=Math.max(this.g.length,l.g.length),S=[];for(let x=0;x<C;x++)S[x]=this.i(x)|l.i(x);return new c(S,this.h|l.h)},n.xor=function(l){const C=Math.max(this.g.length,l.g.length),S=[];for(let x=0;x<C;x++)S[x]=this.i(x)^l.i(x);return new c(S,this.h^l.h)};function tt(l){const C=l.g.length+1,S=[];for(let x=0;x<C;x++)S[x]=l.i(x)<<1|l.i(x-1)>>>31;return new c(S,l.h)}function ze(l,C){const S=C>>5;C%=32;const x=l.g.length-S,D=[];for(let M=0;M<x;M++)D[M]=C>0?l.i(M+S)>>>C|l.i(M+S+1)<<32-C:l.i(M+S);return new c(D,l.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,Cl=r,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=T,c.fromString=b,Kn=c}).apply(typeof tc<"u"?tc:typeof self<"u"?self:typeof window<"u"?window:{});var Js=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Rl,Qi,Pl,io,Ra,kl,Dl,Nl;(function(){var n,e=Object.defineProperty;function t(o){o=[typeof globalThis=="object"&&globalThis,o,typeof window=="object"&&window,typeof self=="object"&&self,typeof Js=="object"&&Js];for(var f=0;f<o.length;++f){var g=o[f];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var r=t(this);function i(o,f){if(f)e:{var g=r;o=o.split(".");for(var E=0;E<o.length-1;E++){var O=o[E];if(!(O in g))break e;g=g[O]}o=o[o.length-1],E=g[o],f=f(E),f!=E&&f!=null&&e(g,o,{configurable:!0,writable:!0,value:f})}}i("Symbol.dispose",function(o){return o||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(o){return o||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(o){return o||function(f){var g=[],E;for(E in f)Object.prototype.hasOwnProperty.call(f,E)&&g.push([E,f[E]]);return g}});var a=a||{},c=this||self;function p(o){var f=typeof o;return f=="object"&&o!=null||f=="function"}function _(o,f,g){return o.call.apply(o.bind,arguments)}function T(o,f,g){return T=_,T.apply(null,arguments)}function b(o,f){var g=Array.prototype.slice.call(arguments,1);return function(){var E=g.slice();return E.push.apply(E,arguments),o.apply(this,E)}}function k(o,f){function g(){}g.prototype=f.prototype,o.Z=f.prototype,o.prototype=new g,o.prototype.constructor=o,o.Ob=function(E,O,V){for(var z=Array(arguments.length-2),fe=2;fe<arguments.length;fe++)z[fe-2]=arguments[fe];return f.prototype[O].apply(E,z)}}var L=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?o=>o&&AsyncContext.Snapshot.wrap(o):o=>o;function G(o){const f=o.length;if(f>0){const g=Array(f);for(let E=0;E<f;E++)g[E]=o[E];return g}return[]}function W(o,f){for(let E=1;E<arguments.length;E++){const O=arguments[E];var g=typeof O;if(g=g!="object"?g:O?Array.isArray(O)?"array":g:"null",g=="array"||g=="object"&&typeof O.length=="number"){g=o.length||0;const V=O.length||0;o.length=g+V;for(let z=0;z<V;z++)o[g+z]=O[z]}else o.push(O)}}class X{constructor(f,g){this.i=f,this.j=g,this.h=0,this.g=null}get(){let f;return this.h>0?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function Z(o){c.setTimeout(()=>{throw o},0)}function Y(){var o=l;let f=null;return o.g&&(f=o.g,o.g=o.g.next,o.g||(o.h=null),f.next=null),f}class Ae{constructor(){this.h=this.g=null}add(f,g){const E=Se.get();E.set(f,g),this.h?this.h.next=E:this.g=E,this.h=E}}var Se=new X(()=>new je,o=>o.reset());class je{constructor(){this.next=this.g=this.h=null}set(f,g){this.h=f,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let tt,ze=!1,l=new Ae,C=()=>{const o=Promise.resolve(void 0);tt=()=>{o.then(S)}};function S(){for(var o;o=Y();){try{o.h.call(o.g)}catch(g){Z(g)}var f=Se;f.j(o),f.h<100&&(f.h++,o.next=f.g,f.g=o)}ze=!1}function x(){this.u=this.u,this.C=this.C}x.prototype.u=!1,x.prototype.dispose=function(){this.u||(this.u=!0,this.N())},x.prototype[Symbol.dispose]=function(){this.dispose()},x.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function D(o,f){this.type=o,this.g=this.target=f,this.defaultPrevented=!1}D.prototype.h=function(){this.defaultPrevented=!0};var M=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var o=!1,f=Object.defineProperty({},"passive",{get:function(){o=!0}});try{const g=()=>{};c.addEventListener("test",g,f),c.removeEventListener("test",g,f)}catch{}return o})();function A(o){return/^[\s\xa0]*$/.test(o)}function We(o,f){D.call(this,o?o.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,o&&this.init(o,f)}k(We,D),We.prototype.init=function(o,f){const g=this.type=o.type,E=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:null;this.target=o.target||o.srcElement,this.g=f,f=o.relatedTarget,f||(g=="mouseover"?f=o.fromElement:g=="mouseout"&&(f=o.toElement)),this.relatedTarget=f,E?(this.clientX=E.clientX!==void 0?E.clientX:E.pageX,this.clientY=E.clientY!==void 0?E.clientY:E.pageY,this.screenX=E.screenX||0,this.screenY=E.screenY||0):(this.clientX=o.clientX!==void 0?o.clientX:o.pageX,this.clientY=o.clientY!==void 0?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=o.button,this.key=o.key||"",this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.pointerId=o.pointerId||0,this.pointerType=o.pointerType,this.state=o.state,this.i=o,o.defaultPrevented&&We.Z.h.call(this)},We.prototype.h=function(){We.Z.h.call(this);const o=this.i;o.preventDefault?o.preventDefault():o.returnValue=!1};var sn="closure_listenable_"+(Math.random()*1e6|0),Jo=0;function Pt(o,f,g,E,O){this.listener=o,this.proxy=null,this.src=f,this.type=g,this.capture=!!E,this.ha=O,this.key=++Jo,this.da=this.fa=!1}function wn(o){o.da=!0,o.listener=null,o.proxy=null,o.src=null,o.ha=null}function kt(o,f,g){for(const E in o)f.call(g,o[E],E,o)}function Cs(o,f){for(const g in o)f.call(void 0,o[g],g,o)}function gi(o){const f={};for(const g in o)f[g]=o[g];return f}const mi="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Nr(o,f){let g,E;for(let O=1;O<arguments.length;O++){E=arguments[O];for(g in E)o[g]=E[g];for(let V=0;V<mi.length;V++)g=mi[V],Object.prototype.hasOwnProperty.call(E,g)&&(o[g]=E[g])}}function nr(o){this.src=o,this.g={},this.h=0}nr.prototype.add=function(o,f,g,E,O){const V=o.toString();o=this.g[V],o||(o=this.g[V]=[],this.h++);const z=_i(o,f,E,O);return z>-1?(f=o[z],g||(f.fa=!1)):(f=new Pt(f,this.src,V,!!E,O),f.fa=g,o.push(f)),f};function yi(o,f){const g=f.type;if(g in o.g){var E=o.g[g],O=Array.prototype.indexOf.call(E,f,void 0),V;(V=O>=0)&&Array.prototype.splice.call(E,O,1),V&&(wn(f),o.g[g].length==0&&(delete o.g[g],o.h--))}}function _i(o,f,g,E){for(let O=0;O<o.length;++O){const V=o[O];if(!V.da&&V.listener==f&&V.capture==!!g&&V.ha==E)return O}return-1}var vi="closure_lm_"+(Math.random()*1e6|0),Ti={};function Ei(o,f,g,E,O){if(Array.isArray(f)){for(let V=0;V<f.length;V++)Ei(o,f[V],g,E,O);return null}return g=It(g),o&&o[sn]?o.J(f,g,p(E)?!!E.capture:!1,O):wt(o,f,g,!1,E,O)}function wt(o,f,g,E,O,V){if(!f)throw Error("Invalid event type");const z=p(O)?!!O.capture:!!O;let fe=rr(o);if(fe||(o[vi]=fe=new nr(o)),g=fe.add(f,g,E,z,V),g.proxy)return g;if(E=Yo(),g.proxy=E,E.src=o,E.listener=g,o.addEventListener)M||(O=z),O===void 0&&(O=!1),o.addEventListener(f.toString(),E,O);else if(o.attachEvent)o.attachEvent(wi(f.toString()),E);else if(o.addListener&&o.removeListener)o.addListener(E);else throw Error("addEventListener and attachEvent are unavailable.");return g}function Yo(){function o(g){return f.call(o.src,o.listener,g)}const f=Zo;return o}function on(o,f,g,E,O){if(Array.isArray(f))for(var V=0;V<f.length;V++)on(o,f[V],g,E,O);else E=p(E)?!!E.capture:!!E,g=It(g),o&&o[sn]?(o=o.i,V=String(f).toString(),V in o.g&&(f=o.g[V],g=_i(f,g,E,O),g>-1&&(wn(f[g]),Array.prototype.splice.call(f,g,1),f.length==0&&(delete o.g[V],o.h--)))):o&&(o=rr(o))&&(f=o.g[f.toString()],o=-1,f&&(o=_i(f,g,E,O)),(g=o>-1?f[o]:null)&&In(g))}function In(o){if(typeof o!="number"&&o&&!o.da){var f=o.src;if(f&&f[sn])yi(f.i,o);else{var g=o.type,E=o.proxy;f.removeEventListener?f.removeEventListener(g,E,o.capture):f.detachEvent?f.detachEvent(wi(g),E):f.addListener&&f.removeListener&&f.removeListener(E),(g=rr(f))?(yi(g,o),g.h==0&&(g.src=null,f[vi]=null)):wn(o)}}}function wi(o){return o in Ti?Ti[o]:Ti[o]="on"+o}function Zo(o,f){if(o.da)o=!0;else{f=new We(f,this);const g=o.listener,E=o.ha||o.src;o.fa&&In(o),o=g.call(E,f)}return o}function rr(o){return o=o[vi],o instanceof nr?o:null}var An="__closure_events_fn_"+(Math.random()*1e9>>>0);function It(o){return typeof o=="function"?o:(o[An]||(o[An]=function(f){return o.handleEvent(f)}),o[An])}function Je(){x.call(this),this.i=new nr(this),this.M=this,this.G=null}k(Je,x),Je.prototype[sn]=!0,Je.prototype.removeEventListener=function(o,f,g,E){on(this,o,f,g,E)};function nt(o,f){var g,E=o.G;if(E)for(g=[];E;E=E.G)g.push(E);if(o=o.M,E=f.type||f,typeof f=="string")f=new D(f,o);else if(f instanceof D)f.target=f.target||o;else{var O=f;f=new D(E,o),Nr(f,O)}O=!0;let V,z;if(g)for(z=g.length-1;z>=0;z--)V=f.g=g[z],O=xr(V,E,!0,f)&&O;if(V=f.g=o,O=xr(V,E,!0,f)&&O,O=xr(V,E,!1,f)&&O,g)for(z=0;z<g.length;z++)V=f.g=g[z],O=xr(V,E,!1,f)&&O}Je.prototype.N=function(){if(Je.Z.N.call(this),this.i){var o=this.i;for(const f in o.g){const g=o.g[f];for(let E=0;E<g.length;E++)wn(g[E]);delete o.g[f],o.h--}}this.G=null},Je.prototype.J=function(o,f,g,E){return this.i.add(String(o),f,!1,g,E)},Je.prototype.K=function(o,f,g,E){return this.i.add(String(o),f,!0,g,E)};function xr(o,f,g,E){if(f=o.i.g[String(f)],!f)return!0;f=f.concat();let O=!0;for(let V=0;V<f.length;++V){const z=f[V];if(z&&!z.da&&z.capture==g){const fe=z.listener,Me=z.ha||z.src;z.fa&&yi(o.i,z),O=fe.call(Me,E)!==!1&&O}}return O&&!E.defaultPrevented}function At(o,f){if(typeof o!="function")if(o&&typeof o.handleEvent=="function")o=T(o.handleEvent,o);else throw Error("Invalid listener argument");return Number(f)>2147483647?-1:c.setTimeout(o,f||0)}function bn(o){o.g=At(()=>{o.g=null,o.i&&(o.i=!1,bn(o))},o.l);const f=o.h;o.h=null,o.m.apply(null,f)}class ir extends x{constructor(f,g){super(),this.m=f,this.l=g,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:bn(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function re(o){x.call(this),this.h=o,this.g={}}k(re,x);var rt=[];function Rs(o){kt(o.g,function(f,g){this.g.hasOwnProperty(g)&&In(f)},o),o.g={}}re.prototype.N=function(){re.Z.N.call(this),Rs(this)},re.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ii=c.JSON.stringify,ea=c.JSON.parse,Ps=class{stringify(o){return c.JSON.stringify(o,void 0)}parse(o){return c.JSON.parse(o,void 0)}};function Ai(){}function Sn(){}var gt={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Dt(){D.call(this,"d")}k(Dt,D);function Ft(){D.call(this,"c")}k(Ft,D);var an={},sr=null;function or(){return sr=sr||new Je}an.Ia="serverreachability";function bi(o){D.call(this,an.Ia,o)}k(bi,D);function ar(o){const f=or();nt(f,new bi(f))}an.STAT_EVENT="statevent";function un(o,f){D.call(this,an.STAT_EVENT,o),this.stat=f}k(un,D);function Be(o){const f=or();nt(f,new un(f,o))}an.Ja="timingevent";function Si(o,f){D.call(this,an.Ja,o),this.size=f}k(Si,D);function Cn(o,f){if(typeof o!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){o()},f)}function Ye(){this.g=!0}Ye.prototype.ua=function(){this.g=!1};function ut(o,f,g,E,O,V){o.info(function(){if(o.g)if(V){var z="",fe=V.split("&");for(let ye=0;ye<fe.length;ye++){var Me=fe[ye].split("=");if(Me.length>1){const Le=Me[0];Me=Me[1];const qe=Le.split("_");z=qe.length>=2&&qe[1]=="type"?z+(Le+"="+Me+"&"):z+(Le+"=redacted&")}}}else z=null;else z=V;return"XMLHTTP REQ ("+E+") [attempt "+O+"]: "+f+`
`+g+`
`+z})}function Ci(o,f,g,E,O,V,z){o.info(function(){return"XMLHTTP RESP ("+E+") [ attempt "+O+"]: "+f+`
`+g+`
`+V+" "+z})}function Rn(o,f,g,E){o.info(function(){return"XMLHTTP TEXT ("+f+"): "+Ds(o,g)+(E?" "+E:"")})}function ks(o,f){o.info(function(){return"TIMEOUT: "+f})}Ye.prototype.info=function(){};function Ds(o,f){if(!o.g)return f;if(!f)return null;try{const V=JSON.parse(f);if(V){for(o=0;o<V.length;o++)if(Array.isArray(V[o])){var g=V[o];if(!(g.length<2)){var E=g[1];if(Array.isArray(E)&&!(E.length<1)){var O=E[0];if(O!="noop"&&O!="stop"&&O!="close")for(let z=1;z<E.length;z++)E[z]=""}}}}return Ii(V)}catch{return f}}var Nt={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},cn={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Vr;function Pn(){}k(Pn,Ai),Pn.prototype.g=function(){return new XMLHttpRequest},Vr=new Pn;function ur(o){return encodeURIComponent(String(o))}function ta(o){var f=1;o=o.split(":");const g=[];for(;f>0&&o.length;)g.push(o.shift()),f--;return o.length&&g.push(o.join(":")),g}function Ut(o,f,g,E){this.j=o,this.i=f,this.l=g,this.S=E||1,this.V=new re(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Ri}function Ri(){this.i=null,this.g="",this.h=!1}var Ns={},Pi={};function Or(o,f,g){o.M=1,o.A=Nn(Ne(f)),o.u=g,o.R=!0,xs(o,null)}function xs(o,f){o.F=Date.now(),Dn(o),o.B=Ne(o.A);var g=o.B,E=o.S;Array.isArray(E)||(E=[String(E)]),js(g.i,"t",E),o.C=0,g=o.j.L,o.h=new Ri,o.g=q(o.j,g?f:null,!o.u),o.P>0&&(o.O=new ir(T(o.Y,o,o.g),o.P)),f=o.V,g=o.g,E=o.ba;var O="readystatechange";Array.isArray(O)||(O&&(rt[0]=O.toString()),O=rt);for(let V=0;V<O.length;V++){const z=Ei(g,O[V],E||f.handleEvent,!1,f.h||f);if(!z)break;f.g[z.key]=z}f=o.J?gi(o.J):{},o.u?(o.v||(o.v="POST"),f["Content-Type"]="application/x-www-form-urlencoded",o.g.ea(o.B,o.v,o.u,f)):(o.v="GET",o.g.ea(o.B,o.v,null,f)),ar(),ut(o.i,o.v,o.B,o.l,o.S,o.u)}Ut.prototype.ba=function(o){o=o.target;const f=this.O;f&&Vt(o)==3?f.j():this.Y(o)},Ut.prototype.Y=function(o){try{if(o==this.g)e:{const fe=Vt(this.g),Me=this.g.ya(),ye=this.g.ca();if(!(fe<3)&&(fe!=3||this.g&&(this.h.h||this.g.la()||Hi(this.g)))){this.K||fe!=4||Me==7||(Me==8||ye<=0?ar(3):ar(2)),Lr(this);var f=this.g.ca();this.X=f;var g=kn(this);if(this.o=f==200,Ci(this.i,this.v,this.B,this.l,this.S,fe,f),this.o){if(this.U&&!this.L){t:{if(this.g){var E,O=this.g;if((E=O.g?O.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!A(E)){var V=E;break t}}V=null}if(o=V)Rn(this.i,this.l,o,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Mr(this,o);else{this.o=!1,this.m=3,Be(12),vt(this),lr(this);break e}}if(this.R){o=!0;let Le;for(;!this.K&&this.C<g.length;)if(Le=Di(this,g),Le==Pi){fe==4&&(this.m=4,Be(14),o=!1),Rn(this.i,this.l,null,"[Incomplete Response]");break}else if(Le==Ns){this.m=4,Be(15),Rn(this.i,this.l,g,"[Invalid Chunk]"),o=!1;break}else Rn(this.i,this.l,Le,null),Mr(this,Le);if(ki(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),fe!=4||g.length!=0||this.h.h||(this.m=1,Be(16),o=!1),this.o=this.o&&o,!o)Rn(this.i,this.l,g,"[Invalid Chunked Response]"),vt(this),lr(this);else if(g.length>0&&!this.W){this.W=!0;var z=this.j;z.g==this&&z.aa&&!z.P&&(z.j.info("Great, no buffering proxy detected. Bytes received: "+g.length),d(z),z.P=!0,Be(11))}}else Rn(this.i,this.l,g,null),Mr(this,g);fe==4&&vt(this),this.o&&!this.K&&(fe==4?v(this.j,this):(this.o=!1,Dn(this)))}else zi(this.g),f==400&&g.indexOf("Unknown SID")>0?(this.m=3,Be(12)):(this.m=0,Be(13)),vt(this),lr(this)}}}catch{}finally{}};function kn(o){if(!ki(o))return o.g.la();const f=Hi(o.g);if(f==="")return"";let g="";const E=f.length,O=Vt(o.g)==4;if(!o.h.i){if(typeof TextDecoder>"u")return vt(o),lr(o),"";o.h.i=new c.TextDecoder}for(let V=0;V<E;V++)o.h.h=!0,g+=o.h.i.decode(f[V],{stream:!(O&&V==E-1)});return f.length=0,o.h.g+=g,o.C=0,o.h.g}function ki(o){return o.g?o.v=="GET"&&o.M!=2&&o.j.Aa:!1}function Di(o,f){var g=o.C,E=f.indexOf(`
`,g);return E==-1?Pi:(g=Number(f.substring(g,E)),isNaN(g)?Ns:(E+=1,E+g>f.length?Pi:(f=f.slice(E,E+g),o.C=E+g,f)))}Ut.prototype.cancel=function(){this.K=!0,vt(this)};function Dn(o){o.T=Date.now()+o.H,cr(o,o.H)}function cr(o,f){if(o.D!=null)throw Error("WatchDog timer not null");o.D=Cn(T(o.aa,o),f)}function Lr(o){o.D&&(c.clearTimeout(o.D),o.D=null)}Ut.prototype.aa=function(){this.D=null;const o=Date.now();o-this.T>=0?(ks(this.i,this.B),this.M!=2&&(ar(),Be(17)),vt(this),this.m=2,lr(this)):cr(this,this.T-o)};function lr(o){o.j.I==0||o.K||v(o.j,o)}function vt(o){Lr(o);var f=o.O;f&&typeof f.dispose=="function"&&f.dispose(),o.O=null,Rs(o.V),o.g&&(f=o.g,o.g=null,f.abort(),f.dispose())}function Mr(o,f){try{var g=o.j;if(g.I!=0&&(g.g==o||hr(g.h,o))){if(!o.L&&hr(g.h,o)&&g.I==3){try{var E=g.Ba.g.parse(f)}catch{E=null}if(Array.isArray(E)&&E.length==3){var O=E;if(O[0]==0){e:if(!g.v){if(g.g)if(g.g.F+3e3<o.F)y(g),zt(g);else break e;h(g),Be(18)}}else g.xa=O[1],0<g.xa-g.K&&O[2]<37500&&g.F&&g.A==0&&!g.C&&(g.C=Cn(T(g.Va,g),6e3));Os(g.h)<=1&&g.ta&&(g.ta=void 0)}else I(g,11)}else if((o.L||g.g==o)&&y(g),!A(f))for(O=g.Ba.g.parse(f),f=0;f<O.length;f++){let ye=O[f];const Le=ye[0];if(!(Le<=g.K))if(g.K=Le,ye=ye[1],g.I==2)if(ye[0]=="c"){g.M=ye[1],g.ba=ye[2];const qe=ye[3];qe!=null&&(g.ka=qe,g.j.info("VER="+g.ka));const ct=ye[4];ct!=null&&(g.za=ct,g.j.info("SVER="+g.za));const it=ye[5];it!=null&&typeof it=="number"&&it>0&&(E=1.5*it,g.O=E,g.j.info("backChannelRequestTimeoutMs_="+E)),E=g;const $e=o.g;if($e){const Mn=$e.g?$e.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Mn){var V=E.h;V.g||Mn.indexOf("spdy")==-1&&Mn.indexOf("quic")==-1&&Mn.indexOf("h2")==-1||(V.j=V.l,V.g=new Set,V.h&&(Vi(V,V.h),V.h=null))}if(E.G){const Et=$e.g?$e.g.getResponseHeader("X-HTTP-Session-Id"):null;Et&&(E.wa=Et,ke(E.J,E.G,Et))}}g.I=3,g.l&&g.l.ra(),g.aa&&(g.T=Date.now()-o.F,g.j.info("Handshake RTT: "+g.T+"ms")),E=g;var z=o;if(E.na=B(E,E.L?E.ba:null,E.W),z.L){Ls(E.h,z);var fe=z,Me=E.O;Me&&(fe.H=Me),fe.D&&(Lr(fe),Dn(fe)),E.g=z}else u(E);g.i.length>0&&Ln(g)}else ye[0]!="stop"&&ye[0]!="close"||I(g,7);else g.I==3&&(ye[0]=="stop"||ye[0]=="close"?ye[0]=="stop"?I(g,7):Wi(g):ye[0]!="noop"&&g.l&&g.l.qa(ye),g.A=0)}}ar(4)}catch{}}var Vs=class{constructor(o,f){this.g=o,this.map=f}};function Ni(o){this.l=o||10,c.PerformanceNavigationTiming?(o=c.performance.getEntriesByType("navigation"),o=o.length>0&&(o[0].nextHopProtocol=="hq"||o[0].nextHopProtocol=="h2")):o=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=o?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function xi(o){return o.h?!0:o.g?o.g.size>=o.j:!1}function Os(o){return o.h?1:o.g?o.g.size:0}function hr(o,f){return o.h?o.h==f:o.g?o.g.has(f):!1}function Vi(o,f){o.g?o.g.add(f):o.h=f}function Ls(o,f){o.h&&o.h==f?o.h=null:o.g&&o.g.has(f)&&o.g.delete(f)}Ni.prototype.cancel=function(){if(this.i=Oi(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const o of this.g.values())o.cancel();this.g.clear()}};function Oi(o){if(o.h!=null)return o.i.concat(o.h.G);if(o.g!=null&&o.g.size!==0){let f=o.i;for(const g of o.g.values())f=f.concat(g.G);return f}return G(o.i)}var Li=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Mi(o,f){if(o){o=o.split("&");for(let g=0;g<o.length;g++){const E=o[g].indexOf("=");let O,V=null;E>=0?(O=o[g].substring(0,E),V=o[g].substring(E+1)):O=o[g],f(O,V?decodeURIComponent(V.replace(/\+/g," ")):"")}}}function xt(o){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let f;o instanceof xt?(this.l=o.l,bt(this,o.j),this.o=o.o,this.g=o.g,jt(this,o.u),this.h=o.h,Fi(this,Vn(o.i)),this.m=o.m):o&&(f=String(o).match(Li))?(this.l=!1,bt(this,f[1]||"",!0),this.o=xn(f[2]||""),this.g=xn(f[3]||"",!0),jt(this,f[4]),this.h=xn(f[5]||"",!0),Fi(this,f[6]||"",!0),this.m=xn(f[7]||"")):(this.l=!1,this.i=new dr(null,this.l))}xt.prototype.toString=function(){const o=[];var f=this.j;f&&o.push(Bt(f,Fs,!0),":");var g=this.g;return(g||f=="file")&&(o.push("//"),(f=this.o)&&o.push(Bt(f,Fs,!0),"@"),o.push(ur(g).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.u,g!=null&&o.push(":",String(g))),(g=this.h)&&(this.g&&g.charAt(0)!="/"&&o.push("/"),o.push(Bt(g,g.charAt(0)=="/"?Tt:na,!0))),(g=this.i.toString())&&o.push("?",g),(g=this.m)&&o.push("#",Bt(g,fr)),o.join("")},xt.prototype.resolve=function(o){const f=Ne(this);let g=!!o.j;g?bt(f,o.j):g=!!o.o,g?f.o=o.o:g=!!o.g,g?f.g=o.g:g=o.u!=null;var E=o.h;if(g)jt(f,o.u);else if(g=!!o.h){if(E.charAt(0)!="/")if(this.g&&!this.h)E="/"+E;else{var O=f.h.lastIndexOf("/");O!=-1&&(E=f.h.slice(0,O+1)+E)}if(O=E,O==".."||O==".")E="";else if(O.indexOf("./")!=-1||O.indexOf("/.")!=-1){E=O.lastIndexOf("/",0)==0,O=O.split("/");const V=[];for(let z=0;z<O.length;){const fe=O[z++];fe=="."?E&&z==O.length&&V.push(""):fe==".."?((V.length>1||V.length==1&&V[0]!="")&&V.pop(),E&&z==O.length&&V.push("")):(V.push(fe),E=!0)}E=V.join("/")}else E=O}return g?f.h=E:g=o.i.toString()!=="",g?Fi(f,Vn(o.i)):g=!!o.m,g&&(f.m=o.m),f};function Ne(o){return new xt(o)}function bt(o,f,g){o.j=g?xn(f,!0):f,o.j&&(o.j=o.j.replace(/:$/,""))}function jt(o,f){if(f){if(f=Number(f),isNaN(f)||f<0)throw Error("Bad port number "+f);o.u=f}else o.u=null}function Fi(o,f,g){f instanceof dr?(o.i=f,Ui(o.i,o.l)):(g||(f=Bt(f,Us)),o.i=new dr(f,o.l))}function ke(o,f,g){o.i.set(f,g)}function Nn(o){return ke(o,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),o}function xn(o,f){return o?f?decodeURI(o.replace(/%25/g,"%2525")):decodeURIComponent(o):""}function Bt(o,f,g){return typeof o=="string"?(o=encodeURI(o).replace(f,Ms),g&&(o=o.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o):null}function Ms(o){return o=o.charCodeAt(0),"%"+(o>>4&15).toString(16)+(o&15).toString(16)}var Fs=/[#\/\?@]/g,na=/[#\?:]/g,Tt=/[#\?]/g,Us=/[#\?@]/g,fr=/#/g;function dr(o,f){this.h=this.g=null,this.i=o||null,this.j=!!f}function ln(o){o.g||(o.g=new Map,o.h=0,o.i&&Mi(o.i,function(f,g){o.add(decodeURIComponent(f.replace(/\+/g," ")),g)}))}n=dr.prototype,n.add=function(o,f){ln(this),this.i=null,o=hn(this,o);let g=this.g.get(o);return g||this.g.set(o,g=[]),g.push(f),this.h+=1,this};function qt(o,f){ln(o),f=hn(o,f),o.g.has(f)&&(o.i=null,o.h-=o.g.get(f).length,o.g.delete(f))}function $t(o,f){return ln(o),f=hn(o,f),o.g.has(f)}n.forEach=function(o,f){ln(this),this.g.forEach(function(g,E){g.forEach(function(O){o.call(f,O,E,this)},this)},this)};function Fr(o,f){ln(o);let g=[];if(typeof f=="string")$t(o,f)&&(g=g.concat(o.g.get(hn(o,f))));else for(o=Array.from(o.g.values()),f=0;f<o.length;f++)g=g.concat(o[f]);return g}n.set=function(o,f){return ln(this),this.i=null,o=hn(this,o),$t(this,o)&&(this.h-=this.g.get(o).length),this.g.set(o,[f]),this.h+=1,this},n.get=function(o,f){return o?(o=Fr(this,o),o.length>0?String(o[0]):f):f};function js(o,f,g){qt(o,f),g.length>0&&(o.i=null,o.g.set(hn(o,f),G(g)),o.h+=g.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const o=[],f=Array.from(this.g.keys());for(let E=0;E<f.length;E++){var g=f[E];const O=ur(g);g=Fr(this,g);for(let V=0;V<g.length;V++){let z=O;g[V]!==""&&(z+="="+ur(g[V])),o.push(z)}}return this.i=o.join("&")};function Vn(o){const f=new dr;return f.i=o.i,o.g&&(f.g=new Map(o.g),f.h=o.h),f}function hn(o,f){return f=String(f),o.j&&(f=f.toLowerCase()),f}function Ui(o,f){f&&!o.j&&(ln(o),o.i=null,o.g.forEach(function(g,E){const O=E.toLowerCase();E!=O&&(qt(this,E),js(this,O,g))},o)),o.j=f}function Bs(o,f){const g=new Ye;if(c.Image){const E=new Image;E.onload=b(Ht,g,"TestLoadImage: loaded",!0,f,E),E.onerror=b(Ht,g,"TestLoadImage: error",!1,f,E),E.onabort=b(Ht,g,"TestLoadImage: abort",!1,f,E),E.ontimeout=b(Ht,g,"TestLoadImage: timeout",!1,f,E),c.setTimeout(function(){E.ontimeout&&E.ontimeout()},1e4),E.src=o}else f(!1)}function qs(o,f){const g=new Ye,E=new AbortController,O=setTimeout(()=>{E.abort(),Ht(g,"TestPingServer: timeout",!1,f)},1e4);fetch(o,{signal:E.signal}).then(V=>{clearTimeout(O),V.ok?Ht(g,"TestPingServer: ok",!0,f):Ht(g,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(O),Ht(g,"TestPingServer: error",!1,f)})}function Ht(o,f,g,E,O){try{O&&(O.onload=null,O.onerror=null,O.onabort=null,O.ontimeout=null),E(g)}catch{}}function $s(){this.g=new Ps}function ji(o){this.i=o.Sb||null,this.h=o.ab||!1}k(ji,Ai),ji.prototype.g=function(){return new Ur(this.i,this.h)};function Ur(o,f){Je.call(this),this.H=o,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}k(Ur,Je),n=Ur.prototype,n.open=function(o,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=o,this.D=f,this.readyState=1,gr(this)},n.send=function(o){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const f={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};o&&(f.body=o),(this.H||c).fetch(new Request(this.D,f)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,pr(this)),this.readyState=0},n.Pa=function(o){if(this.g&&(this.l=o,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=o.headers,this.readyState=2,gr(this)),this.g&&(this.readyState=3,gr(this),this.g)))if(this.responseType==="arraybuffer")o.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in o){if(this.j=o.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;jr(this)}else o.text().then(this.Oa.bind(this),this.ga.bind(this))};function jr(o){o.j.read().then(o.Ma.bind(o)).catch(o.ga.bind(o))}n.Ma=function(o){if(this.g){if(this.o&&o.value)this.response.push(o.value);else if(!this.o){var f=o.value?o.value:new Uint8Array(0);(f=this.B.decode(f,{stream:!o.done}))&&(this.response=this.responseText+=f)}o.done?pr(this):gr(this),this.readyState==3&&jr(this)}},n.Oa=function(o){this.g&&(this.response=this.responseText=o,pr(this))},n.Na=function(o){this.g&&(this.response=o,pr(this))},n.ga=function(){this.g&&pr(this)};function pr(o){o.readyState=4,o.l=null,o.j=null,o.B=null,gr(o)}n.setRequestHeader=function(o,f){this.A.append(o,f)},n.getResponseHeader=function(o){return this.h&&this.h.get(o.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const o=[],f=this.h.entries();for(var g=f.next();!g.done;)g=g.value,o.push(g[0]+": "+g[1]),g=f.next();return o.join(`\r
`)};function gr(o){o.onreadystatechange&&o.onreadystatechange.call(o)}Object.defineProperty(Ur.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(o){this.m=o?"include":"same-origin"}});function Hs(o){let f="";return kt(o,function(g,E){f+=E,f+=":",f+=g,f+=`\r
`}),f}function Bi(o,f,g){e:{for(E in g){var E=!1;break e}E=!0}E||(g=Hs(g),typeof o=="string"?g!=null&&ur(g):ke(o,f,g))}function Ve(o){Je.call(this),this.headers=new Map,this.L=o||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}k(Ve,Je);var ra=/^https?$/i,ia=["POST","PUT"];n=Ve.prototype,n.Fa=function(o){this.H=o},n.ea=function(o,f,g,E){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+o);f=f?f.toUpperCase():"GET",this.D=o,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Vr.g(),this.g.onreadystatechange=L(T(this.Ca,this));try{this.B=!0,this.g.open(f,String(o),!0),this.B=!1}catch(V){qi(this,V);return}if(o=g||"",g=new Map(this.headers),E)if(Object.getPrototypeOf(E)===Object.prototype)for(var O in E)g.set(O,E[O]);else if(typeof E.keys=="function"&&typeof E.get=="function")for(const V of E.keys())g.set(V,E.get(V));else throw Error("Unknown input type for opt_headers: "+String(E));E=Array.from(g.keys()).find(V=>V.toLowerCase()=="content-type"),O=c.FormData&&o instanceof c.FormData,!(Array.prototype.indexOf.call(ia,f,void 0)>=0)||E||O||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[V,z]of g)this.g.setRequestHeader(V,z);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(o),this.v=!1}catch(V){qi(this,V)}};function qi(o,f){o.h=!1,o.g&&(o.j=!0,o.g.abort(),o.j=!1),o.l=f,o.o=5,Br(o),On(o)}function Br(o){o.A||(o.A=!0,nt(o,"complete"),nt(o,"error"))}n.abort=function(o){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=o||7,nt(this,"complete"),nt(this,"abort"),On(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),On(this,!0)),Ve.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?$i(this):this.Xa())},n.Xa=function(){$i(this)};function $i(o){if(o.h&&typeof a<"u"){if(o.v&&Vt(o)==4)setTimeout(o.Ca.bind(o),0);else if(nt(o,"readystatechange"),Vt(o)==4){o.h=!1;try{const V=o.ca();e:switch(V){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var g;if(!(g=f)){var E;if(E=V===0){let z=String(o.D).match(Li)[1]||null;!z&&c.self&&c.self.location&&(z=c.self.location.protocol.slice(0,-1)),E=!ra.test(z?z.toLowerCase():"")}g=E}if(g)nt(o,"complete"),nt(o,"success");else{o.o=6;try{var O=Vt(o)>2?o.g.statusText:""}catch{O=""}o.l=O+" ["+o.ca()+"]",Br(o)}}finally{On(o)}}}}function On(o,f){if(o.g){o.m&&(clearTimeout(o.m),o.m=null);const g=o.g;o.g=null,f||nt(o,"ready");try{g.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function Vt(o){return o.g?o.g.readyState:0}n.ca=function(){try{return Vt(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(o){if(this.g){var f=this.g.responseText;return o&&f.indexOf(o)==0&&(f=f.substring(o.length)),ea(f)}};function Hi(o){try{if(!o.g)return null;if("response"in o.g)return o.g.response;switch(o.F){case"":case"text":return o.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in o.g)return o.g.mozResponseArrayBuffer}return null}catch{return null}}function zi(o){const f={};o=(o.g&&Vt(o)>=2&&o.g.getAllResponseHeaders()||"").split(`\r
`);for(let E=0;E<o.length;E++){if(A(o[E]))continue;var g=ta(o[E]);const O=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const V=f[O]||[];f[O]=V,V.push(g)}Cs(f,function(E){return E.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function mr(o,f,g){return g&&g.internalChannelParams&&g.internalChannelParams[o]||f}function zs(o){this.za=0,this.i=[],this.j=new Ye,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=mr("failFast",!1,o),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=mr("baseRetryDelayMs",5e3,o),this.Za=mr("retryDelaySeedMs",1e4,o),this.Ta=mr("forwardChannelMaxRetries",2,o),this.va=mr("forwardChannelRequestTimeoutMs",2e4,o),this.ma=o&&o.xmlHttpFactory||void 0,this.Ua=o&&o.Rb||void 0,this.Aa=o&&o.useFetchStreams||!1,this.O=void 0,this.L=o&&o.supportsCrossDomainXhr||!1,this.M="",this.h=new Ni(o&&o.concurrentRequestLimit),this.Ba=new $s,this.S=o&&o.fastHandshake||!1,this.R=o&&o.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=o&&o.Pb||!1,o&&o.ua&&this.j.ua(),o&&o.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&o&&o.detectBufferingProxy||!1,this.ia=void 0,o&&o.longPollingTimeout&&o.longPollingTimeout>0&&(this.ia=o.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=zs.prototype,n.ka=8,n.I=1,n.connect=function(o,f,g,E){Be(0),this.W=o,this.H=f||{},g&&E!==void 0&&(this.H.OSID=g,this.H.OAID=E),this.F=this.X,this.J=B(this,null,this.W),Ln(this)};function Wi(o){if(Gi(o),o.I==3){var f=o.V++,g=Ne(o.J);if(ke(g,"SID",o.M),ke(g,"RID",f),ke(g,"TYPE","terminate"),yr(o,g),f=new Ut(o,o.j,f),f.M=2,f.A=Nn(Ne(g)),g=!1,c.navigator&&c.navigator.sendBeacon)try{g=c.navigator.sendBeacon(f.A.toString(),"")}catch{}!g&&c.Image&&(new Image().src=f.A,g=!0),g||(f.g=q(f.j,null),f.g.ea(f.A)),f.F=Date.now(),Dn(f)}N(o)}function zt(o){o.g&&(d(o),o.g.cancel(),o.g=null)}function Gi(o){zt(o),o.v&&(c.clearTimeout(o.v),o.v=null),y(o),o.h.cancel(),o.m&&(typeof o.m=="number"&&c.clearTimeout(o.m),o.m=null)}function Ln(o){if(!xi(o.h)&&!o.m){o.m=!0;var f=o.Ea;tt||C(),ze||(tt(),ze=!0),l.add(f,o),o.D=0}}function sa(o,f){return Os(o.h)>=o.h.j-(o.m?1:0)?!1:o.m?(o.i=f.G.concat(o.i),!0):o.I==1||o.I==2||o.D>=(o.Sa?0:o.Ta)?!1:(o.m=Cn(T(o.Ea,o,f),R(o,o.D)),o.D++,!0)}n.Ea=function(o){if(this.m)if(this.m=null,this.I==1){if(!o){this.V=Math.floor(Math.random()*1e5),o=this.V++;const O=new Ut(this,this.j,o);let V=this.o;if(this.U&&(V?(V=gi(V),Nr(V,this.U)):V=this.U),this.u!==null||this.R||(O.J=V,V=null),this.S)e:{for(var f=0,g=0;g<this.i.length;g++){t:{var E=this.i[g];if("__data__"in E.map&&(E=E.map.__data__,typeof E=="string")){E=E.length;break t}E=void 0}if(E===void 0)break;if(f+=E,f>4096){f=g;break e}if(f===4096||g===this.i.length-1){f=g+1;break e}}f=1e3}else f=1e3;f=s(this,O,f),g=Ne(this.J),ke(g,"RID",o),ke(g,"CVER",22),this.G&&ke(g,"X-HTTP-Session-Id",this.G),yr(this,g),V&&(this.R?f="headers="+ur(Hs(V))+"&"+f:this.u&&Bi(g,this.u,V)),Vi(this.h,O),this.Ra&&ke(g,"TYPE","init"),this.S?(ke(g,"$req",f),ke(g,"SID","null"),O.U=!0,Or(O,g,null)):Or(O,g,f),this.I=2}}else this.I==3&&(o?Ws(this,o):this.i.length==0||xi(this.h)||Ws(this))};function Ws(o,f){var g;f?g=f.l:g=o.V++;const E=Ne(o.J);ke(E,"SID",o.M),ke(E,"RID",g),ke(E,"AID",o.K),yr(o,E),o.u&&o.o&&Bi(E,o.u,o.o),g=new Ut(o,o.j,g,o.D+1),o.u===null&&(g.J=o.o),f&&(o.i=f.G.concat(o.i)),f=s(o,g,1e3),g.H=Math.round(o.va*.5)+Math.round(o.va*.5*Math.random()),Vi(o.h,g),Or(g,E,f)}function yr(o,f){o.H&&kt(o.H,function(g,E){ke(f,E,g)}),o.l&&kt({},function(g,E){ke(f,E,g)})}function s(o,f,g){g=Math.min(o.i.length,g);const E=o.l?T(o.l.Ka,o.l,o):null;e:{var O=o.i;let fe=-1;for(;;){const Me=["count="+g];fe==-1?g>0?(fe=O[0].g,Me.push("ofs="+fe)):fe=0:Me.push("ofs="+fe);let ye=!0;for(let Le=0;Le<g;Le++){var V=O[Le].g;const qe=O[Le].map;if(V-=fe,V<0)fe=Math.max(0,O[Le].g-100),ye=!1;else try{V="req"+V+"_"||"";try{var z=qe instanceof Map?qe:Object.entries(qe);for(const[ct,it]of z){let $e=it;p(it)&&($e=Ii(it)),Me.push(V+ct+"="+encodeURIComponent($e))}}catch(ct){throw Me.push(V+"type="+encodeURIComponent("_badmap")),ct}}catch{E&&E(qe)}}if(ye){z=Me.join("&");break e}}z=void 0}return o=o.i.splice(0,g),f.G=o,z}function u(o){if(!o.g&&!o.v){o.Y=1;var f=o.Da;tt||C(),ze||(tt(),ze=!0),l.add(f,o),o.A=0}}function h(o){return o.g||o.v||o.A>=3?!1:(o.Y++,o.v=Cn(T(o.Da,o),R(o,o.A)),o.A++,!0)}n.Da=function(){if(this.v=null,m(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var o=4*this.T;this.j.info("BP detection timer enabled: "+o),this.B=Cn(T(this.Wa,this),o)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Be(10),zt(this),m(this))};function d(o){o.B!=null&&(c.clearTimeout(o.B),o.B=null)}function m(o){o.g=new Ut(o,o.j,"rpc",o.Y),o.u===null&&(o.g.J=o.o),o.g.P=0;var f=Ne(o.na);ke(f,"RID","rpc"),ke(f,"SID",o.M),ke(f,"AID",o.K),ke(f,"CI",o.F?"0":"1"),!o.F&&o.ia&&ke(f,"TO",o.ia),ke(f,"TYPE","xmlhttp"),yr(o,f),o.u&&o.o&&Bi(f,o.u,o.o),o.O&&(o.g.H=o.O);var g=o.g;o=o.ba,g.M=1,g.A=Nn(Ne(f)),g.u=null,g.R=!0,xs(g,o)}n.Va=function(){this.C!=null&&(this.C=null,zt(this),h(this),Be(19))};function y(o){o.C!=null&&(c.clearTimeout(o.C),o.C=null)}function v(o,f){var g=null;if(o.g==f){y(o),d(o),o.g=null;var E=2}else if(hr(o.h,f))g=f.G,Ls(o.h,f),E=1;else return;if(o.I!=0){if(f.o)if(E==1){g=f.u?f.u.length:0,f=Date.now()-f.F;var O=o.D;E=or(),nt(E,new Si(E,g)),Ln(o)}else u(o);else if(O=f.m,O==3||O==0&&f.X>0||!(E==1&&sa(o,f)||E==2&&h(o)))switch(g&&g.length>0&&(f=o.h,f.i=f.i.concat(g)),O){case 1:I(o,5);break;case 4:I(o,10);break;case 3:I(o,6);break;default:I(o,2)}}}function R(o,f){let g=o.Qa+Math.floor(Math.random()*o.Za);return o.isActive()||(g*=2),g*f}function I(o,f){if(o.j.info("Error code "+f),f==2){var g=T(o.bb,o),E=o.Ua;const O=!E;E=new xt(E||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||bt(E,"https"),Nn(E),O?Bs(E.toString(),g):qs(E.toString(),g)}else Be(2);o.I=0,o.l&&o.l.pa(f),N(o),Gi(o)}n.bb=function(o){o?(this.j.info("Successfully pinged google.com"),Be(2)):(this.j.info("Failed to ping google.com"),Be(1))};function N(o){if(o.I=0,o.ja=[],o.l){const f=Oi(o.h);(f.length!=0||o.i.length!=0)&&(W(o.ja,f),W(o.ja,o.i),o.h.i.length=0,G(o.i),o.i.length=0),o.l.oa()}}function B(o,f,g){var E=g instanceof xt?Ne(g):new xt(g);if(E.g!="")f&&(E.g=f+"."+E.g),jt(E,E.u);else{var O=c.location;E=O.protocol,f=f?f+"."+O.hostname:O.hostname,O=+O.port;const V=new xt(null);E&&bt(V,E),f&&(V.g=f),O&&jt(V,O),g&&(V.h=g),E=V}return g=o.G,f=o.wa,g&&f&&ke(E,g,f),ke(E,"VER",o.ka),yr(o,E),E}function q(o,f,g){if(f&&!o.L)throw Error("Can't create secondary domain capable XhrIo object.");return f=o.Aa&&!o.ma?new Ve(new ji({ab:g})):new Ve(o.ma),f.Fa(o.L),f}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function U(){}n=U.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function Q(){}Q.prototype.g=function(o,f){return new ie(o,f)};function ie(o,f){Je.call(this),this.g=new zs(f),this.l=o,this.h=f&&f.messageUrlParams||null,o=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(o?o["X-Client-Protocol"]="webchannel":o={"X-Client-Protocol":"webchannel"}),this.g.o=o,o=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(o?o["X-WebChannel-Content-Type"]=f.messageContentType:o={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.sa&&(o?o["X-WebChannel-Client-Profile"]=f.sa:o={"X-WebChannel-Client-Profile":f.sa}),this.g.U=o,(o=f&&f.Qb)&&!A(o)&&(this.g.u=o),this.A=f&&f.supportsCrossDomainXhr||!1,this.v=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!A(f)&&(this.g.G=f,o=this.h,o!==null&&f in o&&(o=this.h,f in o&&delete o[f])),this.j=new Oe(this)}k(ie,Je),ie.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},ie.prototype.close=function(){Wi(this.g)},ie.prototype.o=function(o){var f=this.g;if(typeof o=="string"){var g={};g.__data__=o,o=g}else this.v&&(g={},g.__data__=Ii(o),o=g);f.i.push(new Vs(f.Ya++,o)),f.I==3&&Ln(f)},ie.prototype.N=function(){this.g.l=null,delete this.j,Wi(this.g),delete this.g,ie.Z.N.call(this)};function _e(o){Dt.call(this),o.__headers__&&(this.headers=o.__headers__,this.statusCode=o.__status__,delete o.__headers__,delete o.__status__);var f=o.__sm__;if(f){e:{for(const g in f){o=g;break e}o=void 0}(this.i=o)&&(o=this.i,f=f!==null&&o in f?f[o]:void 0),this.data=f}else this.data=o}k(_e,Dt);function me(){Ft.call(this),this.status=1}k(me,Ft);function Oe(o){this.g=o}k(Oe,U),Oe.prototype.ra=function(){nt(this.g,"a")},Oe.prototype.qa=function(o){nt(this.g,new _e(o))},Oe.prototype.pa=function(o){nt(this.g,new me)},Oe.prototype.oa=function(){nt(this.g,"b")},Q.prototype.createWebChannel=Q.prototype.g,ie.prototype.send=ie.prototype.o,ie.prototype.open=ie.prototype.m,ie.prototype.close=ie.prototype.close,Nl=function(){return new Q},Dl=function(){return or()},kl=an,Ra={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Nt.NO_ERROR=0,Nt.TIMEOUT=8,Nt.HTTP_ERROR=6,io=Nt,cn.COMPLETE="complete",Pl=cn,Sn.EventType=gt,gt.OPEN="a",gt.CLOSE="b",gt.ERROR="c",gt.MESSAGE="d",Je.prototype.listen=Je.prototype.J,Qi=Sn,Ve.prototype.listenOnce=Ve.prototype.K,Ve.prototype.getLastError=Ve.prototype.Ha,Ve.prototype.getLastErrorCode=Ve.prototype.ya,Ve.prototype.getStatus=Ve.prototype.ca,Ve.prototype.getResponseJson=Ve.prototype.La,Ve.prototype.getResponseText=Ve.prototype.la,Ve.prototype.send=Ve.prototype.ea,Ve.prototype.setWithCredentials=Ve.prototype.Fa,Rl=Ve}).apply(typeof Js<"u"?Js:typeof self<"u"?self:typeof window<"u"?window:{});const nc="@firebase/firestore",rc="4.9.2";class ft{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ft.UNAUTHENTICATED=new ft(null),ft.GOOGLE_CREDENTIALS=new ft("google-credentials-uid"),ft.FIRST_PARTY=new ft("first-party-uid"),ft.MOCK_USER=new ft("mock-user");let ci="12.3.0";const br=new Ka("@firebase/firestore");function Hr(){return br.logLevel}function ne(n,...e){if(br.logLevel<=Ee.DEBUG){const t=e.map(Ja);br.debug(`Firestore (${ci}): ${n}`,...t)}}function yn(n,...e){if(br.logLevel<=Ee.ERROR){const t=e.map(Ja);br.error(`Firestore (${ci}): ${n}`,...t)}}function ei(n,...e){if(br.logLevel<=Ee.WARN){const t=e.map(Ja);br.warn(`Firestore (${ci}): ${n}`,...t)}}function Ja(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function ce(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,xl(n,r,t)}function xl(n,e,t){let r=`FIRESTORE (${ci}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw yn(r),new Error(r)}function Re(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||xl(e,i,r)}function ge(n,e){return n}const K={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class oe extends En{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Qn{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class Vl{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class kp{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(ft.UNAUTHENTICATED)))}shutdown(){}}class Dp{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class Np{constructor(e){this.t=e,this.currentUser=ft.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Re(this.o===void 0,42304);let r=this.i;const i=_=>this.i!==r?(r=this.i,t(_)):Promise.resolve();let a=new Qn;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new Qn,e.enqueueRetryable((()=>i(this.currentUser)))};const c=()=>{const _=a;e.enqueueRetryable((async()=>{await _.promise,await i(this.currentUser)}))},p=_=>{ne("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=_,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((_=>p(_))),setTimeout((()=>{if(!this.auth){const _=this.t.getImmediate({optional:!0});_?p(_):(ne("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Qn)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(ne("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Re(typeof r.accessToken=="string",31837,{l:r}),new Vl(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Re(e===null||typeof e=="string",2055,{h:e}),new ft(e)}}class xp{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=ft.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Vp{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new xp(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(ft.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class ic{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Op{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Kt(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Re(this.o===void 0,3512);const r=a=>{a.error!=null&&ne("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const c=a.token!==this.m;return this.m=a.token,ne("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>r(a)))};const i=a=>{ne("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((a=>i(a))),setTimeout((()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?i(a):ne("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new ic(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Re(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new ic(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function Lp(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class Ya{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=Lp(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<t&&(r+=e.charAt(i[a]%62))}return r}}function we(n,e){return n<e?-1:n>e?1:0}function Pa(n,e){const t=Math.min(n.length,e.length);for(let r=0;r<t;r++){const i=n.charAt(r),a=e.charAt(r);if(i!==a)return ma(i)===ma(a)?we(i,a):ma(i)?1:-1}return we(n.length,e.length)}const Mp=55296,Fp=57343;function ma(n){const e=n.charCodeAt(0);return e>=Mp&&e<=Fp}function ti(n,e,t){return n.length===e.length&&n.every(((r,i)=>t(r,e[i])))}const sc="__name__";class Gt{constructor(e,t,r){t===void 0?t=0:t>e.length&&ce(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&ce(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Gt.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Gt?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const a=Gt.compareSegments(e.get(i),t.get(i));if(a!==0)return a}return we(e.length,t.length)}static compareSegments(e,t){const r=Gt.isNumericId(e),i=Gt.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?Gt.extractNumericId(e).compare(Gt.extractNumericId(t)):Pa(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Kn.fromString(e.substring(4,e.length-2))}}class Fe extends Gt{construct(e,t,r){return new Fe(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new oe(K.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((i=>i.length>0)))}return new Fe(t)}static emptyPath(){return new Fe([])}}const Up=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ot extends Gt{construct(e,t,r){return new ot(e,t,r)}static isValidIdentifier(e){return Up.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ot.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===sc}static keyField(){return new ot([sc])}static fromServerFormat(e){const t=[];let r="",i=0;const a=()=>{if(r.length===0)throw new oe(K.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;i<e.length;){const p=e[i];if(p==="\\"){if(i+1===e.length)throw new oe(K.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const _=e[i+1];if(_!=="\\"&&_!=="."&&_!=="`")throw new oe(K.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=_,i+=2}else p==="`"?(c=!c,i++):p!=="."||c?(r+=p,i++):(a(),i++)}if(a(),c)throw new oe(K.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ot(t)}static emptyPath(){return new ot([])}}class ue{constructor(e){this.path=e}static fromPath(e){return new ue(Fe.fromString(e))}static fromName(e){return new ue(Fe.fromString(e).popFirst(5))}static empty(){return new ue(Fe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Fe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Fe.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ue(new Fe(e.slice()))}}function jp(n,e,t){if(!t)throw new oe(K.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function Bp(n,e,t,r){if(e===!0&&r===!0)throw new oe(K.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function oc(n){if(!ue.isDocumentKey(n))throw new oe(K.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Ol(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Za(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":ce(12329,{type:typeof n})}function as(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new oe(K.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Za(n);throw new oe(K.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function Ke(n,e){const t={typeString:n};return e&&(t.value=e),t}function vs(n,e){if(!Ol(n))throw new oe(K.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const i=e[r].typeString,a="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}const c=n[r];if(i&&typeof c!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(a!==void 0&&c!==a.value){t=`Expected '${r}' field to equal '${a.value}'`;break}}if(t)throw new oe(K.INVALID_ARGUMENT,t);return!0}const ac=-62135596800,uc=1e6;class xe{static now(){return xe.fromMillis(Date.now())}static fromDate(e){return xe.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*uc);return new xe(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new oe(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new oe(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<ac)throw new oe(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new oe(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/uc}_compareTo(e){return this.seconds===e.seconds?we(this.nanoseconds,e.nanoseconds):we(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:xe._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(vs(e,xe._jsonSchema))return new xe(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-ac;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}xe._jsonSchemaVersion="firestore/timestamp/1.0",xe._jsonSchema={type:Ke("string",xe._jsonSchemaVersion),seconds:Ke("number"),nanoseconds:Ke("number")};class pe{static fromTimestamp(e){return new pe(e)}static min(){return new pe(new xe(0,0))}static max(){return new pe(new xe(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const us=-1;function qp(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=pe.fromTimestamp(r===1e9?new xe(t+1,0):new xe(t,r));return new Xn(i,ue.empty(),e)}function $p(n){return new Xn(n.readTime,n.key,us)}class Xn{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Xn(pe.min(),ue.empty(),us)}static max(){return new Xn(pe.max(),ue.empty(),us)}}function Hp(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=ue.comparator(n.documentKey,e.documentKey),t!==0?t:we(n.largestBatchId,e.largestBatchId))}const zp="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Wp{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function li(n){if(n.code!==K.FAILED_PRECONDITION||n.message!==zp)throw n;ne("LocalStore","Unexpectedly lost primary lease")}class H{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ce(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new H(((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,i)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof H?t:H.resolve(t)}catch(t){return H.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):H.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):H.reject(t)}static resolve(e){return new H(((t,r)=>{t(e)}))}static reject(e){return new H(((t,r)=>{r(e)}))}static waitFor(e){return new H(((t,r)=>{let i=0,a=0,c=!1;e.forEach((p=>{++i,p.next((()=>{++a,c&&a===i&&t()}),(_=>r(_)))})),c=!0,a===i&&t()}))}static or(e){let t=H.resolve(!1);for(const r of e)t=t.next((i=>i?H.resolve(i):r()));return t}static forEach(e,t){const r=[];return e.forEach(((i,a)=>{r.push(t.call(this,i,a))})),this.waitFor(r)}static mapArray(e,t){return new H(((r,i)=>{const a=e.length,c=new Array(a);let p=0;for(let _=0;_<a;_++){const T=_;t(e[T]).next((b=>{c[T]=b,++p,p===a&&r(c)}),(b=>i(b)))}}))}static doWhile(e,t){return new H(((r,i)=>{const a=()=>{e()===!0?t().next((()=>{a()}),i):r()};a()}))}}function Gp(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function hi(n){return n.name==="IndexedDbTransactionError"}class Mo{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>t.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Mo.ce=-1;const eu=-1;function Fo(n){return n==null}function yo(n){return n===0&&1/n==-1/0}function Kp(n){return typeof n=="number"&&Number.isInteger(n)&&!yo(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const Ll="";function Qp(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=cc(e)),e=Xp(n.get(t),e);return cc(e)}function Xp(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const a=n.charAt(i);switch(a){case"\0":t+="";break;case Ll:t+="";break;default:t+=a}}return t}function cc(n){return n+Ll+""}function lc(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Rr(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Ml(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class Ue{constructor(e,t){this.comparator=e,this.root=t||st.EMPTY}insert(e,t){return new Ue(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,st.BLACK,null,null))}remove(e){return new Ue(this.comparator,this.root.remove(e,this.comparator).copy(null,null,st.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ys(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ys(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ys(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ys(this.root,e,this.comparator,!0)}}class Ys{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class st{constructor(e,t,r,i,a){this.key=e,this.value=t,this.color=r??st.RED,this.left=i??st.EMPTY,this.right=a??st.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,a){return new st(e??this.key,t??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,t,r),null):a===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return st.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return st.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,st.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,st.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ce(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ce(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ce(27949);return e+(this.isRed()?0:1)}}st.EMPTY=null,st.RED=!0,st.BLACK=!1;st.EMPTY=new class{constructor(){this.size=0}get key(){throw ce(57766)}get value(){throw ce(16141)}get color(){throw ce(16727)}get left(){throw ce(29726)}get right(){throw ce(36894)}copy(e,t,r,i,a){return this}insert(e,t,r){return new st(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Xe{constructor(e){this.comparator=e,this.data=new Ue(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new hc(this.data.getIterator())}getIteratorFrom(e){return new hc(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof Xe)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(this.comparator(i,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Xe(this.comparator);return t.data=e,t}}class hc{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Lt{constructor(e){this.fields=e,e.sort(ot.comparator)}static empty(){return new Lt([])}unionWith(e){let t=new Xe(ot.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Lt(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ti(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}class Fl extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class at{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(i){try{return atob(i)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new Fl("Invalid base64 string: "+a):a}})(e);return new at(t)}static fromUint8Array(e){const t=(function(i){let a="";for(let c=0;c<i.length;++c)a+=String.fromCharCode(i[c]);return a})(e);return new at(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return we(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}at.EMPTY_BYTE_STRING=new at("");const Jp=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Jn(n){if(Re(!!n,39018),typeof n=="string"){let e=0;const t=Jp.exec(n);if(Re(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:He(n.seconds),nanos:He(n.nanos)}}function He(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Yn(n){return typeof n=="string"?at.fromBase64String(n):at.fromUint8Array(n)}const Ul="server_timestamp",jl="__type__",Bl="__previous_value__",ql="__local_write_time__";function tu(n){return(n?.mapValue?.fields||{})[jl]?.stringValue===Ul}function Uo(n){const e=n.mapValue.fields[Bl];return tu(e)?Uo(e):e}function cs(n){const e=Jn(n.mapValue.fields[ql].timestampValue);return new xe(e.seconds,e.nanos)}class Yp{constructor(e,t,r,i,a,c,p,_,T,b){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=c,this.autoDetectLongPolling=p,this.longPollingOptions=_,this.useFetchStreams=T,this.isUsingEmulator=b}}const _o="(default)";class ls{constructor(e,t){this.projectId=e,this.database=t||_o}static empty(){return new ls("","")}get isDefaultDatabase(){return this.database===_o}isEqual(e){return e instanceof ls&&e.projectId===this.projectId&&e.database===this.database}}const $l="__type__",Zp="__max__",Zs={mapValue:{}},Hl="__vector__",vo="value";function Zn(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?tu(n)?4:tg(n)?9007199254740991:eg(n)?10:11:ce(28295,{value:n})}function nn(n,e){if(n===e)return!0;const t=Zn(n);if(t!==Zn(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return cs(n).isEqual(cs(e));case 3:return(function(i,a){if(typeof i.timestampValue=="string"&&typeof a.timestampValue=="string"&&i.timestampValue.length===a.timestampValue.length)return i.timestampValue===a.timestampValue;const c=Jn(i.timestampValue),p=Jn(a.timestampValue);return c.seconds===p.seconds&&c.nanos===p.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(i,a){return Yn(i.bytesValue).isEqual(Yn(a.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(i,a){return He(i.geoPointValue.latitude)===He(a.geoPointValue.latitude)&&He(i.geoPointValue.longitude)===He(a.geoPointValue.longitude)})(n,e);case 2:return(function(i,a){if("integerValue"in i&&"integerValue"in a)return He(i.integerValue)===He(a.integerValue);if("doubleValue"in i&&"doubleValue"in a){const c=He(i.doubleValue),p=He(a.doubleValue);return c===p?yo(c)===yo(p):isNaN(c)&&isNaN(p)}return!1})(n,e);case 9:return ti(n.arrayValue.values||[],e.arrayValue.values||[],nn);case 10:case 11:return(function(i,a){const c=i.mapValue.fields||{},p=a.mapValue.fields||{};if(lc(c)!==lc(p))return!1;for(const _ in c)if(c.hasOwnProperty(_)&&(p[_]===void 0||!nn(c[_],p[_])))return!1;return!0})(n,e);default:return ce(52216,{left:n})}}function hs(n,e){return(n.values||[]).find((t=>nn(t,e)))!==void 0}function ni(n,e){if(n===e)return 0;const t=Zn(n),r=Zn(e);if(t!==r)return we(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return we(n.booleanValue,e.booleanValue);case 2:return(function(a,c){const p=He(a.integerValue||a.doubleValue),_=He(c.integerValue||c.doubleValue);return p<_?-1:p>_?1:p===_?0:isNaN(p)?isNaN(_)?0:-1:1})(n,e);case 3:return fc(n.timestampValue,e.timestampValue);case 4:return fc(cs(n),cs(e));case 5:return Pa(n.stringValue,e.stringValue);case 6:return(function(a,c){const p=Yn(a),_=Yn(c);return p.compareTo(_)})(n.bytesValue,e.bytesValue);case 7:return(function(a,c){const p=a.split("/"),_=c.split("/");for(let T=0;T<p.length&&T<_.length;T++){const b=we(p[T],_[T]);if(b!==0)return b}return we(p.length,_.length)})(n.referenceValue,e.referenceValue);case 8:return(function(a,c){const p=we(He(a.latitude),He(c.latitude));return p!==0?p:we(He(a.longitude),He(c.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return dc(n.arrayValue,e.arrayValue);case 10:return(function(a,c){const p=a.fields||{},_=c.fields||{},T=p[vo]?.arrayValue,b=_[vo]?.arrayValue,k=we(T?.values?.length||0,b?.values?.length||0);return k!==0?k:dc(T,b)})(n.mapValue,e.mapValue);case 11:return(function(a,c){if(a===Zs.mapValue&&c===Zs.mapValue)return 0;if(a===Zs.mapValue)return 1;if(c===Zs.mapValue)return-1;const p=a.fields||{},_=Object.keys(p),T=c.fields||{},b=Object.keys(T);_.sort(),b.sort();for(let k=0;k<_.length&&k<b.length;++k){const L=Pa(_[k],b[k]);if(L!==0)return L;const G=ni(p[_[k]],T[b[k]]);if(G!==0)return G}return we(_.length,b.length)})(n.mapValue,e.mapValue);default:throw ce(23264,{he:t})}}function fc(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return we(n,e);const t=Jn(n),r=Jn(e),i=we(t.seconds,r.seconds);return i!==0?i:we(t.nanos,r.nanos)}function dc(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const a=ni(t[i],r[i]);if(a)return a}return we(t.length,r.length)}function ri(n){return ka(n)}function ka(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const r=Jn(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Yn(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return ue.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",i=!0;for(const a of t.values||[])i?i=!1:r+=",",r+=ka(a);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){const r=Object.keys(t.fields||{}).sort();let i="{",a=!0;for(const c of r)a?a=!1:i+=",",i+=`${c}:${ka(t.fields[c])}`;return i+"}"})(n.mapValue):ce(61005,{value:n})}function so(n){switch(Zn(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Uo(n);return e?16+so(e):16;case 5:return 2*n.stringValue.length;case 6:return Yn(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((i,a)=>i+so(a)),0)})(n.arrayValue);case 10:case 11:return(function(r){let i=0;return Rr(r.fields,((a,c)=>{i+=a.length+so(c)})),i})(n.mapValue);default:throw ce(13486,{value:n})}}function Da(n){return!!n&&"integerValue"in n}function nu(n){return!!n&&"arrayValue"in n}function pc(n){return!!n&&"nullValue"in n}function gc(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function oo(n){return!!n&&"mapValue"in n}function eg(n){return(n?.mapValue?.fields||{})[$l]?.stringValue===Hl}function es(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return Rr(n.mapValue.fields,((t,r)=>e.mapValue.fields[t]=es(r))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=es(n.arrayValue.values[t]);return e}return{...n}}function tg(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===Zp}class Ct{constructor(e){this.value=e}static empty(){return new Ct({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!oo(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=es(t)}setAll(e){let t=ot.emptyPath(),r={},i=[];e.forEach(((c,p)=>{if(!t.isImmediateParentOf(p)){const _=this.getFieldsMap(t);this.applyChanges(_,r,i),r={},i=[],t=p.popLast()}c?r[p.lastSegment()]=es(c):i.push(p.lastSegment())}));const a=this.getFieldsMap(t);this.applyChanges(a,r,i)}delete(e){const t=this.field(e.popLast());oo(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return nn(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];oo(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Rr(t,((i,a)=>e[i]=a));for(const i of r)delete e[i]}clone(){return new Ct(es(this.value))}}function zl(n){const e=[];return Rr(n.fields,((t,r)=>{const i=new ot([t]);if(oo(r)){const a=zl(r.mapValue).fields;if(a.length===0)e.push(i);else for(const c of a)e.push(i.child(c))}else e.push(i)})),new Lt(e)}class dt{constructor(e,t,r,i,a,c,p){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=a,this.data=c,this.documentState=p}static newInvalidDocument(e){return new dt(e,0,pe.min(),pe.min(),pe.min(),Ct.empty(),0)}static newFoundDocument(e,t,r,i){return new dt(e,1,t,pe.min(),r,i,0)}static newNoDocument(e,t){return new dt(e,2,t,pe.min(),pe.min(),Ct.empty(),0)}static newUnknownDocument(e,t){return new dt(e,3,t,pe.min(),pe.min(),Ct.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(pe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ct.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ct.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=pe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof dt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new dt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class To{constructor(e,t){this.position=e,this.inclusive=t}}function mc(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const a=e[i],c=n.position[i];if(a.field.isKeyField()?r=ue.comparator(ue.fromName(c.referenceValue),t.key):r=ni(c,t.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function yc(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!nn(n.position[t],e.position[t]))return!1;return!0}class Eo{constructor(e,t="asc"){this.field=e,this.dir=t}}function ng(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class Wl{}class Qe extends Wl{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new ig(e,t,r):t==="array-contains"?new ag(e,r):t==="in"?new ug(e,r):t==="not-in"?new cg(e,r):t==="array-contains-any"?new lg(e,r):new Qe(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new sg(e,r):new og(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(ni(t,this.value)):t!==null&&Zn(this.value)===Zn(t)&&this.matchesComparison(ni(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ce(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class rn extends Wl{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new rn(e,t)}matches(e){return Gl(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Gl(n){return n.op==="and"}function Kl(n){return rg(n)&&Gl(n)}function rg(n){for(const e of n.filters)if(e instanceof rn)return!1;return!0}function Na(n){if(n instanceof Qe)return n.field.canonicalString()+n.op.toString()+ri(n.value);if(Kl(n))return n.filters.map((e=>Na(e))).join(",");{const e=n.filters.map((t=>Na(t))).join(",");return`${n.op}(${e})`}}function Ql(n,e){return n instanceof Qe?(function(r,i){return i instanceof Qe&&r.op===i.op&&r.field.isEqual(i.field)&&nn(r.value,i.value)})(n,e):n instanceof rn?(function(r,i){return i instanceof rn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce(((a,c,p)=>a&&Ql(c,i.filters[p])),!0):!1})(n,e):void ce(19439)}function Xl(n){return n instanceof Qe?(function(t){return`${t.field.canonicalString()} ${t.op} ${ri(t.value)}`})(n):n instanceof rn?(function(t){return t.op.toString()+" {"+t.getFilters().map(Xl).join(" ,")+"}"})(n):"Filter"}class ig extends Qe{constructor(e,t,r){super(e,t,r),this.key=ue.fromName(r.referenceValue)}matches(e){const t=ue.comparator(e.key,this.key);return this.matchesComparison(t)}}class sg extends Qe{constructor(e,t){super(e,"in",t),this.keys=Jl("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class og extends Qe{constructor(e,t){super(e,"not-in",t),this.keys=Jl("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function Jl(n,e){return(e.arrayValue?.values||[]).map((t=>ue.fromName(t.referenceValue)))}class ag extends Qe{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return nu(t)&&hs(t.arrayValue,this.value)}}class ug extends Qe{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&hs(this.value.arrayValue,t)}}class cg extends Qe{constructor(e,t){super(e,"not-in",t)}matches(e){if(hs(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!hs(this.value.arrayValue,t)}}class lg extends Qe{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!nu(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>hs(this.value.arrayValue,r)))}}class hg{constructor(e,t=null,r=[],i=[],a=null,c=null,p=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=c,this.endAt=p,this.Te=null}}function _c(n,e=null,t=[],r=[],i=null,a=null,c=null){return new hg(n,e,t,r,i,a,c)}function ru(n){const e=ge(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>Na(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(a){return a.field.canonicalString()+a.dir})(r))).join(","),Fo(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>ri(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>ri(r))).join(",")),e.Te=t}return e.Te}function iu(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!ng(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!Ql(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!yc(n.startAt,e.startAt)&&yc(n.endAt,e.endAt)}function xa(n){return ue.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}class jo{constructor(e,t=null,r=[],i=[],a=null,c="F",p=null,_=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=c,this.startAt=p,this.endAt=_,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function fg(n,e,t,r,i,a,c,p){return new jo(n,e,t,r,i,a,c,p)}function su(n){return new jo(n)}function vc(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function dg(n){return n.collectionGroup!==null}function ts(n){const e=ge(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const a of e.explicitOrderBy)e.Ie.push(a),t.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let p=new Xe(ot.comparator);return c.filters.forEach((_=>{_.getFlattenedFilters().forEach((T=>{T.isInequality()&&(p=p.add(T.field))}))})),p})(e).forEach((a=>{t.has(a.canonicalString())||a.isKeyField()||e.Ie.push(new Eo(a,r))})),t.has(ot.keyField().canonicalString())||e.Ie.push(new Eo(ot.keyField(),r))}return e.Ie}function Qt(n){const e=ge(n);return e.Ee||(e.Ee=pg(e,ts(n))),e.Ee}function pg(n,e){if(n.limitType==="F")return _c(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((i=>{const a=i.dir==="desc"?"asc":"desc";return new Eo(i.field,a)}));const t=n.endAt?new To(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new To(n.startAt.position,n.startAt.inclusive):null;return _c(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function Va(n,e,t){return new jo(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Bo(n,e){return iu(Qt(n),Qt(e))&&n.limitType===e.limitType}function Yl(n){return`${ru(Qt(n))}|lt:${n.limitType}`}function zr(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((i=>Xl(i))).join(", ")}]`),Fo(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((i=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(i))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((i=>ri(i))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((i=>ri(i))).join(",")),`Target(${r})`})(Qt(n))}; limitType=${n.limitType})`}function qo(n,e){return e.isFoundDocument()&&(function(r,i){const a=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):ue.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)})(n,e)&&(function(r,i){for(const a of ts(r))if(!a.field.isKeyField()&&i.data.field(a.field)===null)return!1;return!0})(n,e)&&(function(r,i){for(const a of r.filters)if(!a.matches(i))return!1;return!0})(n,e)&&(function(r,i){return!(r.startAt&&!(function(c,p,_){const T=mc(c,p,_);return c.inclusive?T<=0:T<0})(r.startAt,ts(r),i)||r.endAt&&!(function(c,p,_){const T=mc(c,p,_);return c.inclusive?T>=0:T>0})(r.endAt,ts(r),i))})(n,e)}function gg(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Zl(n){return(e,t)=>{let r=!1;for(const i of ts(n)){const a=mg(i,e,t);if(a!==0)return a;r=r||i.field.isKeyField()}return 0}}function mg(n,e,t){const r=n.field.isKeyField()?ue.comparator(e.key,t.key):(function(a,c,p){const _=c.data.field(a),T=p.data.field(a);return _!==null&&T!==null?ni(_,T):ce(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ce(19790,{direction:n.dir})}}class Pr{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[i,a]of r)if(this.equalsFn(i,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Rr(this.inner,((t,r)=>{for(const[i,a]of r)e(i,a)}))}isEmpty(){return Ml(this.inner)}size(){return this.innerSize}}const yg=new Ue(ue.comparator);function _n(){return yg}const eh=new Ue(ue.comparator);function Xi(...n){let e=eh;for(const t of n)e=e.insert(t.key,t);return e}function th(n){let e=eh;return n.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function Tr(){return ns()}function nh(){return ns()}function ns(){return new Pr((n=>n.toString()),((n,e)=>n.isEqual(e)))}const _g=new Ue(ue.comparator),vg=new Xe(ue.comparator);function Ie(...n){let e=vg;for(const t of n)e=e.add(t);return e}const Tg=new Xe(we);function Eg(){return Tg}function ou(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:yo(e)?"-0":e}}function rh(n){return{integerValue:""+n}}function wg(n,e){return Kp(e)?rh(e):ou(n,e)}class $o{constructor(){this._=void 0}}function Ig(n,e,t){return n instanceof fs?(function(i,a){const c={fields:{[jl]:{stringValue:Ul},[ql]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return a&&tu(a)&&(a=Uo(a)),a&&(c.fields[Bl]=a),{mapValue:c}})(t,e):n instanceof ds?sh(n,e):n instanceof ps?oh(n,e):(function(i,a){const c=ih(i,a),p=Tc(c)+Tc(i.Ae);return Da(c)&&Da(i.Ae)?rh(p):ou(i.serializer,p)})(n,e)}function Ag(n,e,t){return n instanceof ds?sh(n,e):n instanceof ps?oh(n,e):t}function ih(n,e){return n instanceof wo?(function(r){return Da(r)||(function(a){return!!a&&"doubleValue"in a})(r)})(e)?e:{integerValue:0}:null}class fs extends $o{}class ds extends $o{constructor(e){super(),this.elements=e}}function sh(n,e){const t=ah(e);for(const r of n.elements)t.some((i=>nn(i,r)))||t.push(r);return{arrayValue:{values:t}}}class ps extends $o{constructor(e){super(),this.elements=e}}function oh(n,e){let t=ah(e);for(const r of n.elements)t=t.filter((i=>!nn(i,r)));return{arrayValue:{values:t}}}class wo extends $o{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function Tc(n){return He(n.integerValue||n.doubleValue)}function ah(n){return nu(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class bg{constructor(e,t){this.field=e,this.transform=t}}function Sg(n,e){return n.field.isEqual(e.field)&&(function(r,i){return r instanceof ds&&i instanceof ds||r instanceof ps&&i instanceof ps?ti(r.elements,i.elements,nn):r instanceof wo&&i instanceof wo?nn(r.Ae,i.Ae):r instanceof fs&&i instanceof fs})(n.transform,e.transform)}class Cg{constructor(e,t){this.version=e,this.transformResults=t}}class gn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new gn}static exists(e){return new gn(void 0,e)}static updateTime(e){return new gn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ao(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Ho{}function uh(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new lh(n.key,gn.none()):new Ts(n.key,n.data,gn.none());{const t=n.data,r=Ct.empty();let i=new Xe(ot.comparator);for(let a of e.fields)if(!i.has(a)){let c=t.field(a);c===null&&a.length>1&&(a=a.popLast(),c=t.field(a)),c===null?r.delete(a):r.set(a,c),i=i.add(a)}return new kr(n.key,r,new Lt(i.toArray()),gn.none())}}function Rg(n,e,t){n instanceof Ts?(function(i,a,c){const p=i.value.clone(),_=wc(i.fieldTransforms,a,c.transformResults);p.setAll(_),a.convertToFoundDocument(c.version,p).setHasCommittedMutations()})(n,e,t):n instanceof kr?(function(i,a,c){if(!ao(i.precondition,a))return void a.convertToUnknownDocument(c.version);const p=wc(i.fieldTransforms,a,c.transformResults),_=a.data;_.setAll(ch(i)),_.setAll(p),a.convertToFoundDocument(c.version,_).setHasCommittedMutations()})(n,e,t):(function(i,a,c){a.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function rs(n,e,t,r){return n instanceof Ts?(function(a,c,p,_){if(!ao(a.precondition,c))return p;const T=a.value.clone(),b=Ic(a.fieldTransforms,_,c);return T.setAll(b),c.convertToFoundDocument(c.version,T).setHasLocalMutations(),null})(n,e,t,r):n instanceof kr?(function(a,c,p,_){if(!ao(a.precondition,c))return p;const T=Ic(a.fieldTransforms,_,c),b=c.data;return b.setAll(ch(a)),b.setAll(T),c.convertToFoundDocument(c.version,b).setHasLocalMutations(),p===null?null:p.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((k=>k.field)))})(n,e,t,r):(function(a,c,p){return ao(a.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):p})(n,e,t)}function Pg(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),a=ih(r.transform,i||null);a!=null&&(t===null&&(t=Ct.empty()),t.set(r.field,a))}return t||null}function Ec(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&ti(r,i,((a,c)=>Sg(a,c)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Ts extends Ho{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class kr extends Ho{constructor(e,t,r,i,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function ch(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}})),e}function wc(n,e,t){const r=new Map;Re(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let i=0;i<t.length;i++){const a=n[i],c=a.transform,p=e.data.field(a.field);r.set(a.field,Ag(c,p,t[i]))}return r}function Ic(n,e,t){const r=new Map;for(const i of n){const a=i.transform,c=t.data.field(i.field);r.set(i.field,Ig(a,c,e))}return r}class lh extends Ho{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class kg extends Ho{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Dg{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&Rg(a,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=rs(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=rs(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=nh();return this.mutations.forEach((i=>{const a=e.get(i.key),c=a.overlayedDocument;let p=this.applyToLocalView(c,a.mutatedFields);p=t.has(i.key)?null:p;const _=uh(c,p);_!==null&&r.set(i.key,_),c.isValidDocument()||c.convertToNoDocument(pe.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Ie())}isEqual(e){return this.batchId===e.batchId&&ti(this.mutations,e.mutations,((t,r)=>Ec(t,r)))&&ti(this.baseMutations,e.baseMutations,((t,r)=>Ec(t,r)))}}class au{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Re(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=(function(){return _g})();const a=e.mutations;for(let c=0;c<a.length;c++)i=i.insert(a[c].key,r[c].version);return new au(e,t,r,i)}}class Ng{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class xg{constructor(e,t){this.count=e,this.unchangedNames=t}}var Ge,be;function Vg(n){switch(n){case K.OK:return ce(64938);case K.CANCELLED:case K.UNKNOWN:case K.DEADLINE_EXCEEDED:case K.RESOURCE_EXHAUSTED:case K.INTERNAL:case K.UNAVAILABLE:case K.UNAUTHENTICATED:return!1;case K.INVALID_ARGUMENT:case K.NOT_FOUND:case K.ALREADY_EXISTS:case K.PERMISSION_DENIED:case K.FAILED_PRECONDITION:case K.ABORTED:case K.OUT_OF_RANGE:case K.UNIMPLEMENTED:case K.DATA_LOSS:return!0;default:return ce(15467,{code:n})}}function hh(n){if(n===void 0)return yn("GRPC error has no .code"),K.UNKNOWN;switch(n){case Ge.OK:return K.OK;case Ge.CANCELLED:return K.CANCELLED;case Ge.UNKNOWN:return K.UNKNOWN;case Ge.DEADLINE_EXCEEDED:return K.DEADLINE_EXCEEDED;case Ge.RESOURCE_EXHAUSTED:return K.RESOURCE_EXHAUSTED;case Ge.INTERNAL:return K.INTERNAL;case Ge.UNAVAILABLE:return K.UNAVAILABLE;case Ge.UNAUTHENTICATED:return K.UNAUTHENTICATED;case Ge.INVALID_ARGUMENT:return K.INVALID_ARGUMENT;case Ge.NOT_FOUND:return K.NOT_FOUND;case Ge.ALREADY_EXISTS:return K.ALREADY_EXISTS;case Ge.PERMISSION_DENIED:return K.PERMISSION_DENIED;case Ge.FAILED_PRECONDITION:return K.FAILED_PRECONDITION;case Ge.ABORTED:return K.ABORTED;case Ge.OUT_OF_RANGE:return K.OUT_OF_RANGE;case Ge.UNIMPLEMENTED:return K.UNIMPLEMENTED;case Ge.DATA_LOSS:return K.DATA_LOSS;default:return ce(39323,{code:n})}}(be=Ge||(Ge={}))[be.OK=0]="OK",be[be.CANCELLED=1]="CANCELLED",be[be.UNKNOWN=2]="UNKNOWN",be[be.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",be[be.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",be[be.NOT_FOUND=5]="NOT_FOUND",be[be.ALREADY_EXISTS=6]="ALREADY_EXISTS",be[be.PERMISSION_DENIED=7]="PERMISSION_DENIED",be[be.UNAUTHENTICATED=16]="UNAUTHENTICATED",be[be.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",be[be.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",be[be.ABORTED=10]="ABORTED",be[be.OUT_OF_RANGE=11]="OUT_OF_RANGE",be[be.UNIMPLEMENTED=12]="UNIMPLEMENTED",be[be.INTERNAL=13]="INTERNAL",be[be.UNAVAILABLE=14]="UNAVAILABLE",be[be.DATA_LOSS=15]="DATA_LOSS";function Og(){return new TextEncoder}const Lg=new Kn([4294967295,4294967295],0);function Ac(n){const e=Og().encode(n),t=new Cl;return t.update(e),new Uint8Array(t.digest())}function bc(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new Kn([t,r],0),new Kn([i,a],0)]}class uu{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Ji(`Invalid padding: ${t}`);if(r<0)throw new Ji(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ji(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Ji(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Kn.fromNumber(this.ge)}ye(e,t,r){let i=e.add(t.multiply(Kn.fromNumber(r)));return i.compare(Lg)===1&&(i=new Kn([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=Ac(e),[r,i]=bc(t);for(let a=0;a<this.hashCount;a++){const c=this.ye(r,i,a);if(!this.we(c))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),c=new uu(a,i,t);return r.forEach((p=>c.insert(p))),c}insert(e){if(this.ge===0)return;const t=Ac(e),[r,i]=bc(t);for(let a=0;a<this.hashCount;a++){const c=this.ye(r,i,a);this.Se(c)}}Se(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class Ji extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class zo{constructor(e,t,r,i,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,Es.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new zo(pe.min(),i,new Ue(we),_n(),Ie())}}class Es{constructor(e,t,r,i,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Es(r,t,Ie(),Ie(),Ie())}}class uo{constructor(e,t,r,i){this.be=e,this.removedTargetIds=t,this.key=r,this.De=i}}class fh{constructor(e,t){this.targetId=e,this.Ce=t}}class dh{constructor(e,t,r=at.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class Sc{constructor(){this.ve=0,this.Fe=Cc(),this.Me=at.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ie(),t=Ie(),r=Ie();return this.Fe.forEach(((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:ce(38017,{changeType:a})}})),new Es(this.Me,this.xe,e,t,r)}qe(){this.Oe=!1,this.Fe=Cc()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Re(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class Mg{constructor(e){this.Ge=e,this.ze=new Map,this.je=_n(),this.Je=eo(),this.He=eo(),this.Ye=new Ue(we)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:ce(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((r,i)=>{this.rt(i)&&t(i)}))}st(e){const t=e.targetId,r=e.Ce.count,i=this.ot(t);if(i){const a=i.target;if(xa(a))if(r===0){const c=new ue(a.path);this.et(t,c,dt.newNoDocument(c,pe.min()))}else Re(r===1,20013,{expectedCount:r});else{const c=this._t(t);if(c!==r){const p=this.ut(e),_=p?this.ct(p,e,c):1;if(_!==0){this.it(t);const T=_===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,T)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:a=0}=t;let c,p;try{c=Yn(r).toUint8Array()}catch(_){if(_ instanceof Fl)return ei("Decoding the base64 bloom filter in existence filter failed ("+_.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw _}try{p=new uu(c,i,a)}catch(_){return ei(_ instanceof Ji?"BloomFilter error: ":"Applying bloom filter failed: ",_),null}return p.ge===0?null:p}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){const r=this.Ge.getRemoteKeysForTarget(t);let i=0;return r.forEach((a=>{const c=this.Ge.ht(),p=`projects/${c.projectId}/databases/${c.database}/documents/${a.path.canonicalString()}`;e.mightContain(p)||(this.et(t,a,null),i++)})),i}Tt(e){const t=new Map;this.ze.forEach(((a,c)=>{const p=this.ot(c);if(p){if(a.current&&xa(p.target)){const _=new ue(p.target.path);this.It(_).has(c)||this.Et(c,_)||this.et(c,_,dt.newNoDocument(_,e))}a.Be&&(t.set(c,a.ke()),a.qe())}}));let r=Ie();this.He.forEach(((a,c)=>{let p=!0;c.forEachWhile((_=>{const T=this.ot(_);return!T||T.purpose==="TargetPurposeLimboResolution"||(p=!1,!1)})),p&&(r=r.add(a))})),this.je.forEach(((a,c)=>c.setReadTime(e)));const i=new zo(e,t,this.Ye,this.je,r);return this.je=_n(),this.Je=eo(),this.He=eo(),this.Ye=new Ue(we),i}Xe(e,t){if(!this.rt(e))return;const r=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,r),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,t)?i.Qe(t,1):i.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new Sc,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Xe(we),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Xe(we),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||ne("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Sc),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function eo(){return new Ue(ue.comparator)}function Cc(){return new Ue(ue.comparator)}const Fg={asc:"ASCENDING",desc:"DESCENDING"},Ug={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},jg={and:"AND",or:"OR"};class Bg{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Oa(n,e){return n.useProto3Json||Fo(e)?e:{value:e}}function Io(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function ph(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function qg(n,e){return Io(n,e.toTimestamp())}function Xt(n){return Re(!!n,49232),pe.fromTimestamp((function(t){const r=Jn(t);return new xe(r.seconds,r.nanos)})(n))}function cu(n,e){return La(n,e).canonicalString()}function La(n,e){const t=(function(i){return new Fe(["projects",i.projectId,"databases",i.database])})(n).child("documents");return e===void 0?t:t.child(e)}function gh(n){const e=Fe.fromString(n);return Re(Th(e),10190,{key:e.toString()}),e}function Ma(n,e){return cu(n.databaseId,e.path)}function ya(n,e){const t=gh(e);if(t.get(1)!==n.databaseId.projectId)throw new oe(K.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new oe(K.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ue(yh(t))}function mh(n,e){return cu(n.databaseId,e)}function $g(n){const e=gh(n);return e.length===4?Fe.emptyPath():yh(e)}function Fa(n){return new Fe(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function yh(n){return Re(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function Rc(n,e,t){return{name:Ma(n,e),fields:t.value.mapValue.fields}}function Hg(n,e){let t;if("targetChange"in e){e.targetChange;const r=(function(T){return T==="NO_CHANGE"?0:T==="ADD"?1:T==="REMOVE"?2:T==="CURRENT"?3:T==="RESET"?4:ce(39313,{state:T})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],a=(function(T,b){return T.useProto3Json?(Re(b===void 0||typeof b=="string",58123),at.fromBase64String(b||"")):(Re(b===void 0||b instanceof Buffer||b instanceof Uint8Array,16193),at.fromUint8Array(b||new Uint8Array))})(n,e.targetChange.resumeToken),c=e.targetChange.cause,p=c&&(function(T){const b=T.code===void 0?K.UNKNOWN:hh(T.code);return new oe(b,T.message||"")})(c);t=new dh(r,i,a,p||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=ya(n,r.document.name),a=Xt(r.document.updateTime),c=r.document.createTime?Xt(r.document.createTime):pe.min(),p=new Ct({mapValue:{fields:r.document.fields}}),_=dt.newFoundDocument(i,a,c,p),T=r.targetIds||[],b=r.removedTargetIds||[];t=new uo(T,b,_.key,_)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=ya(n,r.document),a=r.readTime?Xt(r.readTime):pe.min(),c=dt.newNoDocument(i,a),p=r.removedTargetIds||[];t=new uo([],p,c.key,c)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=ya(n,r.document),a=r.removedTargetIds||[];t=new uo([],a,i,null)}else{if(!("filter"in e))return ce(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:a}=r,c=new xg(i,a),p=r.targetId;t=new fh(p,c)}}return t}function zg(n,e){let t;if(e instanceof Ts)t={update:Rc(n,e.key,e.value)};else if(e instanceof lh)t={delete:Ma(n,e.key)};else if(e instanceof kr)t={update:Rc(n,e.key,e.data),updateMask:em(e.fieldMask)};else{if(!(e instanceof kg))return ce(16599,{Vt:e.type});t={verify:Ma(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(a,c){const p=c.transform;if(p instanceof fs)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(p instanceof ds)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:p.elements}};if(p instanceof ps)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:p.elements}};if(p instanceof wo)return{fieldPath:c.field.canonicalString(),increment:p.Ae};throw ce(20930,{transform:c.transform})})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(i,a){return a.updateTime!==void 0?{updateTime:qg(i,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:ce(27497)})(n,e.precondition)),t}function Wg(n,e){return n&&n.length>0?(Re(e!==void 0,14353),n.map((t=>(function(i,a){let c=i.updateTime?Xt(i.updateTime):Xt(a);return c.isEqual(pe.min())&&(c=Xt(a)),new Cg(c,i.transformResults||[])})(t,e)))):[]}function Gg(n,e){return{documents:[mh(n,e.path)]}}function Kg(n,e){const t={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=mh(n,i);const a=(function(T){if(T.length!==0)return vh(rn.create(T,"and"))})(e.filters);a&&(t.structuredQuery.where=a);const c=(function(T){if(T.length!==0)return T.map((b=>(function(L){return{field:Wr(L.field),direction:Jg(L.dir)}})(b)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const p=Oa(n,e.limit);return p!==null&&(t.structuredQuery.limit=p),e.startAt&&(t.structuredQuery.startAt=(function(T){return{before:T.inclusive,values:T.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(T){return{before:!T.inclusive,values:T.position}})(e.endAt)),{ft:t,parent:i}}function Qg(n){let e=$g(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Re(r===1,65062);const b=t.from[0];b.allDescendants?i=b.collectionId:e=e.child(b.collectionId)}let a=[];t.where&&(a=(function(k){const L=_h(k);return L instanceof rn&&Kl(L)?L.getFilters():[L]})(t.where));let c=[];t.orderBy&&(c=(function(k){return k.map((L=>(function(W){return new Eo(Gr(W.field),(function(Z){switch(Z){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(W.direction))})(L)))})(t.orderBy));let p=null;t.limit&&(p=(function(k){let L;return L=typeof k=="object"?k.value:k,Fo(L)?null:L})(t.limit));let _=null;t.startAt&&(_=(function(k){const L=!!k.before,G=k.values||[];return new To(G,L)})(t.startAt));let T=null;return t.endAt&&(T=(function(k){const L=!k.before,G=k.values||[];return new To(G,L)})(t.endAt)),fg(e,i,c,a,p,"F",_,T)}function Xg(n,e){const t=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ce(28987,{purpose:i})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function _h(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Gr(t.unaryFilter.field);return Qe.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Gr(t.unaryFilter.field);return Qe.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Gr(t.unaryFilter.field);return Qe.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Gr(t.unaryFilter.field);return Qe.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ce(61313);default:return ce(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Qe.create(Gr(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ce(58110);default:return ce(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return rn.create(t.compositeFilter.filters.map((r=>_h(r))),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ce(1026)}})(t.compositeFilter.op))})(n):ce(30097,{filter:n})}function Jg(n){return Fg[n]}function Yg(n){return Ug[n]}function Zg(n){return jg[n]}function Wr(n){return{fieldPath:n.canonicalString()}}function Gr(n){return ot.fromServerFormat(n.fieldPath)}function vh(n){return n instanceof Qe?(function(t){if(t.op==="=="){if(gc(t.value))return{unaryFilter:{field:Wr(t.field),op:"IS_NAN"}};if(pc(t.value))return{unaryFilter:{field:Wr(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(gc(t.value))return{unaryFilter:{field:Wr(t.field),op:"IS_NOT_NAN"}};if(pc(t.value))return{unaryFilter:{field:Wr(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Wr(t.field),op:Yg(t.op),value:t.value}}})(n):n instanceof rn?(function(t){const r=t.getFilters().map((i=>vh(i)));return r.length===1?r[0]:{compositeFilter:{op:Zg(t.op),filters:r}}})(n):ce(54877,{filter:n})}function em(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function Th(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}class Hn{constructor(e,t,r,i,a=pe.min(),c=pe.min(),p=at.EMPTY_BYTE_STRING,_=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=p,this.expectedCount=_}withSequenceNumber(e){return new Hn(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Hn(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Hn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Hn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class tm{constructor(e){this.yt=e}}function nm(n){const e=Qg({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Va(e,e.limit,"L"):e}class rm{constructor(){this.Cn=new im}addToCollectionParentIndex(e,t){return this.Cn.add(t),H.resolve()}getCollectionParents(e,t){return H.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return H.resolve()}deleteFieldIndex(e,t){return H.resolve()}deleteAllFieldIndexes(e){return H.resolve()}createTargetIndexes(e,t){return H.resolve()}getDocumentsMatchingTarget(e,t){return H.resolve(null)}getIndexType(e,t){return H.resolve(0)}getFieldIndexes(e,t){return H.resolve([])}getNextCollectionGroupToUpdate(e){return H.resolve(null)}getMinOffset(e,t){return H.resolve(Xn.min())}getMinOffsetFromCollectionGroup(e,t){return H.resolve(Xn.min())}updateCollectionGroup(e,t,r){return H.resolve()}updateIndexEntries(e,t){return H.resolve()}}class im{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Xe(Fe.comparator),a=!i.has(r);return this.index[t]=i.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Xe(Fe.comparator)).toArray()}}const Pc={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Eh=41943040;class _t{static withCacheSize(e){return new _t(e,_t.DEFAULT_COLLECTION_PERCENTILE,_t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}_t.DEFAULT_COLLECTION_PERCENTILE=10,_t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,_t.DEFAULT=new _t(Eh,_t.DEFAULT_COLLECTION_PERCENTILE,_t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),_t.DISABLED=new _t(-1,0,0);class ii{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new ii(0)}static cr(){return new ii(-1)}}const kc="LruGarbageCollector",sm=1048576;function Dc([n,e],[t,r]){const i=we(n,t);return i===0?we(e,r):i}class om{constructor(e){this.Ir=e,this.buffer=new Xe(Dc),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();Dc(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class am{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ne(kc,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){hi(t)?ne(kc,"Ignoring IndexedDB error during garbage collection: ",t):await li(t)}await this.Vr(3e5)}))}}class um{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return H.resolve(Mo.ce);const r=new om(t);return this.mr.forEachTarget(e,(i=>r.Ar(i.sequenceNumber))).next((()=>this.mr.pr(e,(i=>r.Ar(i))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.mr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ne("LruGarbageCollector","Garbage collection skipped; disabled"),H.resolve(Pc)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(ne("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Pc):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let r,i,a,c,p,_,T;const b=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((k=>(k>this.params.maximumSequenceNumbersToCollect?(ne("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${k}`),i=this.params.maximumSequenceNumbersToCollect):i=k,c=Date.now(),this.nthSequenceNumber(e,i)))).next((k=>(r=k,p=Date.now(),this.removeTargets(e,r,t)))).next((k=>(a=k,_=Date.now(),this.removeOrphanedDocuments(e,r)))).next((k=>(T=Date.now(),Hr()<=Ee.DEBUG&&ne("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-b}ms
	Determined least recently used ${i} in `+(p-c)+`ms
	Removed ${a} targets in `+(_-p)+`ms
	Removed ${k} documents in `+(T-_)+`ms
Total Duration: ${T-b}ms`),H.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:k}))))}}function cm(n,e){return new um(n,e)}class lm{constructor(){this.changes=new Pr((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,dt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?H.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class hm{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class fm{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((i=>(r=i,this.remoteDocumentCache.getEntry(e,t)))).next((i=>(r!==null&&rs(r.mutation,i,Lt.empty(),xe.now()),i)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,Ie()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=Ie()){const i=Tr();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,r).next((a=>{let c=Xi();return a.forEach(((p,_)=>{c=c.insert(p,_.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const r=Tr();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,Ie())))}populateOverlays(e,t,r){const i=[];return r.forEach((a=>{t.has(a)||i.push(a)})),this.documentOverlayCache.getOverlays(e,i).next((a=>{a.forEach(((c,p)=>{t.set(c,p)}))}))}computeViews(e,t,r,i){let a=_n();const c=ns(),p=(function(){return ns()})();return t.forEach(((_,T)=>{const b=r.get(T.key);i.has(T.key)&&(b===void 0||b.mutation instanceof kr)?a=a.insert(T.key,T):b!==void 0?(c.set(T.key,b.mutation.getFieldMask()),rs(b.mutation,T,b.mutation.getFieldMask(),xe.now())):c.set(T.key,Lt.empty())})),this.recalculateAndSaveOverlays(e,a).next((_=>(_.forEach(((T,b)=>c.set(T,b))),t.forEach(((T,b)=>p.set(T,new hm(b,c.get(T)??null)))),p)))}recalculateAndSaveOverlays(e,t){const r=ns();let i=new Ue(((c,p)=>c-p)),a=Ie();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const p of c)p.keys().forEach((_=>{const T=t.get(_);if(T===null)return;let b=r.get(_)||Lt.empty();b=p.applyToLocalView(T,b),r.set(_,b);const k=(i.get(p.batchId)||Ie()).add(_);i=i.insert(p.batchId,k)}))})).next((()=>{const c=[],p=i.getReverseIterator();for(;p.hasNext();){const _=p.getNext(),T=_.key,b=_.value,k=nh();b.forEach((L=>{if(!a.has(L)){const G=uh(t.get(L),r.get(L));G!==null&&k.set(L,G),a=a.add(L)}})),c.push(this.documentOverlayCache.saveOverlays(e,T,k))}return H.waitFor(c)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,i){return(function(c){return ue.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):dg(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next((a=>{const c=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-a.size):H.resolve(Tr());let p=us,_=a;return c.next((T=>H.forEach(T,((b,k)=>(p<k.largestBatchId&&(p=k.largestBatchId),a.get(b)?H.resolve():this.remoteDocumentCache.getEntry(e,b).next((L=>{_=_.insert(b,L)}))))).next((()=>this.populateOverlays(e,T,a))).next((()=>this.computeViews(e,_,T,Ie()))).next((b=>({batchId:p,changes:th(b)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ue(t)).next((r=>{let i=Xi();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const a=t.collectionGroup;let c=Xi();return this.indexManager.getCollectionParents(e,a).next((p=>H.forEach(p,(_=>{const T=(function(k,L){return new jo(L,null,k.explicitOrderBy.slice(),k.filters.slice(),k.limit,k.limitType,k.startAt,k.endAt)})(t,_.child(a));return this.getDocumentsMatchingCollectionQuery(e,T,r,i).next((b=>{b.forEach(((k,L)=>{c=c.insert(k,L)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,r,i){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((c=>(a=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,a,i)))).next((c=>{a.forEach(((_,T)=>{const b=T.getKey();c.get(b)===null&&(c=c.insert(b,dt.newInvalidDocument(b)))}));let p=Xi();return c.forEach(((_,T)=>{const b=a.get(_);b!==void 0&&rs(b.mutation,T,Lt.empty(),xe.now()),qo(t,T)&&(p=p.insert(_,T))})),p}))}}class dm{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return H.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:Xt(i.createTime)}})(t)),H.resolve()}getNamedQuery(e,t){return H.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(i){return{name:i.name,query:nm(i.bundledQuery),readTime:Xt(i.readTime)}})(t)),H.resolve()}}class pm{constructor(){this.overlays=new Ue(ue.comparator),this.qr=new Map}getOverlay(e,t){return H.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Tr();return H.forEach(t,(i=>this.getOverlay(e,i).next((a=>{a!==null&&r.set(i,a)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((i,a)=>{this.St(e,t,a)})),H.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach((a=>this.overlays=this.overlays.remove(a))),this.qr.delete(r)),H.resolve()}getOverlaysForCollection(e,t,r){const i=Tr(),a=t.length+1,c=new ue(t.child("")),p=this.overlays.getIteratorFrom(c);for(;p.hasNext();){const _=p.getNext().value,T=_.getKey();if(!t.isPrefixOf(T.path))break;T.path.length===a&&_.largestBatchId>r&&i.set(_.getKey(),_)}return H.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let a=new Ue(((T,b)=>T-b));const c=this.overlays.getIterator();for(;c.hasNext();){const T=c.getNext().value;if(T.getKey().getCollectionGroup()===t&&T.largestBatchId>r){let b=a.get(T.largestBatchId);b===null&&(b=Tr(),a=a.insert(T.largestBatchId,b)),b.set(T.getKey(),T)}}const p=Tr(),_=a.getIterator();for(;_.hasNext()&&(_.getNext().value.forEach(((T,b)=>p.set(T,b))),!(p.size()>=i)););return H.resolve(p)}St(e,t,r){const i=this.overlays.get(r.key);if(i!==null){const c=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new Ng(t,r));let a=this.qr.get(t);a===void 0&&(a=Ie(),this.qr.set(t,a)),this.qr.set(t,a.add(r.key))}}class gm{constructor(){this.sessionToken=at.EMPTY_BYTE_STRING}getSessionToken(e){return H.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,H.resolve()}}class lu{constructor(){this.Qr=new Xe(Ze.$r),this.Ur=new Xe(Ze.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const r=new Ze(e,t);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Gr(new Ze(e,t))}zr(e,t){e.forEach((r=>this.removeReference(r,t)))}jr(e){const t=new ue(new Fe([])),r=new Ze(t,e),i=new Ze(t,e+1),a=[];return this.Ur.forEachInRange([r,i],(c=>{this.Gr(c),a.push(c.key)})),a}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new ue(new Fe([])),r=new Ze(t,e),i=new Ze(t,e+1);let a=Ie();return this.Ur.forEachInRange([r,i],(c=>{a=a.add(c.key)})),a}containsKey(e){const t=new Ze(e,0),r=this.Qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class Ze{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return ue.comparator(e.key,t.key)||we(e.Yr,t.Yr)}static Kr(e,t){return we(e.Yr,t.Yr)||ue.comparator(e.key,t.key)}}class mm{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Xe(Ze.$r)}checkEmpty(e){return H.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){const a=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new Dg(a,t,r,i);this.mutationQueue.push(c);for(const p of i)this.Zr=this.Zr.add(new Ze(p.key,a)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return H.resolve(c)}lookupMutationBatch(e,t){return H.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=this.ei(r),a=i<0?0:i;return H.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return H.resolve(this.mutationQueue.length===0?eu:this.tr-1)}getAllMutationBatches(e){return H.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Ze(t,0),i=new Ze(t,Number.POSITIVE_INFINITY),a=[];return this.Zr.forEachInRange([r,i],(c=>{const p=this.Xr(c.Yr);a.push(p)})),H.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Xe(we);return t.forEach((i=>{const a=new Ze(i,0),c=new Ze(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([a,c],(p=>{r=r.add(p.Yr)}))})),H.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let a=r;ue.isDocumentKey(a)||(a=a.child(""));const c=new Ze(new ue(a),0);let p=new Xe(we);return this.Zr.forEachWhile((_=>{const T=_.key.path;return!!r.isPrefixOf(T)&&(T.length===i&&(p=p.add(_.Yr)),!0)}),c),H.resolve(this.ti(p))}ti(e){const t=[];return e.forEach((r=>{const i=this.Xr(r);i!==null&&t.push(i)})),t}removeMutationBatch(e,t){Re(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return H.forEach(t.mutations,(i=>{const a=new Ze(i.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,t){const r=new Ze(t,0),i=this.Zr.firstAfterOrEqual(r);return H.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,H.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class ym{constructor(e){this.ri=e,this.docs=(function(){return new Ue(ue.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),a=i?i.size:0,c=this.ri(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return H.resolve(r?r.document.mutableCopy():dt.newInvalidDocument(t))}getEntries(e,t){let r=_n();return t.forEach((i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():dt.newInvalidDocument(i))})),H.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let a=_n();const c=t.path,p=new ue(c.child("__id-9223372036854775808__")),_=this.docs.getIteratorFrom(p);for(;_.hasNext();){const{key:T,value:{document:b}}=_.getNext();if(!c.isPrefixOf(T.path))break;T.path.length>c.length+1||Hp($p(b),r)<=0||(i.has(b.key)||qo(t,b))&&(a=a.insert(b.key,b.mutableCopy()))}return H.resolve(a)}getAllFromCollectionGroup(e,t,r,i){ce(9500)}ii(e,t){return H.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new _m(this)}getSize(e){return H.resolve(this.size)}}class _m extends lm{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((r,i)=>{i.isValidDocument()?t.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)})),H.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class vm{constructor(e){this.persistence=e,this.si=new Pr((t=>ru(t)),iu),this.lastRemoteSnapshotVersion=pe.min(),this.highestTargetId=0,this.oi=0,this._i=new lu,this.targetCount=0,this.ai=ii.ur()}forEachTarget(e,t){return this.si.forEach(((r,i)=>t(i))),H.resolve()}getLastRemoteSnapshotVersion(e){return H.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return H.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),H.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.oi&&(this.oi=t),H.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new ii(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,H.resolve()}updateTargetData(e,t){return this.Pr(t),H.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,H.resolve()}removeTargets(e,t,r){let i=0;const a=[];return this.si.forEach(((c,p)=>{p.sequenceNumber<=t&&r.get(p.targetId)===null&&(this.si.delete(c),a.push(this.removeMatchingKeysForTargetId(e,p.targetId)),i++)})),H.waitFor(a).next((()=>i))}getTargetCount(e){return H.resolve(this.targetCount)}getTargetData(e,t){const r=this.si.get(t)||null;return H.resolve(r)}addMatchingKeys(e,t,r){return this._i.Wr(t,r),H.resolve()}removeMatchingKeys(e,t,r){this._i.zr(t,r);const i=this.persistence.referenceDelegate,a=[];return i&&t.forEach((c=>{a.push(i.markPotentiallyOrphaned(e,c))})),H.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),H.resolve()}getMatchingKeysForTargetId(e,t){const r=this._i.Hr(t);return H.resolve(r)}containsKey(e,t){return H.resolve(this._i.containsKey(t))}}class wh{constructor(e,t){this.ui={},this.overlays={},this.ci=new Mo(0),this.li=!1,this.li=!0,this.hi=new gm,this.referenceDelegate=e(this),this.Pi=new vm(this),this.indexManager=new rm,this.remoteDocumentCache=(function(i){return new ym(i)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new tm(t),this.Ii=new dm(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new pm,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ui[e.toKey()];return r||(r=new mm(t,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,r){ne("MemoryPersistence","Starting transaction:",e);const i=new Tm(this.ci.next());return this.referenceDelegate.Ei(),r(i).next((a=>this.referenceDelegate.di(i).next((()=>a)))).toPromise().then((a=>(i.raiseOnCommittedEvent(),a)))}Ai(e,t){return H.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,t))))}}class Tm extends Wp{constructor(e){super(),this.currentSequenceNumber=e}}class hu{constructor(e){this.persistence=e,this.Ri=new lu,this.Vi=null}static mi(e){return new hu(e)}get fi(){if(this.Vi)return this.Vi;throw ce(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.fi.delete(r.toString()),H.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.fi.add(r.toString()),H.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),H.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((i=>this.fi.add(i.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((i=>{i.forEach((a=>this.fi.add(a.toString())))})).next((()=>r.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return H.forEach(this.fi,(r=>{const i=ue.fromPath(r);return this.gi(e,i).next((a=>{a||t.removeEntry(i,pe.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((r=>{r?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return H.or([()=>H.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Ao{constructor(e,t){this.persistence=e,this.pi=new Pr((r=>Qp(r.path)),((r,i)=>r.isEqual(i))),this.garbageCollector=cm(this,t)}static mi(e,t){return new Ao(e,t)}Ei(){}di(e){return H.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>t.next((i=>r+i))))}wr(e){let t=0;return this.pr(e,(r=>{t++})).next((()=>t))}pr(e,t){return H.forEach(this.pi,((r,i)=>this.br(e,r,i).next((a=>a?H.resolve():t(i)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const i=this.persistence.getRemoteDocumentCache(),a=i.newChangeBuffer();return i.ii(e,(c=>this.br(e,c,t).next((p=>{p||(r++,a.removeEntry(c,pe.min()))})))).next((()=>a.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),H.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),H.resolve()}removeReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),H.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),H.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=so(e.data.value)),t}br(e,t,r){return H.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const i=this.pi.get(t);return H.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class fu{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Es=r,this.ds=i}static As(e,t){let r=Ie(),i=Ie();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new fu(e,t.fromCache,r,i)}}class Em{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class wm{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return fd()?8:Gp(pt())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,i){const a={result:null};return this.ys(e,t).next((c=>{a.result=c})).next((()=>{if(!a.result)return this.ws(e,t,i,r).next((c=>{a.result=c}))})).next((()=>{if(a.result)return;const c=new Em;return this.Ss(e,t,c).next((p=>{if(a.result=p,this.Vs)return this.bs(e,t,c,p.size)}))})).next((()=>a.result))}bs(e,t,r,i){return r.documentReadCount<this.fs?(Hr()<=Ee.DEBUG&&ne("QueryEngine","SDK will not create cache indexes for query:",zr(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),H.resolve()):(Hr()<=Ee.DEBUG&&ne("QueryEngine","Query:",zr(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(Hr()<=Ee.DEBUG&&ne("QueryEngine","The SDK decides to create cache indexes for query:",zr(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Qt(t))):H.resolve())}ys(e,t){if(vc(t))return H.resolve(null);let r=Qt(t);return this.indexManager.getIndexType(e,r).next((i=>i===0?null:(t.limit!==null&&i===1&&(t=Va(t,null,"F"),r=Qt(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((a=>{const c=Ie(...a);return this.ps.getDocuments(e,c).next((p=>this.indexManager.getMinOffset(e,r).next((_=>{const T=this.Ds(t,p);return this.Cs(t,T,c,_.readTime)?this.ys(e,Va(t,null,"F")):this.vs(e,T,t,_)}))))})))))}ws(e,t,r,i){return vc(t)||i.isEqual(pe.min())?H.resolve(null):this.ps.getDocuments(e,r).next((a=>{const c=this.Ds(t,a);return this.Cs(t,c,r,i)?H.resolve(null):(Hr()<=Ee.DEBUG&&ne("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),zr(t)),this.vs(e,c,t,qp(i,us)).next((p=>p)))}))}Ds(e,t){let r=new Xe(Zl(e));return t.forEach(((i,a)=>{qo(e,a)&&(r=r.add(a))})),r}Cs(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Ss(e,t,r){return Hr()<=Ee.DEBUG&&ne("QueryEngine","Using full collection scan to execute query:",zr(t)),this.ps.getDocumentsMatchingQuery(e,t,Xn.min(),r)}vs(e,t,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next((a=>(t.forEach((c=>{a=a.insert(c.key,c)})),a)))}}const du="LocalStore",Im=3e8;class Am{constructor(e,t,r,i){this.persistence=e,this.Fs=t,this.serializer=i,this.Ms=new Ue(we),this.xs=new Pr((a=>ru(a)),iu),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new fm(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function bm(n,e,t,r){return new Am(n,e,t,r)}async function Ih(n,e){const t=ge(n);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next((a=>(i=a,t.Bs(e),t.mutationQueue.getAllMutationBatches(r)))).next((a=>{const c=[],p=[];let _=Ie();for(const T of i){c.push(T.batchId);for(const b of T.mutations)_=_.add(b.key)}for(const T of a){p.push(T.batchId);for(const b of T.mutations)_=_.add(b.key)}return t.localDocuments.getDocuments(r,_).next((T=>({Ls:T,removedBatchIds:c,addedBatchIds:p})))}))}))}function Sm(n,e){const t=ge(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const i=e.batch.keys(),a=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(p,_,T,b){const k=T.batch,L=k.keys();let G=H.resolve();return L.forEach((W=>{G=G.next((()=>b.getEntry(_,W))).next((X=>{const Z=T.docVersions.get(W);Re(Z!==null,48541),X.version.compareTo(Z)<0&&(k.applyToRemoteDocument(X,T),X.isValidDocument()&&(X.setReadTime(T.commitVersion),b.addEntry(X)))}))})),G.next((()=>p.mutationQueue.removeMutationBatch(_,k)))})(t,r,e,a).next((()=>a.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(p){let _=Ie();for(let T=0;T<p.mutationResults.length;++T)p.mutationResults[T].transformResults.length>0&&(_=_.add(p.batch.mutations[T].key));return _})(e)))).next((()=>t.localDocuments.getDocuments(r,i)))}))}function Ah(n){const e=ge(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function Cm(n,e){const t=ge(n),r=e.snapshotVersion;let i=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const c=t.Ns.newChangeBuffer({trackRemovals:!0});i=t.Ms;const p=[];e.targetChanges.forEach(((b,k)=>{const L=i.get(k);if(!L)return;p.push(t.Pi.removeMatchingKeys(a,b.removedDocuments,k).next((()=>t.Pi.addMatchingKeys(a,b.addedDocuments,k))));let G=L.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(k)!==null?G=G.withResumeToken(at.EMPTY_BYTE_STRING,pe.min()).withLastLimboFreeSnapshotVersion(pe.min()):b.resumeToken.approximateByteSize()>0&&(G=G.withResumeToken(b.resumeToken,r)),i=i.insert(k,G),(function(X,Z,Y){return X.resumeToken.approximateByteSize()===0||Z.snapshotVersion.toMicroseconds()-X.snapshotVersion.toMicroseconds()>=Im?!0:Y.addedDocuments.size+Y.modifiedDocuments.size+Y.removedDocuments.size>0})(L,G,b)&&p.push(t.Pi.updateTargetData(a,G))}));let _=_n(),T=Ie();if(e.documentUpdates.forEach((b=>{e.resolvedLimboDocuments.has(b)&&p.push(t.persistence.referenceDelegate.updateLimboDocument(a,b))})),p.push(Rm(a,c,e.documentUpdates).next((b=>{_=b.ks,T=b.qs}))),!r.isEqual(pe.min())){const b=t.Pi.getLastRemoteSnapshotVersion(a).next((k=>t.Pi.setTargetsMetadata(a,a.currentSequenceNumber,r)));p.push(b)}return H.waitFor(p).next((()=>c.apply(a))).next((()=>t.localDocuments.getLocalViewOfDocuments(a,_,T))).next((()=>_))})).then((a=>(t.Ms=i,a)))}function Rm(n,e,t){let r=Ie(),i=Ie();return t.forEach((a=>r=r.add(a))),e.getEntries(n,r).next((a=>{let c=_n();return t.forEach(((p,_)=>{const T=a.get(p);_.isFoundDocument()!==T.isFoundDocument()&&(i=i.add(p)),_.isNoDocument()&&_.version.isEqual(pe.min())?(e.removeEntry(p,_.readTime),c=c.insert(p,_)):!T.isValidDocument()||_.version.compareTo(T.version)>0||_.version.compareTo(T.version)===0&&T.hasPendingWrites?(e.addEntry(_),c=c.insert(p,_)):ne(du,"Ignoring outdated watch update for ",p,". Current version:",T.version," Watch version:",_.version)})),{ks:c,qs:i}}))}function Pm(n,e){const t=ge(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=eu),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function km(n,e){const t=ge(n);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let i;return t.Pi.getTargetData(r,e).next((a=>a?(i=a,H.resolve(i)):t.Pi.allocateTargetId(r).next((c=>(i=new Hn(e,c,"TargetPurposeListen",r.currentSequenceNumber),t.Pi.addTargetData(r,i).next((()=>i)))))))})).then((r=>{const i=t.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.xs.set(e,r.targetId)),r}))}async function Ua(n,e,t){const r=ge(n),i=r.Ms.get(e),a=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",a,(c=>r.persistence.referenceDelegate.removeTarget(c,i)))}catch(c){if(!hi(c))throw c;ne(du,`Failed to update sequence numbers for target ${e}: ${c}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function Nc(n,e,t){const r=ge(n);let i=pe.min(),a=Ie();return r.persistence.runTransaction("Execute query","readwrite",(c=>(function(_,T,b){const k=ge(_),L=k.xs.get(b);return L!==void 0?H.resolve(k.Ms.get(L)):k.Pi.getTargetData(T,b)})(r,c,Qt(e)).next((p=>{if(p)return i=p.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(c,p.targetId).next((_=>{a=_}))})).next((()=>r.Fs.getDocumentsMatchingQuery(c,e,t?i:pe.min(),t?a:Ie()))).next((p=>(Dm(r,gg(e),p),{documents:p,Qs:a})))))}function Dm(n,e,t){let r=n.Os.get(e)||pe.min();t.forEach(((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)})),n.Os.set(e,r)}class xc{constructor(){this.activeTargetIds=Eg()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Nm{constructor(){this.Mo=new xc,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,r){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new xc,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class xm{Oo(e){}shutdown(){}}const Vc="ConnectivityMonitor";class Oc{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ne(Vc,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ne(Vc,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let to=null;function ja(){return to===null?to=(function(){return 268435456+Math.round(2147483648*Math.random())})():to++,"0x"+to.toString(16)}const _a="RestConnection",Vm={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Om{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===_o?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,t,r,i,a){const c=ja(),p=this.zo(e,t.toUriEncodedString());ne(_a,`Sending RPC '${e}' ${c}:`,p,r);const _={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(_,i,a);const{host:T}=new URL(p),b=ai(T);return this.Jo(e,p,_,r,b).then((k=>(ne(_a,`Received RPC '${e}' ${c}: `,k),k)),(k=>{throw ei(_a,`RPC '${e}' ${c} failed with error: `,k,"url: ",p,"request:",r),k}))}Ho(e,t,r,i,a,c){return this.Go(e,t,r,i,a)}jo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+ci})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((i,a)=>e[a]=i)),r&&r.headers.forEach(((i,a)=>e[a]=i))}zo(e,t){const r=Vm[e];return`${this.Uo}/v1/${t}:${r}`}terminate(){}}class Lm{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const ht="WebChannelConnection";class Mm extends Om{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,i,a){const c=ja();return new Promise(((p,_)=>{const T=new Rl;T.setWithCredentials(!0),T.listenOnce(Pl.COMPLETE,(()=>{try{switch(T.getLastErrorCode()){case io.NO_ERROR:const k=T.getResponseJson();ne(ht,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(k)),p(k);break;case io.TIMEOUT:ne(ht,`RPC '${e}' ${c} timed out`),_(new oe(K.DEADLINE_EXCEEDED,"Request time out"));break;case io.HTTP_ERROR:const L=T.getStatus();if(ne(ht,`RPC '${e}' ${c} failed with status:`,L,"response text:",T.getResponseText()),L>0){let G=T.getResponseJson();Array.isArray(G)&&(G=G[0]);const W=G?.error;if(W&&W.status&&W.message){const X=(function(Y){const Ae=Y.toLowerCase().replace(/_/g,"-");return Object.values(K).indexOf(Ae)>=0?Ae:K.UNKNOWN})(W.status);_(new oe(X,W.message))}else _(new oe(K.UNKNOWN,"Server responded with status "+T.getStatus()))}else _(new oe(K.UNAVAILABLE,"Connection failed."));break;default:ce(9055,{l_:e,streamId:c,h_:T.getLastErrorCode(),P_:T.getLastError()})}}finally{ne(ht,`RPC '${e}' ${c} completed.`)}}));const b=JSON.stringify(i);ne(ht,`RPC '${e}' ${c} sending request:`,i),T.send(t,"POST",b,r,15)}))}T_(e,t,r){const i=ja(),a=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=Nl(),p=Dl(),_={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},T=this.longPollingOptions.timeoutSeconds;T!==void 0&&(_.longPollingTimeout=Math.round(1e3*T)),this.useFetchStreams&&(_.useFetchStreams=!0),this.jo(_.initMessageHeaders,t,r),_.encodeInitMessageHeaders=!0;const b=a.join("");ne(ht,`Creating RPC '${e}' stream ${i}: ${b}`,_);const k=c.createWebChannel(b,_);this.I_(k);let L=!1,G=!1;const W=new Lm({Yo:Z=>{G?ne(ht,`Not sending because RPC '${e}' stream ${i} is closed:`,Z):(L||(ne(ht,`Opening RPC '${e}' stream ${i} transport.`),k.open(),L=!0),ne(ht,`RPC '${e}' stream ${i} sending:`,Z),k.send(Z))},Zo:()=>k.close()}),X=(Z,Y,Ae)=>{Z.listen(Y,(Se=>{try{Ae(Se)}catch(je){setTimeout((()=>{throw je}),0)}}))};return X(k,Qi.EventType.OPEN,(()=>{G||(ne(ht,`RPC '${e}' stream ${i} transport opened.`),W.o_())})),X(k,Qi.EventType.CLOSE,(()=>{G||(G=!0,ne(ht,`RPC '${e}' stream ${i} transport closed`),W.a_(),this.E_(k))})),X(k,Qi.EventType.ERROR,(Z=>{G||(G=!0,ei(ht,`RPC '${e}' stream ${i} transport errored. Name:`,Z.name,"Message:",Z.message),W.a_(new oe(K.UNAVAILABLE,"The operation could not be completed")))})),X(k,Qi.EventType.MESSAGE,(Z=>{if(!G){const Y=Z.data[0];Re(!!Y,16349);const Ae=Y,Se=Ae?.error||Ae[0]?.error;if(Se){ne(ht,`RPC '${e}' stream ${i} received error:`,Se);const je=Se.status;let tt=(function(C){const S=Ge[C];if(S!==void 0)return hh(S)})(je),ze=Se.message;tt===void 0&&(tt=K.INTERNAL,ze="Unknown error status: "+je+" with message "+Se.message),G=!0,W.a_(new oe(tt,ze)),k.close()}else ne(ht,`RPC '${e}' stream ${i} received:`,Y),W.u_(Y)}})),X(p,kl.STAT_EVENT,(Z=>{Z.stat===Ra.PROXY?ne(ht,`RPC '${e}' stream ${i} detected buffering proxy`):Z.stat===Ra.NOPROXY&&ne(ht,`RPC '${e}' stream ${i} detected no buffering proxy`)})),setTimeout((()=>{W.__()}),0),W}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function va(){return typeof document<"u"?document:null}function Wo(n){return new Bg(n,!0)}class bh{constructor(e,t,r=1e3,i=1.5,a=6e4){this.Mi=e,this.timerId=t,this.d_=r,this.A_=i,this.R_=a,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,t-r);i>0&&ne("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const Lc="PersistentStream";class Sh{constructor(e,t,r,i,a,c,p,_){this.Mi=e,this.S_=r,this.b_=i,this.connection=a,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=p,this.listener=_,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new bh(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===K.RESOURCE_EXHAUSTED?(yn(t.toString()),yn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===K.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,i])=>{this.D_===t&&this.G_(r,i)}),(r=>{e((()=>{const i=new oe(K.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)}))}))}G_(e,t){const r=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((i=>{r((()=>this.z_(i)))})),this.stream.onMessage((i=>{r((()=>++this.F_==1?this.J_(i):this.onNext(i)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ne(Lc,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(ne(Lc,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Fm extends Sh{constructor(e,t,r,i,a,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,c),this.serializer=a}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=Hg(this.serializer,e),r=(function(a){if(!("targetChange"in a))return pe.min();const c=a.targetChange;return c.targetIds&&c.targetIds.length?pe.min():c.readTime?Xt(c.readTime):pe.min()})(e);return this.listener.H_(t,r)}Y_(e){const t={};t.database=Fa(this.serializer),t.addTarget=(function(a,c){let p;const _=c.target;if(p=xa(_)?{documents:Gg(a,_)}:{query:Kg(a,_).ft},p.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){p.resumeToken=ph(a,c.resumeToken);const T=Oa(a,c.expectedCount);T!==null&&(p.expectedCount=T)}else if(c.snapshotVersion.compareTo(pe.min())>0){p.readTime=Io(a,c.snapshotVersion.toTimestamp());const T=Oa(a,c.expectedCount);T!==null&&(p.expectedCount=T)}return p})(this.serializer,e);const r=Xg(this.serializer,e);r&&(t.labels=r),this.q_(t)}Z_(e){const t={};t.database=Fa(this.serializer),t.removeTarget=e,this.q_(t)}}class Um extends Sh{constructor(e,t,r,i,a,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,c),this.serializer=a}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return Re(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Re(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Re(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=Wg(e.writeResults,e.commitTime),r=Xt(e.commitTime);return this.listener.na(r,t)}ra(){const e={};e.database=Fa(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>zg(this.serializer,r)))};this.q_(t)}}class jm{}class Bm extends jm{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new oe(K.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,c])=>this.connection.Go(e,La(t,r),i,a,c))).catch((a=>{throw a.name==="FirebaseError"?(a.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new oe(K.UNKNOWN,a.toString())}))}Ho(e,t,r,i,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,p])=>this.connection.Ho(e,La(t,r),i,c,p,a))).catch((c=>{throw c.name==="FirebaseError"?(c.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new oe(K.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class qm{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(yn(t),this.aa=!1):ne("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Sr="RemoteStore";class $m{constructor(e,t,r,i,a){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=a,this.Aa.Oo((c=>{r.enqueueAndForget((async()=>{Dr(this)&&(ne(Sr,"Restarting streams for network reachability change."),await(async function(_){const T=ge(_);T.Ea.add(4),await ws(T),T.Ra.set("Unknown"),T.Ea.delete(4),await Go(T)})(this))}))})),this.Ra=new qm(r,i)}}async function Go(n){if(Dr(n))for(const e of n.da)await e(!0)}async function ws(n){for(const e of n.da)await e(!1)}function Ch(n,e){const t=ge(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),yu(t)?mu(t):fi(t).O_()&&gu(t,e))}function pu(n,e){const t=ge(n),r=fi(t);t.Ia.delete(e),r.O_()&&Rh(t,e),t.Ia.size===0&&(r.O_()?r.L_():Dr(t)&&t.Ra.set("Unknown"))}function gu(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(pe.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}fi(n).Y_(e)}function Rh(n,e){n.Va.Ue(e),fi(n).Z_(e)}function mu(n){n.Va=new Mg({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),fi(n).start(),n.Ra.ua()}function yu(n){return Dr(n)&&!fi(n).x_()&&n.Ia.size>0}function Dr(n){return ge(n).Ea.size===0}function Ph(n){n.Va=void 0}async function Hm(n){n.Ra.set("Online")}async function zm(n){n.Ia.forEach(((e,t)=>{gu(n,e)}))}async function Wm(n,e){Ph(n),yu(n)?(n.Ra.ha(e),mu(n)):n.Ra.set("Unknown")}async function Gm(n,e,t){if(n.Ra.set("Online"),e instanceof dh&&e.state===2&&e.cause)try{await(async function(i,a){const c=a.cause;for(const p of a.targetIds)i.Ia.has(p)&&(await i.remoteSyncer.rejectListen(p,c),i.Ia.delete(p),i.Va.removeTarget(p))})(n,e)}catch(r){ne(Sr,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await bo(n,r)}else if(e instanceof uo?n.Va.Ze(e):e instanceof fh?n.Va.st(e):n.Va.tt(e),!t.isEqual(pe.min()))try{const r=await Ah(n.localStore);t.compareTo(r)>=0&&await(function(a,c){const p=a.Va.Tt(c);return p.targetChanges.forEach(((_,T)=>{if(_.resumeToken.approximateByteSize()>0){const b=a.Ia.get(T);b&&a.Ia.set(T,b.withResumeToken(_.resumeToken,c))}})),p.targetMismatches.forEach(((_,T)=>{const b=a.Ia.get(_);if(!b)return;a.Ia.set(_,b.withResumeToken(at.EMPTY_BYTE_STRING,b.snapshotVersion)),Rh(a,_);const k=new Hn(b.target,_,T,b.sequenceNumber);gu(a,k)})),a.remoteSyncer.applyRemoteEvent(p)})(n,t)}catch(r){ne(Sr,"Failed to raise snapshot:",r),await bo(n,r)}}async function bo(n,e,t){if(!hi(e))throw e;n.Ea.add(1),await ws(n),n.Ra.set("Offline"),t||(t=()=>Ah(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{ne(Sr,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await Go(n)}))}function kh(n,e){return e().catch((t=>bo(n,t,e)))}async function Ko(n){const e=ge(n),t=er(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:eu;for(;Km(e);)try{const i=await Pm(e.localStore,r);if(i===null){e.Ta.length===0&&t.L_();break}r=i.batchId,Qm(e,i)}catch(i){await bo(e,i)}Dh(e)&&Nh(e)}function Km(n){return Dr(n)&&n.Ta.length<10}function Qm(n,e){n.Ta.push(e);const t=er(n);t.O_()&&t.X_&&t.ea(e.mutations)}function Dh(n){return Dr(n)&&!er(n).x_()&&n.Ta.length>0}function Nh(n){er(n).start()}async function Xm(n){er(n).ra()}async function Jm(n){const e=er(n);for(const t of n.Ta)e.ea(t.mutations)}async function Ym(n,e,t){const r=n.Ta.shift(),i=au.from(r,e,t);await kh(n,(()=>n.remoteSyncer.applySuccessfulWrite(i))),await Ko(n)}async function Zm(n,e){e&&er(n).X_&&await(async function(r,i){if((function(c){return Vg(c)&&c!==K.ABORTED})(i.code)){const a=r.Ta.shift();er(r).B_(),await kh(r,(()=>r.remoteSyncer.rejectFailedWrite(a.batchId,i))),await Ko(r)}})(n,e),Dh(n)&&Nh(n)}async function Mc(n,e){const t=ge(n);t.asyncQueue.verifyOperationInProgress(),ne(Sr,"RemoteStore received new credentials");const r=Dr(t);t.Ea.add(3),await ws(t),r&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Go(t)}async function ey(n,e){const t=ge(n);e?(t.Ea.delete(2),await Go(t)):e||(t.Ea.add(2),await ws(t),t.Ra.set("Unknown"))}function fi(n){return n.ma||(n.ma=(function(t,r,i){const a=ge(t);return a.sa(),new Fm(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)})(n.datastore,n.asyncQueue,{Xo:Hm.bind(null,n),t_:zm.bind(null,n),r_:Wm.bind(null,n),H_:Gm.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),yu(n)?mu(n):n.Ra.set("Unknown")):(await n.ma.stop(),Ph(n))}))),n.ma}function er(n){return n.fa||(n.fa=(function(t,r,i){const a=ge(t);return a.sa(),new Um(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:Xm.bind(null,n),r_:Zm.bind(null,n),ta:Jm.bind(null,n),na:Ym.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await Ko(n)):(await n.fa.stop(),n.Ta.length>0&&(ne(Sr,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}class _u{constructor(e,t,r,i,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Qn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,a){const c=Date.now()+r,p=new _u(e,t,c,i,a);return p.start(r),p}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new oe(K.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function vu(n,e){if(yn("AsyncQueue",`${e}: ${n}`),hi(n))return new oe(K.UNAVAILABLE,`${e}: ${n}`);throw n}class Qr{static emptySet(e){return new Qr(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||ue.comparator(t.key,r.key):(t,r)=>ue.comparator(t.key,r.key),this.keyedMap=Xi(),this.sortedSet=new Ue(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Qr)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Qr;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class Fc{constructor(){this.ga=new Ue(ue.comparator)}track(e){const t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):ce(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,r)=>{e.push(r)})),e}}class si{constructor(e,t,r,i,a,c,p,_,T){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=c,this.syncStateChanged=p,this.excludesMetadataChanges=_,this.hasCachedResults=T}static fromInitialDocuments(e,t,r,i,a){const c=[];return t.forEach((p=>{c.push({type:0,doc:p})})),new si(e,t,Qr.emptySet(t),c,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Bo(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class ty{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class ny{constructor(){this.queries=Uc(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const i=ge(t),a=i.queries;i.queries=Uc(),a.forEach(((c,p)=>{for(const _ of p.Sa)_.onError(r)}))})(this,new oe(K.ABORTED,"Firestore shutting down"))}}function Uc(){return new Pr((n=>Yl(n)),Bo)}async function ry(n,e){const t=ge(n);let r=3;const i=e.query;let a=t.queries.get(i);a?!a.ba()&&e.Da()&&(r=2):(a=new ty,r=e.Da()?0:1);try{switch(r){case 0:a.wa=await t.onListen(i,!0);break;case 1:a.wa=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(c){const p=vu(c,`Initialization of query '${zr(e.query)}' failed`);return void e.onError(p)}t.queries.set(i,a),a.Sa.push(e),e.va(t.onlineState),a.wa&&e.Fa(a.wa)&&Tu(t)}async function iy(n,e){const t=ge(n),r=e.query;let i=3;const a=t.queries.get(r);if(a){const c=a.Sa.indexOf(e);c>=0&&(a.Sa.splice(c,1),a.Sa.length===0?i=e.Da()?0:1:!a.ba()&&e.Da()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function sy(n,e){const t=ge(n);let r=!1;for(const i of e){const a=i.query,c=t.queries.get(a);if(c){for(const p of c.Sa)p.Fa(i)&&(r=!0);c.wa=i}}r&&Tu(t)}function oy(n,e,t){const r=ge(n),i=r.queries.get(e);if(i)for(const a of i.Sa)a.onError(t);r.queries.delete(e)}function Tu(n){n.Ca.forEach((e=>{e.next()}))}var Ba,jc;(jc=Ba||(Ba={})).Ma="default",jc.Cache="cache";class ay{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new si(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const r=t!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=si.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Ba.Cache}}class xh{constructor(e){this.key=e}}class Vh{constructor(e){this.key=e}}class uy{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ie(),this.mutatedKeys=Ie(),this.eu=Zl(e),this.tu=new Qr(this.eu)}get nu(){return this.Ya}ru(e,t){const r=t?t.iu:new Fc,i=t?t.tu:this.tu;let a=t?t.mutatedKeys:this.mutatedKeys,c=i,p=!1;const _=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,T=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((b,k)=>{const L=i.get(b),G=qo(this.query,k)?k:null,W=!!L&&this.mutatedKeys.has(L.key),X=!!G&&(G.hasLocalMutations||this.mutatedKeys.has(G.key)&&G.hasCommittedMutations);let Z=!1;L&&G?L.data.isEqual(G.data)?W!==X&&(r.track({type:3,doc:G}),Z=!0):this.su(L,G)||(r.track({type:2,doc:G}),Z=!0,(_&&this.eu(G,_)>0||T&&this.eu(G,T)<0)&&(p=!0)):!L&&G?(r.track({type:0,doc:G}),Z=!0):L&&!G&&(r.track({type:1,doc:L}),Z=!0,(_||T)&&(p=!0)),Z&&(G?(c=c.add(G),a=X?a.add(b):a.delete(b)):(c=c.delete(b),a=a.delete(b)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const b=this.query.limitType==="F"?c.last():c.first();c=c.delete(b.key),a=a.delete(b.key),r.track({type:1,doc:b})}return{tu:c,iu:r,Cs:p,mutatedKeys:a}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const a=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((b,k)=>(function(G,W){const X=Z=>{switch(Z){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ce(20277,{Rt:Z})}};return X(G)-X(W)})(b.type,k.type)||this.eu(b.doc,k.doc))),this.ou(r),i=i??!1;const p=t&&!i?this._u():[],_=this.Xa.size===0&&this.current&&!i?1:0,T=_!==this.Za;return this.Za=_,c.length!==0||T?{snapshot:new si(this.query,e.tu,a,c,e.mutatedKeys,_===0,T,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:p}:{au:p}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Fc,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ie(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const t=[];return e.forEach((r=>{this.Xa.has(r)||t.push(new Vh(r))})),this.Xa.forEach((r=>{e.has(r)||t.push(new xh(r))})),t}cu(e){this.Ya=e.Qs,this.Xa=Ie();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return si.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Eu="SyncEngine";class cy{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class ly{constructor(e){this.key=e,this.hu=!1}}class hy{constructor(e,t,r,i,a,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new Pr((p=>Yl(p)),Bo),this.Iu=new Map,this.Eu=new Set,this.du=new Ue(ue.comparator),this.Au=new Map,this.Ru=new lu,this.Vu={},this.mu=new Map,this.fu=ii.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function fy(n,e,t=!0){const r=jh(n);let i;const a=r.Tu.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),i=a.view.lu()):i=await Oh(r,e,t,!0),i}async function dy(n,e){const t=jh(n);await Oh(t,e,!0,!1)}async function Oh(n,e,t,r){const i=await km(n.localStore,Qt(e)),a=i.targetId,c=n.sharedClientState.addLocalQueryTarget(a,t);let p;return r&&(p=await py(n,e,a,c==="current",i.resumeToken)),n.isPrimaryClient&&t&&Ch(n.remoteStore,i),p}async function py(n,e,t,r,i){n.pu=(k,L,G)=>(async function(X,Z,Y,Ae){let Se=Z.view.ru(Y);Se.Cs&&(Se=await Nc(X.localStore,Z.query,!1).then((({documents:l})=>Z.view.ru(l,Se))));const je=Ae&&Ae.targetChanges.get(Z.targetId),tt=Ae&&Ae.targetMismatches.get(Z.targetId)!=null,ze=Z.view.applyChanges(Se,X.isPrimaryClient,je,tt);return qc(X,Z.targetId,ze.au),ze.snapshot})(n,k,L,G);const a=await Nc(n.localStore,e,!0),c=new uy(e,a.Qs),p=c.ru(a.documents),_=Es.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),T=c.applyChanges(p,n.isPrimaryClient,_);qc(n,t,T.au);const b=new cy(e,t,c);return n.Tu.set(e,b),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),T.snapshot}async function gy(n,e,t){const r=ge(n),i=r.Tu.get(e),a=r.Iu.get(i.targetId);if(a.length>1)return r.Iu.set(i.targetId,a.filter((c=>!Bo(c,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Ua(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),t&&pu(r.remoteStore,i.targetId),qa(r,i.targetId)})).catch(li)):(qa(r,i.targetId),await Ua(r.localStore,i.targetId,!0))}async function my(n,e){const t=ge(n),r=t.Tu.get(e),i=t.Iu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),pu(t.remoteStore,r.targetId))}async function yy(n,e,t){const r=Ay(n);try{const i=await(function(c,p){const _=ge(c),T=xe.now(),b=p.reduce(((G,W)=>G.add(W.key)),Ie());let k,L;return _.persistence.runTransaction("Locally write mutations","readwrite",(G=>{let W=_n(),X=Ie();return _.Ns.getEntries(G,b).next((Z=>{W=Z,W.forEach(((Y,Ae)=>{Ae.isValidDocument()||(X=X.add(Y))}))})).next((()=>_.localDocuments.getOverlayedDocuments(G,W))).next((Z=>{k=Z;const Y=[];for(const Ae of p){const Se=Pg(Ae,k.get(Ae.key).overlayedDocument);Se!=null&&Y.push(new kr(Ae.key,Se,zl(Se.value.mapValue),gn.exists(!0)))}return _.mutationQueue.addMutationBatch(G,T,Y,p)})).next((Z=>{L=Z;const Y=Z.applyToLocalDocumentSet(k,X);return _.documentOverlayCache.saveOverlays(G,Z.batchId,Y)}))})).then((()=>({batchId:L.batchId,changes:th(k)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(c,p,_){let T=c.Vu[c.currentUser.toKey()];T||(T=new Ue(we)),T=T.insert(p,_),c.Vu[c.currentUser.toKey()]=T})(r,i.batchId,t),await Is(r,i.changes),await Ko(r.remoteStore)}catch(i){const a=vu(i,"Failed to persist write");t.reject(a)}}async function Lh(n,e){const t=ge(n);try{const r=await Cm(t.localStore,e);e.targetChanges.forEach(((i,a)=>{const c=t.Au.get(a);c&&(Re(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?c.hu=!0:i.modifiedDocuments.size>0?Re(c.hu,14607):i.removedDocuments.size>0&&(Re(c.hu,42227),c.hu=!1))})),await Is(t,r,e)}catch(r){await li(r)}}function Bc(n,e,t){const r=ge(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const i=[];r.Tu.forEach(((a,c)=>{const p=c.view.va(e);p.snapshot&&i.push(p.snapshot)})),(function(c,p){const _=ge(c);_.onlineState=p;let T=!1;_.queries.forEach(((b,k)=>{for(const L of k.Sa)L.va(p)&&(T=!0)})),T&&Tu(_)})(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function _y(n,e,t){const r=ge(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Au.get(e),a=i&&i.key;if(a){let c=new Ue(ue.comparator);c=c.insert(a,dt.newNoDocument(a,pe.min()));const p=Ie().add(a),_=new zo(pe.min(),new Map,new Ue(we),c,p);await Lh(r,_),r.du=r.du.remove(a),r.Au.delete(e),wu(r)}else await Ua(r.localStore,e,!1).then((()=>qa(r,e,t))).catch(li)}async function vy(n,e){const t=ge(n),r=e.batch.batchId;try{const i=await Sm(t.localStore,e);Fh(t,r,null),Mh(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await Is(t,i)}catch(i){await li(i)}}async function Ty(n,e,t){const r=ge(n);try{const i=await(function(c,p){const _=ge(c);return _.persistence.runTransaction("Reject batch","readwrite-primary",(T=>{let b;return _.mutationQueue.lookupMutationBatch(T,p).next((k=>(Re(k!==null,37113),b=k.keys(),_.mutationQueue.removeMutationBatch(T,k)))).next((()=>_.mutationQueue.performConsistencyCheck(T))).next((()=>_.documentOverlayCache.removeOverlaysForBatchId(T,b,p))).next((()=>_.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(T,b))).next((()=>_.localDocuments.getDocuments(T,b)))}))})(r.localStore,e);Fh(r,e,t),Mh(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await Is(r,i)}catch(i){await li(i)}}function Mh(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function Fh(n,e,t){const r=ge(n);let i=r.Vu[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(t?a.reject(t):a.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function qa(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((r=>{n.Ru.containsKey(r)||Uh(n,r)}))}function Uh(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(pu(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),wu(n))}function qc(n,e,t){for(const r of t)r instanceof xh?(n.Ru.addReference(r.key,e),Ey(n,r)):r instanceof Vh?(ne(Eu,"Document no longer in limbo: "+r.key),n.Ru.removeReference(r.key,e),n.Ru.containsKey(r.key)||Uh(n,r.key)):ce(19791,{wu:r})}function Ey(n,e){const t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Eu.has(r)||(ne(Eu,"New document in limbo: "+t),n.Eu.add(r),wu(n))}function wu(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new ue(Fe.fromString(e)),r=n.fu.next();n.Au.set(r,new ly(t)),n.du=n.du.insert(t,r),Ch(n.remoteStore,new Hn(Qt(su(t.path)),r,"TargetPurposeLimboResolution",Mo.ce))}}async function Is(n,e,t){const r=ge(n),i=[],a=[],c=[];r.Tu.isEmpty()||(r.Tu.forEach(((p,_)=>{c.push(r.pu(_,e,t).then((T=>{if((T||t)&&r.isPrimaryClient){const b=T?!T.fromCache:t?.targetChanges.get(_.targetId)?.current;r.sharedClientState.updateQueryState(_.targetId,b?"current":"not-current")}if(T){i.push(T);const b=fu.As(_.targetId,T);a.push(b)}})))})),await Promise.all(c),r.Pu.H_(i),await(async function(_,T){const b=ge(_);try{await b.persistence.runTransaction("notifyLocalViewChanges","readwrite",(k=>H.forEach(T,(L=>H.forEach(L.Es,(G=>b.persistence.referenceDelegate.addReference(k,L.targetId,G))).next((()=>H.forEach(L.ds,(G=>b.persistence.referenceDelegate.removeReference(k,L.targetId,G)))))))))}catch(k){if(!hi(k))throw k;ne(du,"Failed to update sequence numbers: "+k)}for(const k of T){const L=k.targetId;if(!k.fromCache){const G=b.Ms.get(L),W=G.snapshotVersion,X=G.withLastLimboFreeSnapshotVersion(W);b.Ms=b.Ms.insert(L,X)}}})(r.localStore,a))}async function wy(n,e){const t=ge(n);if(!t.currentUser.isEqual(e)){ne(Eu,"User change. New user:",e.toKey());const r=await Ih(t.localStore,e);t.currentUser=e,(function(a,c){a.mu.forEach((p=>{p.forEach((_=>{_.reject(new oe(K.CANCELLED,c))}))})),a.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Is(t,r.Ls)}}function Iy(n,e){const t=ge(n),r=t.Au.get(e);if(r&&r.hu)return Ie().add(r.key);{let i=Ie();const a=t.Iu.get(e);if(!a)return i;for(const c of a){const p=t.Tu.get(c);i=i.unionWith(p.view.nu)}return i}}function jh(n){const e=ge(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Lh.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Iy.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=_y.bind(null,e),e.Pu.H_=sy.bind(null,e.eventManager),e.Pu.yu=oy.bind(null,e.eventManager),e}function Ay(n){const e=ge(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=vy.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Ty.bind(null,e),e}class So{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Wo(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return bm(this.persistence,new wm,e.initialUser,this.serializer)}Cu(e){return new wh(hu.mi,this.serializer)}Du(e){return new Nm}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}So.provider={build:()=>new So};class by extends So{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Re(this.persistence.referenceDelegate instanceof Ao,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new am(r,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?_t.withCacheSize(this.cacheSizeBytes):_t.DEFAULT;return new wh((r=>Ao.mi(r,t)),this.serializer)}}class $a{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Bc(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=wy.bind(null,this.syncEngine),await ey(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new ny})()}createDatastore(e){const t=Wo(e.databaseInfo.databaseId),r=(function(a){return new Mm(a)})(e.databaseInfo);return(function(a,c,p,_){return new Bm(a,c,p,_)})(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,i,a,c,p){return new $m(r,i,a,c,p)})(this.localStore,this.datastore,e.asyncQueue,(t=>Bc(this.syncEngine,t,0)),(function(){return Oc.v()?new Oc:new xm})())}createSyncEngine(e,t){return(function(i,a,c,p,_,T,b){const k=new hy(i,a,c,p,_,T);return b&&(k.gu=!0),k})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const r=ge(t);ne(Sr,"RemoteStore shutting down."),r.Ea.add(5),await ws(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}$a.provider={build:()=>new $a};class Sy{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):yn("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}const tr="FirestoreClient";class Cy{constructor(e,t,r,i,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=ft.UNAUTHENTICATED,this.clientId=Ya.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,(async c=>{ne(tr,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(r,(c=>(ne(tr,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Qn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=vu(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function Ta(n,e){n.asyncQueue.verifyOperationInProgress(),ne(tr,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener((async i=>{r.isEqual(i)||(await Ih(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function $c(n,e){n.asyncQueue.verifyOperationInProgress();const t=await Ry(n);ne(tr,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((r=>Mc(e.remoteStore,r))),n.setAppCheckTokenChangeListener(((r,i)=>Mc(e.remoteStore,i))),n._onlineComponents=e}async function Ry(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ne(tr,"Using user provided OfflineComponentProvider");try{await Ta(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(i){return i.name==="FirebaseError"?i.code===K.FAILED_PRECONDITION||i.code===K.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(t))throw t;ei("Error using user provided cache. Falling back to memory cache: "+t),await Ta(n,new So)}}else ne(tr,"Using default OfflineComponentProvider"),await Ta(n,new by(void 0));return n._offlineComponents}async function Bh(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ne(tr,"Using user provided OnlineComponentProvider"),await $c(n,n._uninitializedComponentsProvider._online)):(ne(tr,"Using default OnlineComponentProvider"),await $c(n,new $a))),n._onlineComponents}function Py(n){return Bh(n).then((e=>e.syncEngine))}async function ky(n){const e=await Bh(n),t=e.eventManager;return t.onListen=fy.bind(null,e.syncEngine),t.onUnlisten=gy.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=dy.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=my.bind(null,e.syncEngine),t}function Dy(n,e,t={}){const r=new Qn;return n.asyncQueue.enqueueAndForget((async()=>(function(a,c,p,_,T){const b=new Sy({next:L=>{b.Nu(),c.enqueueAndForget((()=>iy(a,k)));const G=L.docs.has(p);!G&&L.fromCache?T.reject(new oe(K.UNAVAILABLE,"Failed to get document because the client is offline.")):G&&L.fromCache&&_&&_.source==="server"?T.reject(new oe(K.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):T.resolve(L)},error:L=>T.reject(L)}),k=new ay(su(p.path),b,{includeMetadataChanges:!0,qa:!0});return ry(a,k)})(await ky(n),n.asyncQueue,e,t,r))),r.promise}function qh(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}const Hc=new Map;const $h="firestore.googleapis.com",zc=!0;class Wc{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new oe(K.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=$h,this.ssl=zc}else this.host=e.host,this.ssl=e.ssl??zc;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Eh;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<sm)throw new oe(K.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Bp("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=qh(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new oe(K.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new oe(K.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new oe(K.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Iu{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Wc({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new oe(K.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new oe(K.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Wc(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new kp;switch(r.type){case"firstParty":return new Vp(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new oe(K.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=Hc.get(t);r&&(ne("ComponentProvider","Removing Datastore"),Hc.delete(t),r.terminate())})(this),Promise.resolve()}}function Ny(n,e,t,r={}){n=as(n,Iu);const i=ai(e),a=n._getSettings(),c={...a,emulatorOptions:n._getEmulatorOptions()},p=`${e}:${t}`;i&&(vl(`https://${p}`),Tl("Firestore",!0)),a.host!==$h&&a.host!==p&&ei("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const _={...a,host:p,ssl:i,emulatorOptions:r};if(!Ir(_,c)&&(n._setSettings(_),r.mockUserToken)){let T,b;if(typeof r.mockUserToken=="string")T=r.mockUserToken,b=ft.MOCK_USER;else{T=rd(r.mockUserToken,n._app?.options.projectId);const k=r.mockUserToken.sub||r.mockUserToken.user_id;if(!k)throw new oe(K.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");b=new ft(k)}n._authCredentials=new Dp(new Vl(T,b))}}class Au{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Au(this.firestore,e,this._query)}}class et{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new gs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new et(this.firestore,e,this._key)}toJSON(){return{type:et._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(vs(t,et._jsonSchema))return new et(e,r||null,new ue(Fe.fromString(t.referencePath)))}}et._jsonSchemaVersion="firestore/documentReference/1.0",et._jsonSchema={type:Ke("string",et._jsonSchemaVersion),referencePath:Ke("string")};class gs extends Au{constructor(e,t,r){super(e,t,su(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new et(this.firestore,null,new ue(e))}withConverter(e){return new gs(this.firestore,e,this._path)}}function Hh(n,e,...t){if(n=tn(n),arguments.length===1&&(e=Ya.newId()),jp("doc","path",e),n instanceof Iu){const r=Fe.fromString(e,...t);return oc(r),new et(n,null,new ue(r))}{if(!(n instanceof et||n instanceof gs))throw new oe(K.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Fe.fromString(e,...t));return oc(r),new et(n.firestore,n instanceof gs?n.converter:null,new ue(r))}}const Gc="AsyncQueue";class Kc{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new bh(this,"async_queue_retry"),this._c=()=>{const r=va();r&&ne(Gc,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const t=va();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=va();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Qn;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!hi(e))throw e;ne(Gc,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,yn("INTERNAL UNHANDLED ERROR: ",Qc(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const i=_u.createAndSchedule(this,e,t,r,(a=>this.hc(a)));return this.tc.push(i),i}uc(){this.nc&&ce(47125,{Pc:Qc(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function Qc(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class bu extends Iu{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Kc,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Kc(e),this._firestoreClient=void 0,await e}}}function xy(n,e){const t=typeof n=="object"?n:Al(),r=typeof n=="string"?n:_o,i=Xa(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const a=td("firestore");a&&Ny(i,...a)}return i}function zh(n){if(n._terminated)throw new oe(K.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||Vy(n),n._firestoreClient}function Vy(n){const e=n._freezeSettings(),t=(function(i,a,c,p){return new Yp(i,a,c,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,qh(p.experimentalLongPollingOptions),p.useFetchStreams,p.isUsingEmulator)})(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new Cy(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(i){const a=i?._online.build();return{_offline:i?._offline.build(a),_online:a}})(n._componentsProvider))}class Rt{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Rt(at.fromBase64String(e))}catch(t){throw new oe(K.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Rt(at.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Rt._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(vs(e,Rt._jsonSchema))return Rt.fromBase64String(e.bytes)}}Rt._jsonSchemaVersion="firestore/bytes/1.0",Rt._jsonSchema={type:Ke("string",Rt._jsonSchemaVersion),bytes:Ke("string")};class Su{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new oe(K.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ot(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Cu{constructor(e){this._methodName=e}}class Jt{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new oe(K.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new oe(K.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return we(this._lat,e._lat)||we(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Jt._jsonSchemaVersion}}static fromJSON(e){if(vs(e,Jt._jsonSchema))return new Jt(e.latitude,e.longitude)}}Jt._jsonSchemaVersion="firestore/geoPoint/1.0",Jt._jsonSchema={type:Ke("string",Jt._jsonSchemaVersion),latitude:Ke("number"),longitude:Ke("number")};class Yt{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==i[a])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Yt._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(vs(e,Yt._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Yt(e.vectorValues);throw new oe(K.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Yt._jsonSchemaVersion="firestore/vectorValue/1.0",Yt._jsonSchema={type:Ke("string",Yt._jsonSchemaVersion),vectorValues:Ke("object")};const Oy=/^__.*__$/;class Ly{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new kr(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ts(e,this.data,t,this.fieldTransforms)}}function Wh(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ce(40011,{Ac:n})}}class Ru{constructor(e,t,r,i,a,c){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,a===void 0&&this.Rc(),this.fieldTransforms=a||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Ru({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.gc(e),r}yc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Co(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(Wh(this.Ac)&&Oy.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class My{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Wo(e)}Cc(e,t,r,i=!1){return new Ru({Ac:e,methodName:t,Dc:r,path:ot.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Fy(n){const e=n._freezeSettings(),t=Wo(n._databaseId);return new My(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Uy(n,e,t,r,i,a={}){const c=n.Cc(a.merge||a.mergeFields?2:0,e,t,i);Xh("Data must be an object, but it was:",c,r);const p=Kh(r,c);let _,T;if(a.merge)_=new Lt(c.fieldMask),T=c.fieldTransforms;else if(a.mergeFields){const b=[];for(const k of a.mergeFields){const L=jy(e,k,t);if(!c.contains(L))throw new oe(K.INVALID_ARGUMENT,`Field '${L}' is specified in your field mask but missing from your input data.`);qy(b,L)||b.push(L)}_=new Lt(b),T=c.fieldTransforms.filter((k=>_.covers(k.field)))}else _=null,T=c.fieldTransforms;return new Ly(new Ct(p),_,T)}class Pu extends Cu{_toFieldTransform(e){return new bg(e.path,new fs)}isEqual(e){return e instanceof Pu}}function Gh(n,e){if(Qh(n=tn(n)))return Xh("Unsupported field value:",e,n),Kh(n,e);if(n instanceof Cu)return(function(r,i){if(!Wh(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(i);a&&i.fieldTransforms.push(a)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,i){const a=[];let c=0;for(const p of r){let _=Gh(p,i.wc(c));_==null&&(_={nullValue:"NULL_VALUE"}),a.push(_),c++}return{arrayValue:{values:a}}})(n,e)}return(function(r,i){if((r=tn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return wg(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=xe.fromDate(r);return{timestampValue:Io(i.serializer,a)}}if(r instanceof xe){const a=new xe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Io(i.serializer,a)}}if(r instanceof Jt)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Rt)return{bytesValue:ph(i.serializer,r._byteString)};if(r instanceof et){const a=i.databaseId,c=r.firestore._databaseId;if(!c.isEqual(a))throw i.Sc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:cu(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Yt)return(function(c,p){return{mapValue:{fields:{[$l]:{stringValue:Hl},[vo]:{arrayValue:{values:c.toArray().map((T=>{if(typeof T!="number")throw p.Sc("VectorValues must only contain numeric values.");return ou(p.serializer,T)}))}}}}}})(r,i);throw i.Sc(`Unsupported field value: ${Za(r)}`)})(n,e)}function Kh(n,e){const t={};return Ml(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Rr(n,((r,i)=>{const a=Gh(i,e.mc(r));a!=null&&(t[r]=a)})),{mapValue:{fields:t}}}function Qh(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof xe||n instanceof Jt||n instanceof Rt||n instanceof et||n instanceof Cu||n instanceof Yt)}function Xh(n,e,t){if(!Qh(t)||!Ol(t)){const r=Za(t);throw r==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+r)}}function jy(n,e,t){if((e=tn(e))instanceof Su)return e._internalPath;if(typeof e=="string")return Jh(n,e);throw Co("Field path arguments must be of type string or ",n,!1,void 0,t)}const By=new RegExp("[~\\*/\\[\\]]");function Jh(n,e,t){if(e.search(By)>=0)throw Co(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Su(...e.split("."))._internalPath}catch{throw Co(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Co(n,e,t,r,i){const a=r&&!r.isEmpty(),c=i!==void 0;let p=`Function ${e}() called with invalid data`;t&&(p+=" (via `toFirestore()`)"),p+=". ";let _="";return(a||c)&&(_+=" (found",a&&(_+=` in field ${r}`),c&&(_+=` in document ${i}`),_+=")"),new oe(K.INVALID_ARGUMENT,p+n+_)}function qy(n,e){return n.some((t=>t.isEqual(e)))}class Yh{constructor(e,t,r,i,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new et(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new $y(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Zh("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class $y extends Yh{data(){return super.data()}}function Zh(n,e){return typeof e=="string"?Jh(n,e):e instanceof Su?e._internalPath:e._delegate._internalPath}class Hy{convertValue(e,t="none"){switch(Zn(e)){case 0:return null;case 1:return e.booleanValue;case 2:return He(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Yn(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ce(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Rr(e,((i,a)=>{r[i]=this.convertValue(a,t)})),r}convertVectorValue(e){const t=e.fields?.[vo].arrayValue?.values?.map((r=>He(r.doubleValue)));return new Yt(t)}convertGeoPoint(e){return new Jt(He(e.latitude),He(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Uo(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(cs(e));default:return null}}convertTimestamp(e){const t=Jn(e);return new xe(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Fe.fromString(e);Re(Th(r),9688,{name:e});const i=new ls(r.get(1),r.get(3)),a=new ue(r.popFirst(5));return i.isEqual(t)||yn(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}function zy(n,e,t){let r;return r=n?n.toFirestore(e):e,r}class Yi{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Er extends Yh{constructor(e,t,r,i,a,c){super(e,t,r,i,c),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new co(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Zh("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new oe(K.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Er._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Er._jsonSchemaVersion="firestore/documentSnapshot/1.0",Er._jsonSchema={type:Ke("string",Er._jsonSchemaVersion),bundleSource:Ke("string","DocumentSnapshot"),bundleName:Ke("string"),bundle:Ke("string")};class co extends Er{data(e={}){return super.data(e)}}class is{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Yi(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new co(this._firestore,this._userDataWriter,r.key,r,new Yi(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new oe(K.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,a){if(i._snapshot.oldDocs.isEmpty()){let c=0;return i._snapshot.docChanges.map((p=>{const _=new co(i._firestore,i._userDataWriter,p.doc.key,p.doc,new Yi(i._snapshot.mutatedKeys.has(p.doc.key),i._snapshot.fromCache),i.query.converter);return p.doc,{type:"added",doc:_,oldIndex:-1,newIndex:c++}}))}{let c=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((p=>a||p.type!==3)).map((p=>{const _=new co(i._firestore,i._userDataWriter,p.doc.key,p.doc,new Yi(i._snapshot.mutatedKeys.has(p.doc.key),i._snapshot.fromCache),i.query.converter);let T=-1,b=-1;return p.type!==0&&(T=c.indexOf(p.doc.key),c=c.delete(p.doc.key)),p.type!==1&&(c=c.add(p.doc),b=c.indexOf(p.doc.key)),{type:Wy(p.type),doc:_,oldIndex:T,newIndex:b}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new oe(K.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=is._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Ya.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],i=[];return this.docs.forEach((a=>{a._document!==null&&(t.push(a._document),r.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),i.push(a.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function Wy(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ce(61501,{type:n})}}function Gy(n){n=as(n,et);const e=as(n.firestore,bu);return Dy(zh(e),n._key).then((t=>Jy(e,n,t)))}is._jsonSchemaVersion="firestore/querySnapshot/1.0",is._jsonSchema={type:Ke("string",is._jsonSchemaVersion),bundleSource:Ke("string","QuerySnapshot"),bundleName:Ke("string"),bundle:Ke("string")};class Ky extends Hy{constructor(e){super(),this.firestore=e}convertBytes(e){return new Rt(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new et(this.firestore,null,t)}}function Qy(n,e,t){n=as(n,et);const r=as(n.firestore,bu),i=zy(n.converter,e);return Xy(r,[Uy(Fy(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,gn.none())])}function Xy(n,e){return(function(r,i){const a=new Qn;return r.asyncQueue.enqueueAndForget((async()=>yy(await Py(r),i,a))),a.promise})(zh(n),e)}function Jy(n,e,t){const r=t.docs.get(e._key),i=new Ky(n);return new Er(n,i,e._key,r,new Yi(t.hasPendingWrites,t.fromCache),e.converter)}function Yy(){return new Pu("serverTimestamp")}(function(e,t=!0){(function(i){ci=i})(ui),Zr(new Ar("firestore",((r,{instanceIdentifier:i,options:a})=>{const c=r.getProvider("app").getImmediate(),p=new bu(new Np(r.getProvider("auth-internal")),new Op(c,r.getProvider("app-check-internal")),(function(T,b){if(!Object.prototype.hasOwnProperty.apply(T.options,["projectId"]))throw new oe(K.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ls(T.options.projectId,b)})(c,i),c);return a={useFetchStreams:t,...a},p._setSettings(a),p}),"PUBLIC").setMultipleInstances(!0)),Gn(nc,rc,e),Gn(nc,rc,"esm2020")})();(()=>{const n=[["Cielo","#0EBEFF"],["Dulce","#FF5C69"],["Paz","#29C72E"],["Mora","#7000FF"],["Futuro","#21273B"]],e=r=>{const[i,a]=Ce(r).data("tema").split("|");Ce("html").attr("data-theme",i),(Ce('meta[name="theme-color"]')[0]||Ce('<meta name="theme-color">').appendTo("head")[0]).content=a,Zy("wiTema",`${i}|${a}`,720),Ce(".mtha").removeClass("mtha"),Ce(r).addClass("mtha")},t=()=>{Ce(".witemas").html(n.map(([a,c])=>`<div class="tema" data-tema="${a}|${c}" style="background:${c}"></div>`).join(""));const r=e_("wiTema"),i=Ce(`[data-tema="${r}"]`)[0]||Ce(".tema").first()[0];i&&e(i),Ce(document).off("click.witema").on("click.witema",".tema",a=>e(a.currentTarget))};return Ce(".witemas").length?t():new MutationObserver(r=>r.some(({addedNodes:i})=>[...i].some(a=>a.querySelector?.(".witemas")))&&(t(),!0)).observe(document.body,{childList:1,subtree:1}),{set:e}})();function Ha(n,e="error",t=3e3){const r={success:"fa-check-circle",error:"fa-times-circle",warning:"fa-exclamation-triangle",info:"fa-info-circle"},i={success:"#2E7D32",error:"#D32F2F",warning:"#F9A825",info:"#0288D1"};Ce("#notificationsContainer").length||Ce("body").append('<div id="notificationsContainer" style="position:fixed;top:1rem;right:1rem;z-index:9999;display:flex;flex-direction:column;gap:.5rem;"></div>');const a=Ce(`
    <div class="notification" style="background:#fff;border-left:4px solid ${i[e]};box-shadow:0 4px 12px rgba(0,0,0,.1);border-radius:8px;padding:1rem;display:flex;align-items:center;gap:.5rem;opacity:0;transform:translateX(20px);transition:all .3s ease;">
      <i class="fas ${r[e]}" style="color:${i[e]};"></i>
      <span style="flex:1">${n}</span>
      <button style="background:none;border:none;font-size:1.2rem;cursor:pointer;">&times;</button>
    </div>
  `);Ce("#notificationsContainer").append(a),requestAnimationFrame(()=>a.css({opacity:1,transform:"translateX(0)"})),a.find("button").on("click",()=>{a.css({opacity:0,transform:"translateX(20px)"}),setTimeout(()=>a.remove(),300)}),setTimeout(()=>{a.css({opacity:0,transform:"translateX(20px)"}),setTimeout(()=>a.remove(),300)},t)}const Ro=(n,e="success")=>{Ce(".alert-box").remove();const t={error:{bg:"#FFE8E6",txt:"#D32F2F",border:"#FFCDD2",icon:"fa-circle-exclamation"},success:{bg:"#E8F5E9",txt:"#2E7D32",border:"#C8E6C9",icon:"fa-circle-check"}},{bg:r,txt:i,border:a,icon:c}=t[e]||t.error,p=Ce(`
        <div class="alert-box" style="
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            padding: 15px 20px;
            border-radius: 8px;
            background: ${r};
            color: ${i};
            border-left: 4px solid ${a};
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            z-index: 1000;
            display: flex;
            align-items: center;
            gap: 10px;
            min-width: 300px;
            max-width: 90%;
            
        ">
            <i class="fas ${c}"></i>
            <span>${n}</span>
        </div>
    `).appendTo("body").hide().fadeIn(300);setTimeout(()=>p.fadeOut(300,()=>p.remove()),3e3)};function Zy(n,e,t){try{localStorage.setItem(n,JSON.stringify({value:e,expiry:Date.now()+t*36e5,type:typeof e,isArray:Array.isArray(e)}))}catch(r){console.error("Error savels",r)}}function e_(n){try{const e=localStorage.getItem(n);if(!e)return null;const t=JSON.parse(e);return!t||Date.now()>t.expiry?(localStorage.removeItem(n),null):t.value}catch(e){return console.error("Error getls:",e),t_(n),null}}function t_(...n){n.forEach(e=>{e&&typeof e=="string"&&localStorage.removeItem(e)})}class n_{constructor(){this.routes={},this.currentRoute=null,this.contentContainer="#wiMainContent",this.isNavigating=!1}register(e,t){this.routes[e]=t}async navigate(e,t=!0){if(this.isNavigating)return;this.isNavigating=!0;const r=e==="/"?"/hora":e;if(!this.routes[r]){console.warn(`Ruta no encontrada: ${r}`),Ha("PÃ¡gina no encontrada","error",2e3),this.isNavigating=!1;return}try{this.updateActiveNav(r),this.currentRoute&&await this.fadeOut();const i=this.routes[r],a=typeof i=="function"?await i():i,c=await a.render();if(Ce(this.contentContainer).html(c),document.title=r.replace("/","").replace(/^(\w)/,p=>p.toUpperCase())+" - Wihope"||"Wihope",a.init&&a.init(),await this.fadeIn(),t){const p=r==="/hora"?"/":r;window.history.pushState({path:r},"",p)}this.currentRoute=r}catch(i){console.error("Error al navegar:",i),Ha("Error al cargar la pÃ¡gina","error",2e3)}finally{this.isNavigating=!1}}updateActiveNav(e){const t=e.replace("/","")||"hora";Ce(".winav_item").removeClass("active"),Ce(`.winav_item[data-page="${t}"]`).addClass("active")}fadeOut(){return new Promise(e=>{Ce(this.contentContainer).css({opacity:1}).animate({opacity:0},150,e)})}fadeIn(){return new Promise(e=>{Ce(this.contentContainer).css({opacity:0}).animate({opacity:1},150,e)})}async prefetch(e){const t=e==="/"?"/hora":e;if(!(!this.routes[t]||typeof this.routes[t]!="function")){console.log(`â¡ Prefetching: ${t}`);try{const r=await this.routes[t]();this.routes[t]=r}catch(r){console.warn(`Error prefetching ${t}`,r)}}}init(){Ce(document).on("click",".winav_item",t=>{t.preventDefault();const r=Ce(t.currentTarget).data("page"),i=r==="hora"?"/":`/${r}`;this.navigate(i)}),Ce(document).on("mouseenter",".winav_item",t=>{const r=Ce(t.currentTarget).data("page"),i=r==="hora"?"/":`/${r}`;this.prefetch(i)}),window.addEventListener("popstate",t=>{const r=t.state?.path||window.location.pathname;this.navigate(r,!1)});const e=window.location.pathname==="/"?"/hora":window.location.pathname;this.navigate(e,!1)}}const di=new n_;var r_="firebase",i_="12.6.0";Gn(r_,i_,"app");function ef(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const s_=ef,tf=new ys("auth","Firebase",ef());const Po=new Ka("@firebase/auth");function o_(n,...e){Po.logLevel<=Ee.WARN&&Po.warn(`Auth (${ui}): ${n}`,...e)}function lo(n,...e){Po.logLevel<=Ee.ERROR&&Po.error(`Auth (${ui}): ${n}`,...e)}function vn(n,...e){throw ku(n,...e)}function Zt(n,...e){return ku(n,...e)}function nf(n,e,t){const r={...s_(),[e]:t};return new ys("auth","Firebase",r).create(e,{appName:n.name})}function wr(n){return nf(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function ku(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return tf.create(n,...e)}function he(n,e,...t){if(!n)throw ku(e,...t)}function dn(n){const e="INTERNAL ASSERTION FAILED: "+n;throw lo(e),new Error(e)}function Tn(n,e){n||dn(e)}function za(){return typeof self<"u"&&self.location?.href||""}function a_(){return Xc()==="http:"||Xc()==="https:"}function Xc(){return typeof self<"u"&&self.location?.protocol||null}function u_(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(a_()||cd()||"connection"in navigator)?navigator.onLine:!0}function c_(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}class As{constructor(e,t){this.shortDelay=e,this.longDelay=t,Tn(t>e,"Short delay should be less than long delay!"),this.isMobile=od()||ld()}get(){return u_()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Du(n,e){Tn(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class rf{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;dn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;dn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;dn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const l_={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const h_=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],f_=new As(3e4,6e4);function Nu(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function pi(n,e,t,r,i={}){return sf(n,i,async()=>{let a={},c={};r&&(e==="GET"?c=r:a={body:JSON.stringify(r)});const p=_s({key:n.config.apiKey,...c}).slice(1),_=await n._getAdditionalHeaders();_["Content-Type"]="application/json",n.languageCode&&(_["X-Firebase-Locale"]=n.languageCode);const T={method:e,headers:_,...a};return ud()||(T.referrerPolicy="no-referrer"),n.emulatorConfig&&ai(n.emulatorConfig.host)&&(T.credentials="include"),rf.fetch()(await of(n,n.config.apiHost,t,p),T)})}async function sf(n,e,t){n._canInitEmulator=!1;const r={...l_,...e};try{const i=new p_(n),a=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const c=await a.json();if("needConfirmation"in c)throw no(n,"account-exists-with-different-credential",c);if(a.ok&&!("errorMessage"in c))return c;{const p=a.ok?c.errorMessage:c.error.message,[_,T]=p.split(" : ");if(_==="FEDERATED_USER_ID_ALREADY_LINKED")throw no(n,"credential-already-in-use",c);if(_==="EMAIL_EXISTS")throw no(n,"email-already-in-use",c);if(_==="USER_DISABLED")throw no(n,"user-disabled",c);const b=r[_]||_.toLowerCase().replace(/[_\s]+/g,"-");if(T)throw nf(n,b,T);vn(n,b)}}catch(i){if(i instanceof En)throw i;vn(n,"network-request-failed",{message:String(i)})}}async function d_(n,e,t,r,i={}){const a=await pi(n,e,t,r,i);return"mfaPendingCredential"in a&&vn(n,"multi-factor-auth-required",{_serverResponse:a}),a}async function of(n,e,t,r){const i=`${e}${t}?${r}`,a=n,c=a.config.emulator?Du(n.config,i):`${n.config.apiScheme}://${i}`;return h_.includes(t)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(c).toString():c}class p_{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Zt(this.auth,"network-request-failed")),f_.get())})}}function no(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=Zt(n,e,r);return i.customData._tokenResponse=t,i}async function g_(n,e){return pi(n,"POST","/v1/accounts:delete",e)}async function ko(n,e){return pi(n,"POST","/v1/accounts:lookup",e)}function ss(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function m_(n,e=!1){const t=tn(n),r=await t.getIdToken(e),i=xu(r);he(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const a=typeof i.firebase=="object"?i.firebase:void 0,c=a?.sign_in_provider;return{claims:i,token:r,authTime:ss(Ea(i.auth_time)),issuedAtTime:ss(Ea(i.iat)),expirationTime:ss(Ea(i.exp)),signInProvider:c||null,signInSecondFactor:a?.sign_in_second_factor||null}}function Ea(n){return Number(n)*1e3}function xu(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return lo("JWT malformed, contained fewer than 3 sections"),null;try{const i=gl(t);return i?JSON.parse(i):(lo("Failed to decode base64 JWT payload"),null)}catch(i){return lo("Caught error parsing JWT payload as JSON",i?.toString()),null}}function Jc(n){const e=xu(n);return he(e,"internal-error"),he(typeof e.exp<"u","internal-error"),he(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function ms(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof En&&y_(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function y_({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}class __{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class Wa{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=ss(this.lastLoginAt),this.creationTime=ss(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Do(n){const e=n.auth,t=await n.getIdToken(),r=await ms(n,ko(e,{idToken:t}));he(r?.users.length,e,"internal-error");const i=r.users[0];n._notifyReloadListener(i);const a=i.providerUserInfo?.length?af(i.providerUserInfo):[],c=T_(n.providerData,a),p=n.isAnonymous,_=!(n.email&&i.passwordHash)&&!c?.length,T=p?_:!1,b={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:c,metadata:new Wa(i.createdAt,i.lastLoginAt),isAnonymous:T};Object.assign(n,b)}async function v_(n){const e=tn(n);await Do(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function T_(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function af(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function E_(n,e){const t=await sf(n,{},async()=>{const r=_s({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:a}=n.config,c=await of(n,i,"/v1/token",`key=${a}`),p=await n._getAdditionalHeaders();p["Content-Type"]="application/x-www-form-urlencoded";const _={method:"POST",headers:p,body:r};return n.emulatorConfig&&ai(n.emulatorConfig.host)&&(_.credentials="include"),rf.fetch()(c,_)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function w_(n,e){return pi(n,"POST","/v2/accounts:revokeToken",Nu(n,e))}class Xr{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){he(e.idToken,"internal-error"),he(typeof e.idToken<"u","internal-error"),he(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Jc(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){he(e.length!==0,"internal-error");const t=Jc(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(he(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:i,expiresIn:a}=await E_(e,t);this.updateTokensAndExpiration(r,i,Number(a))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:a}=t,c=new Xr;return r&&(he(typeof r=="string","internal-error",{appName:e}),c.refreshToken=r),i&&(he(typeof i=="string","internal-error",{appName:e}),c.accessToken=i),a&&(he(typeof a=="number","internal-error",{appName:e}),c.expirationTime=a),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Xr,this.toJSON())}_performRefresh(){return dn("not implemented")}}function Un(n,e){he(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Mt{constructor({uid:e,auth:t,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new __(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Wa(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await ms(this,this.stsTokenManager.getToken(this.auth,e));return he(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return m_(this,e)}reload(){return v_(this)}_assign(e){this!==e&&(he(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Mt({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){he(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await Do(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Kt(this.auth.app))return Promise.reject(wr(this.auth));const e=await this.getIdToken();return await ms(this,g_(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const r=t.displayName??void 0,i=t.email??void 0,a=t.phoneNumber??void 0,c=t.photoURL??void 0,p=t.tenantId??void 0,_=t._redirectEventId??void 0,T=t.createdAt??void 0,b=t.lastLoginAt??void 0,{uid:k,emailVerified:L,isAnonymous:G,providerData:W,stsTokenManager:X}=t;he(k&&X,e,"internal-error");const Z=Xr.fromJSON(this.name,X);he(typeof k=="string",e,"internal-error"),Un(r,e.name),Un(i,e.name),he(typeof L=="boolean",e,"internal-error"),he(typeof G=="boolean",e,"internal-error"),Un(a,e.name),Un(c,e.name),Un(p,e.name),Un(_,e.name),Un(T,e.name),Un(b,e.name);const Y=new Mt({uid:k,auth:e,email:i,emailVerified:L,displayName:r,isAnonymous:G,photoURL:c,phoneNumber:a,tenantId:p,stsTokenManager:Z,createdAt:T,lastLoginAt:b});return W&&Array.isArray(W)&&(Y.providerData=W.map(Ae=>({...Ae}))),_&&(Y._redirectEventId=_),Y}static async _fromIdTokenResponse(e,t,r=!1){const i=new Xr;i.updateFromServerResponse(t);const a=new Mt({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Do(a),a}static async _fromGetAccountInfoResponse(e,t,r){const i=t.users[0];he(i.localId!==void 0,"internal-error");const a=i.providerUserInfo!==void 0?af(i.providerUserInfo):[],c=!(i.email&&i.passwordHash)&&!a?.length,p=new Xr;p.updateFromIdToken(r);const _=new Mt({uid:i.localId,auth:e,stsTokenManager:p,isAnonymous:c}),T={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new Wa(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!a?.length};return Object.assign(_,T),_}}const Yc=new Map;function pn(n){Tn(n instanceof Function,"Expected a class definition");let e=Yc.get(n);return e?(Tn(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,Yc.set(n,e),e)}class uf{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}uf.type="NONE";const Zc=uf;function ho(n,e,t){return`firebase:${n}:${e}:${t}`}class Jr{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:a}=this.auth;this.fullUserKey=ho(this.userKey,i.apiKey,a),this.fullPersistenceKey=ho("persistence",i.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await ko(this.auth,{idToken:e}).catch(()=>{});return t?Mt._fromGetAccountInfoResponse(this.auth,t,e):null}return Mt._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new Jr(pn(Zc),e,r);const i=(await Promise.all(t.map(async T=>{if(await T._isAvailable())return T}))).filter(T=>T);let a=i[0]||pn(Zc);const c=ho(r,e.config.apiKey,e.name);let p=null;for(const T of t)try{const b=await T._get(c);if(b){let k;if(typeof b=="string"){const L=await ko(e,{idToken:b}).catch(()=>{});if(!L)break;k=await Mt._fromGetAccountInfoResponse(e,L,b)}else k=Mt._fromJSON(e,b);T!==a&&(p=k),a=T;break}}catch{}const _=i.filter(T=>T._shouldAllowMigration);return!a._shouldAllowMigration||!_.length?new Jr(a,e,r):(a=_[0],p&&await a._set(c,p.toJSON()),await Promise.all(t.map(async T=>{if(T!==a)try{await T._remove(c)}catch{}})),new Jr(a,e,r))}}function el(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(ff(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(cf(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(pf(e))return"Blackberry";if(gf(e))return"Webos";if(lf(e))return"Safari";if((e.includes("chrome/")||hf(e))&&!e.includes("edge/"))return"Chrome";if(df(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function cf(n=pt()){return/firefox\//i.test(n)}function lf(n=pt()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function hf(n=pt()){return/crios\//i.test(n)}function ff(n=pt()){return/iemobile/i.test(n)}function df(n=pt()){return/android/i.test(n)}function pf(n=pt()){return/blackberry/i.test(n)}function gf(n=pt()){return/webos/i.test(n)}function Vu(n=pt()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function I_(n=pt()){return Vu(n)&&!!window.navigator?.standalone}function A_(){return hd()&&document.documentMode===10}function mf(n=pt()){return Vu(n)||df(n)||gf(n)||pf(n)||/windows phone/i.test(n)||ff(n)}function yf(n,e=[]){let t;switch(n){case"Browser":t=el(pt());break;case"Worker":t=`${el(pt())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${ui}/${r}`}class b_{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=a=>new Promise((c,p)=>{try{const _=e(a);c(_)}catch(_){p(_)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}async function S_(n,e={}){return pi(n,"GET","/v2/passwordPolicy",Nu(n,e))}const C_=6;class R_{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??C_,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}class P_{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new tl(this),this.idTokenSubscription=new tl(this),this.beforeStateQueue=new b_(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=tf,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=pn(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Jr.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await ko(this,{idToken:e}),r=await Mt._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Kt(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(c,c))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let r=t,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=this.redirectUser?._redirectEventId,c=r?._redirectEventId,p=await this.tryRedirectSignIn(e);(!a||a===c)&&p?.user&&(r=p.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(a){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return he(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Do(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=c_()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Kt(this.app))return Promise.reject(wr(this));const t=e?tn(e):null;return t&&he(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&he(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Kt(this.app)?Promise.reject(wr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Kt(this.app)?Promise.reject(wr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(pn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await S_(this),t=new R_(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ys("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await w_(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&pn(e)||this._popupRedirectResolver;he(t,this,"argument-error"),this.redirectPersistenceManager=await Jr.create(this,[pn(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const a=typeof t=="function"?t:t.next.bind(t);let c=!1;const p=this._isInitialized?Promise.resolve():this._initializationPromise;if(he(p,this,"internal-error"),p.then(()=>{c||a(this.currentUser)}),typeof t=="function"){const _=e.addObserver(t,r,i);return()=>{c=!0,_()}}else{const _=e.addObserver(t);return()=>{c=!0,_()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return he(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=yf(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(Kt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&o_(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Ou(n){return tn(n)}class tl{constructor(e){this.auth=e,this.observer=null,this.addObserver=vd(t=>this.observer=t)}get next(){return he(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Lu={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function k_(n){Lu=n}function D_(n){return Lu.loadJS(n)}function N_(){return Lu.gapiScript}function x_(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function V_(n,e){const t=Xa(n,"auth");if(t.isInitialized()){const i=t.getImmediate(),a=t.getOptions();if(Ir(a,e??{}))return i;vn(i,"already-initialized")}return t.initialize({options:e})}function O_(n,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(pn);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function L_(n,e,t){const r=Ou(n);he(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,a=_f(e),{host:c,port:p}=M_(e),_=p===null?"":`:${p}`,T={url:`${a}//${c}${_}/`},b=Object.freeze({host:c,port:p,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){he(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),he(Ir(T,r.config.emulator)&&Ir(b,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=T,r.emulatorConfig=b,r.settings.appVerificationDisabledForTesting=!0,ai(c)?(vl(`${a}//${c}${_}`),Tl("Auth",!0)):F_()}function _f(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function M_(n){const e=_f(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const a=i[1];return{host:a,port:nl(r.substr(a.length+1))}}else{const[a,c]=r.split(":");return{host:a,port:nl(c)}}}function nl(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function F_(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}class vf{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return dn("not implemented")}_getIdTokenResponse(e){return dn("not implemented")}_linkToIdToken(e,t){return dn("not implemented")}_getReauthenticationResolver(e){return dn("not implemented")}}async function Yr(n,e){return d_(n,"POST","/v1/accounts:signInWithIdp",Nu(n,e))}const U_="http://localhost";class Cr extends vf{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Cr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):vn("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...a}=t;if(!r||!i)return null;const c=new Cr(r,i);return c.idToken=a.idToken||void 0,c.accessToken=a.accessToken||void 0,c.secret=a.secret,c.nonce=a.nonce,c.pendingToken=a.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return Yr(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Yr(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Yr(e,t)}buildRequest(){const e={requestUri:U_,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=_s(t)}return e}}class Tf{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class bs extends Tf{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class jn extends bs{constructor(){super("facebook.com")}static credential(e){return Cr._fromParams({providerId:jn.PROVIDER_ID,signInMethod:jn.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return jn.credentialFromTaggedObject(e)}static credentialFromError(e){return jn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return jn.credential(e.oauthAccessToken)}catch{return null}}}jn.FACEBOOK_SIGN_IN_METHOD="facebook.com";jn.PROVIDER_ID="facebook.com";class Bn extends bs{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Cr._fromParams({providerId:Bn.PROVIDER_ID,signInMethod:Bn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Bn.credentialFromTaggedObject(e)}static credentialFromError(e){return Bn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return Bn.credential(t,r)}catch{return null}}}Bn.GOOGLE_SIGN_IN_METHOD="google.com";Bn.PROVIDER_ID="google.com";class qn extends bs{constructor(){super("github.com")}static credential(e){return Cr._fromParams({providerId:qn.PROVIDER_ID,signInMethod:qn.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return qn.credentialFromTaggedObject(e)}static credentialFromError(e){return qn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return qn.credential(e.oauthAccessToken)}catch{return null}}}qn.GITHUB_SIGN_IN_METHOD="github.com";qn.PROVIDER_ID="github.com";class $n extends bs{constructor(){super("twitter.com")}static credential(e,t){return Cr._fromParams({providerId:$n.PROVIDER_ID,signInMethod:$n.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return $n.credentialFromTaggedObject(e)}static credentialFromError(e){return $n.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return $n.credential(t,r)}catch{return null}}}$n.TWITTER_SIGN_IN_METHOD="twitter.com";$n.PROVIDER_ID="twitter.com";class oi{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){const a=await Mt._fromIdTokenResponse(e,r,i),c=rl(r);return new oi({user:a,providerId:c,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const i=rl(r);return new oi({user:e,providerId:i,_tokenResponse:r,operationType:t})}}function rl(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}class No extends En{constructor(e,t,r,i){super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,No.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new No(e,t,r,i)}}function Ef(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?No._fromErrorAndOperation(n,a,e,r):a})}async function j_(n,e,t=!1){const r=await ms(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return oi._forOperation(n,"link",r)}async function B_(n,e,t=!1){const{auth:r}=n;if(Kt(r.app))return Promise.reject(wr(r));const i="reauthenticate";try{const a=await ms(n,Ef(r,i,e,n),t);he(a.idToken,r,"internal-error");const c=xu(a.idToken);he(c,r,"internal-error");const{sub:p}=c;return he(n.uid===p,r,"user-mismatch"),oi._forOperation(n,i,a)}catch(a){throw a?.code==="auth/user-not-found"&&vn(r,"user-mismatch"),a}}async function q_(n,e,t=!1){if(Kt(n.app))return Promise.reject(wr(n));const r="signIn",i=await Ef(n,r,e),a=await oi._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(a.user),a}function $_(n,e,t,r){return tn(n).onIdTokenChanged(e,t,r)}function H_(n,e,t){return tn(n).beforeAuthStateChanged(e,t)}const xo="__sak";class wf{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(xo,"1"),this.storage.removeItem(xo),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const z_=1e3,W_=10;class If extends wf{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=mf(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),i=this.localCache[t];r!==i&&e(t,i,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,p,_)=>{this.notifyListeners(c,_)});return}const r=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const c=this.storage.getItem(r);!t&&this.localCache[r]===c||this.notifyListeners(r,c)},a=this.storage.getItem(r);A_()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,W_):i()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},z_)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}If.type="LOCAL";const G_=If;class Af extends wf{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Af.type="SESSION";const bf=Af;function K_(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class Qo{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const r=new Qo(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:i,data:a}=t.data,c=this.handlersMap[i];if(!c?.size)return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const p=Array.from(c).map(async T=>T(t.origin,a)),_=await K_(p);t.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:_})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Qo.receivers=[];function Mu(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}class Q_{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let a,c;return new Promise((p,_)=>{const T=Mu("",20);i.port1.start();const b=setTimeout(()=>{_(new Error("unsupported_event"))},r);c={messageChannel:i,onMessage(k){const L=k;if(L.data.eventId===T)switch(L.data.status){case"ack":clearTimeout(b),a=setTimeout(()=>{_(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),p(L.data.response);break;default:clearTimeout(b),clearTimeout(a),_(new Error("invalid_response"));break}}},this.handlers.add(c),i.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:T,data:t},[i.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}function en(){return window}function X_(n){en().location.href=n}function Sf(){return typeof en().WorkerGlobalScope<"u"&&typeof en().importScripts=="function"}async function J_(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Y_(){return navigator?.serviceWorker?.controller||null}function Z_(){return Sf()?self:null}const Cf="firebaseLocalStorageDb",ev=1,Vo="firebaseLocalStorage",Rf="fbase_key";class Ss{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Xo(n,e){return n.transaction([Vo],e?"readwrite":"readonly").objectStore(Vo)}function tv(){const n=indexedDB.deleteDatabase(Cf);return new Ss(n).toPromise()}function Ga(){const n=indexedDB.open(Cf,ev);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(Vo,{keyPath:Rf})}catch(i){t(i)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(Vo)?e(r):(r.close(),await tv(),e(await Ga()))})})}async function il(n,e,t){const r=Xo(n,!0).put({[Rf]:e,value:t});return new Ss(r).toPromise()}async function nv(n,e){const t=Xo(n,!1).get(e),r=await new Ss(t).toPromise();return r===void 0?null:r.value}function sl(n,e){const t=Xo(n,!0).delete(e);return new Ss(t).toPromise()}const rv=800,iv=3;class Pf{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Ga(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>iv)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Sf()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Qo._getInstance(Z_()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await J_(),!this.activeServiceWorker)return;this.sender=new Q_(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Y_()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Ga();return await il(e,xo,"1"),await sl(e,xo),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>il(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>nv(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>sl(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const a=Xo(i,!1).getAll();return new Ss(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:a}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(a)&&(this.notifyListeners(i,a),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),rv)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Pf.type="LOCAL";const sv=Pf;new As(3e4,6e4);function ov(n,e){return e?pn(e):(he(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}class Fu extends vf{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Yr(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Yr(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Yr(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function av(n){return q_(n.auth,new Fu(n),n.bypassAuthState)}function uv(n){const{auth:e,user:t}=n;return he(t,e,"internal-error"),B_(t,new Fu(n),n.bypassAuthState)}async function cv(n){const{auth:e,user:t}=n;return he(t,e,"internal-error"),j_(t,new Fu(n),n.bypassAuthState)}class kf{constructor(e,t,r,i,a=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:i,tenantId:a,error:c,type:p}=e;if(c){this.reject(c);return}const _={auth:this.auth,requestUri:t,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(p)(_))}catch(T){this.reject(T)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return av;case"linkViaPopup":case"linkViaRedirect":return cv;case"reauthViaPopup":case"reauthViaRedirect":return uv;default:vn(this.auth,"internal-error")}}resolve(e){Tn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Tn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const lv=new As(2e3,1e4);class Kr extends kf{constructor(e,t,r,i,a){super(e,t,i,a),this.provider=r,this.authWindow=null,this.pollId=null,Kr.currentPopupAction&&Kr.currentPopupAction.cancel(),Kr.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return he(e,this.auth,"internal-error"),e}async onExecution(){Tn(this.filter.length===1,"Popup operations only handle one event");const e=Mu();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Zt(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Zt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Kr.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Zt(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,lv.get())};e()}}Kr.currentPopupAction=null;const hv="pendingRedirect",fo=new Map;class fv extends kf{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=fo.get(this.auth._key());if(!e){try{const r=await dv(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}fo.set(this.auth._key(),e)}return this.bypassAuthState||fo.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function dv(n,e){const t=mv(e),r=gv(n);if(!await r._isAvailable())return!1;const i=await r._get(t)==="true";return await r._remove(t),i}function pv(n,e){fo.set(n._key(),e)}function gv(n){return pn(n._redirectPersistence)}function mv(n){return ho(hv,n.config.apiKey,n.name)}async function yv(n,e,t=!1){if(Kt(n.app))return Promise.reject(wr(n));const r=Ou(n),i=ov(r,e),c=await new fv(r,i,t).execute();return c&&!t&&(delete c.user._redirectEventId,await r._persistUserIfCurrent(c.user),await r._setRedirectUser(null,e)),c}const _v=600*1e3;class vv{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Tv(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!Df(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";t.onError(Zt(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=_v&&this.cachedEventUids.clear(),this.cachedEventUids.has(ol(e))}saveEventToCache(e){this.cachedEventUids.add(ol(e)),this.lastProcessedEventTime=Date.now()}}function ol(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function Df({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function Tv(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Df(n);default:return!1}}async function Ev(n,e={}){return pi(n,"GET","/v1/projects",e)}const wv=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Iv=/^https?/;async function Av(n){if(n.config.emulator)return;const{authorizedDomains:e}=await Ev(n);for(const t of e)try{if(bv(t))return}catch{}vn(n,"unauthorized-domain")}function bv(n){const e=za(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const c=new URL(n);return c.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===r}if(!Iv.test(t))return!1;if(wv.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const Sv=new As(3e4,6e4);function al(){const n=en().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function Cv(n){return new Promise((e,t)=>{function r(){al(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{al(),t(Zt(n,"network-request-failed"))},timeout:Sv.get()})}if(en().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(en().gapi?.load)r();else{const i=x_("iframefcb");return en()[i]=()=>{gapi.load?r():t(Zt(n,"network-request-failed"))},D_(`${N_()}?onload=${i}`).catch(a=>t(a))}}).catch(e=>{throw po=null,e})}let po=null;function Rv(n){return po=po||Cv(n),po}const Pv=new As(5e3,15e3),kv="__/auth/iframe",Dv="emulator/auth/iframe",Nv={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},xv=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Vv(n){const e=n.config;he(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Du(e,Dv):`https://${n.config.authDomain}/${kv}`,r={apiKey:e.apiKey,appName:n.name,v:ui},i=xv.get(n.config.apiHost);i&&(r.eid=i);const a=n._getFrameworks();return a.length&&(r.fw=a.join(",")),`${t}?${_s(r).slice(1)}`}async function Ov(n){const e=await Rv(n),t=en().gapi;return he(t,n,"internal-error"),e.open({where:document.body,url:Vv(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Nv,dontclear:!0},r=>new Promise(async(i,a)=>{await r.restyle({setHideOnLeave:!1});const c=Zt(n,"network-request-failed"),p=en().setTimeout(()=>{a(c)},Pv.get());function _(){en().clearTimeout(p),i(r)}r.ping(_).then(_,()=>{a(c)})}))}const Lv={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Mv=500,Fv=600,Uv="_blank",jv="http://localhost";class ul{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Bv(n,e,t,r=Mv,i=Fv){const a=Math.max((window.screen.availHeight-i)/2,0).toString(),c=Math.max((window.screen.availWidth-r)/2,0).toString();let p="";const _={...Lv,width:r.toString(),height:i.toString(),top:a,left:c},T=pt().toLowerCase();t&&(p=hf(T)?Uv:t),cf(T)&&(e=e||jv,_.scrollbars="yes");const b=Object.entries(_).reduce((L,[G,W])=>`${L}${G}=${W},`,"");if(I_(T)&&p!=="_self")return qv(e||"",p),new ul(null);const k=window.open(e||"",p,b);he(k,n,"popup-blocked");try{k.focus()}catch{}return new ul(k)}function qv(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}const $v="__/auth/handler",Hv="emulator/auth/handler",zv=encodeURIComponent("fac");async function cl(n,e,t,r,i,a){he(n.config.authDomain,n,"auth-domain-config-required"),he(n.config.apiKey,n,"invalid-api-key");const c={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:ui,eventId:i};if(e instanceof Tf){e.setDefaultLanguage(n.languageCode),c.providerId=e.providerId||"",_d(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[b,k]of Object.entries({}))c[b]=k}if(e instanceof bs){const b=e.getScopes().filter(k=>k!=="");b.length>0&&(c.scopes=b.join(","))}n.tenantId&&(c.tid=n.tenantId);const p=c;for(const b of Object.keys(p))p[b]===void 0&&delete p[b];const _=await n._getAppCheckToken(),T=_?`#${zv}=${encodeURIComponent(_)}`:"";return`${Wv(n)}?${_s(p).slice(1)}${T}`}function Wv({config:n}){return n.emulator?Du(n,Hv):`https://${n.authDomain}/${$v}`}const wa="webStorageSupport";class Gv{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=bf,this._completeRedirectFn=yv,this._overrideRedirectResult=pv}async _openPopup(e,t,r,i){Tn(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const a=await cl(e,t,r,za(),i);return Bv(e,a,Mu())}async _openRedirect(e,t,r,i){await this._originValidation(e);const a=await cl(e,t,r,za(),i);return X_(a),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:a}=this.eventManagers[t];return i?Promise.resolve(i):(Tn(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await Ov(e),r=new vv(e);return t.register("authEvent",i=>(he(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(wa,{type:wa},i=>{const a=i?.[0]?.[wa];a!==void 0&&t(!!a),vn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Av(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return mf()||lf()||Vu()}}const Kv=Gv;var ll="@firebase/auth",hl="1.11.1";class Qv{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){he(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Xv(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Jv(n){Zr(new Ar("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:c,authDomain:p}=r.options;he(c&&!c.includes(":"),"invalid-api-key",{appName:r.name});const _={apiKey:c,authDomain:p,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:yf(n)},T=new P_(r,i,a,_);return O_(T,t),T},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Zr(new Ar("auth-internal",e=>{const t=Ou(e.getProvider("auth").getImmediate());return(r=>new Qv(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Gn(ll,hl,Xv(n)),Gn(ll,hl,"esm2020")}const Yv=300,Zv=_l("authIdTokenMaxAge")||Yv;let fl=null;const eT=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>Zv)return;const i=t?.token;fl!==i&&(fl=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function tT(n=Al()){const e=Xa(n,"auth");if(e.isInitialized())return e.getImmediate();const t=V_(n,{popupRedirectResolver:Kv,persistence:[sv,G_,bf]}),r=_l("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const c=eT(a.toString());H_(t,c,()=>c(t.currentUser)),$_(t,p=>c(p))}}const i=ml("auth");return i&&L_(t,`http://${i}`),t}function nT(){return document.getElementsByTagName("head")?.[0]??document}k_({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const a=Zt("internal-error");a.customData=i,t(a)},r.type="text/javascript",r.charset="UTF-8",nT().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Jv("Browser");const rT={apiKey:"AIzaSyDsIQYqYt40Iegjah2wydbw1Ikexg7uL60",authDomain:"witiempo.firebaseapp.com",projectId:"witiempo",storageBucket:"witiempo.firebasestorage.app",messagingSenderId:"811694172966",appId:"1:811694172966:web:94497399987eaa01ffafe7"},Nf=Il(rT);tT(Nf);const xf=xy(Nf);di.register("/hora",()=>Oo(()=>import("./hora-Ct-fCS46.js"),[]));di.register("/calendario",()=>Oo(()=>import("./calendario-D4mBhsup.js"),[]));di.register("/calculadora",()=>Oo(()=>import("./calculadora-DZkYtid9.js"),[]));di.register("/cronometro",()=>Oo(()=>import("./cronometro-DmrtZKNu.js"),[]));Ce(document).on("click",".wibtn_auth",function(){const e=Ce(this).data("auth")==="register"?"Registro":"Inicio de sesiÃ³n";Ha(`${e} prÃ³ximamente disponible`,"info",2e3)});di.init();console.log("ð Sistema SPA inicializado");console.log("ð Rutas disponibles:",Object.keys(di.routes));Ce(".wimain").click(async function(){Ro("Escribiendo en base de datos, espere...");try{const n=Hh(xf,"publico","wilder");await Qy(n,{nombre:"Wilder",apellidos:"Uno Dos",mensaje:"Hola, Dios te protege!",creacion:Yy()}),Ro("â Documento guardado exitosamente!")}catch(n){console.error(n)}});Ce("button").click(async function(){Ro("Esperando un mensaje ");try{const n=Hh(xf,"publico","wilder"),e=await Gy(n);if(e.exists()){const t=e.data();Ro(t.mensaje)}}catch(n){console.error(n)}});export{Ce as $,Ha as N,e_ as g,Zy as s};
